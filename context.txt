This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.agent/
  workflows/
    backup.md
    export-context.md
    publish.md
    review-feedback.md
    setup-dual-remote.md
  rules.md
assets/
  dashboard.png
  editor.png
  viewer.png
docs/
  tutorials/
    dashboard.png
    editor.png
    viewer.png
  development_workflow.md
  implementation_plan.md
  integration.ts
  plan.md
  roadmap.md
  spec-kit-format.md
  spec-patch-format.md
  task.md
  user-guide.md
src/
  lib/
    assets/
      favicon.svg
    components/
      editor/
        ConstraintPanel.svelte
        index.ts
        SpecEditor.svelte
      ui/
        Button.svelte
        index.ts
        Panel.svelte
        StatusIndicator.svelte
        VirtualList.svelte
      MermaidDiagram.svelte
      Sidebar.svelte
      StatusBar.svelte
    domain/
      index.ts
      spec-engine.ts
    server/
      csrf.ts
      gemini-proxy.ts
      gemini.ts
    services/
      websocket.ts
    stores/
      artifact-store.ts
      config-store.ts
      connection-store.ts
      history-store.ts
      integration-store.ts
      session-store.ts
      settings-store.ts
      spec-store.ts
      sync-patch-store.ts
    types/
      index.ts
    utils/
      crypto-utils.ts
      csrf-client.ts
      diff-utils.ts
      event-utils.ts
      index.ts
      indexeddb-utils.ts
      prompt-utils.ts
      spec-kit-autocomplete.ts
      spec-kit-schema.ts
      storage-utils.ts
      yaml-utils.ts
    index.ts
  routes/
    api/
      csrf/
        +server.ts
      generate/
        +server.ts
      models/
        +server.ts
      ws/
        +server.ts
    api-docs/
      +page.svelte
    editor/
      +page.svelte
    history/
      +page.svelte
    settings/
      +page.svelte
    viewer/
      +page.svelte
    +layout.svelte
    +layout.ts
    +page.svelte
  app.css
  app.d.ts
  app.html
static/
  favicon.png
  favicon.svg
  manifest.json
  openapi.json
  robots.txt
  swagger-ui.css
.gitignore
.npmrc
.prettierignore
.prettierrc
eslint.config.js
package.json
README.md
svelte.config.js
tsconfig.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".agent/workflows/backup.md">
---
description: Giteaã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹
---
# Giteaãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ç¾åœ¨ã®ä½œæ¥­çŠ¶æ…‹ã‚’Giteaã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã—ã¦ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚

## æ‰‹é †

// turbo
1. `git status` ã§ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª
2. æœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ãŒã‚ã‚‹å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª
// turbo
3. `git add -A && git commit -m "<ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸>"` ã§å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ
// turbo
4. `git push origin` ã§Giteaã¸ãƒ—ãƒƒã‚·ãƒ¥
5. å®Œäº†ã‚’å ±å‘Š
</file>

<file path=".agent/workflows/export-context.md">
---
description: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Gemini/ChatGPTãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
---
# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

repomixã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’1ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã—ã€å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼ã«å‚™ãˆã¾ã™ã€‚

## å‰ææ¡ä»¶

repomixãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚
æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆã¯ `npm install -g repomix` ã‚’å®Ÿè¡Œã€‚

## æ‰‹é †

// turbo
1. `npx repomix --output context.txt` ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
2. ç”Ÿæˆã•ã‚ŒãŸ `context.txt` ã®å†…å®¹ã‚µãƒãƒªãƒ¼ã‚’å ±å‘Š
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œcontext.txt ã‚’Gemini/ChatGPTã«æ¸¡ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ã—ã¦ãã ã•ã„ã€ã¨æ¡ˆå†…

## ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¾Œã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```
ä»¥ä¸‹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å…¨ä½“ã§ã™ã€‚
ä»¥ä¸‹ã®è¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼š

1. è¨­è¨ˆãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ•´åˆæ€§
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µ
3. UI/UXã®æ”¹å–„æ¡ˆ
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ä½™åœ°

---
[context.txtã®å†…å®¹ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘]
```
</file>

<file path=".agent/workflows/review-feedback.md">
---
description: å¤–éƒ¨AIã®ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã‚’å–ã‚Šè¾¼ã‚€
---
# ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å–ã‚Šè¾¼ã¿ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ChatGPT/Geminiã‹ã‚‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã‚’æ•´ç†ã—ã€ä¿®æ­£ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

## å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆæ¨å¥¨ï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä»¥ä¸‹ã®å½¢å¼ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š

```markdown
## å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

### æ¡ç”¨ã™ã‚‹æŒ‡æ‘˜
- [ ] â—‹â—‹ã®ä¿®æ­£
- [ ] â–³â–³ã®è¿½åŠ 

### æ¤œè¨ãŒå¿…è¦ãªæŒ‡æ‘˜
- â–¡â–¡ã«ã¤ã„ã¦ï¼ˆç†ç”±: ...ï¼‰

### å´ä¸‹ã™ã‚‹æŒ‡æ‘˜
- Ã—Ã—ï¼ˆå´ä¸‹ç†ç”±: ...ï¼‰
```

## æ‰‹é †

1. ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã®å†…å®¹ã‚’è§£æã—ã€å¯¾å¿œé …ç›®ã‚’ä¸€è¦§åŒ–
2. ã€Œæ¡ç”¨ã™ã‚‹æŒ‡æ‘˜ã€ã«ã¤ã„ã¦ã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã¨ä¿®æ­£å†…å®¹ã‚’ç‰¹å®š
3. ä¿®æ­£ã‚’å®Ÿè¡Œ
4. ã€Œæ¤œè¨ãŒå¿…è¦ãªæŒ‡æ‘˜ã€ã«ã¤ã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ç›¸è«‡
5. ä¿®æ­£å®Œäº†å¾Œã€é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆdocs/ï¼‰ã‚‚æ›´æ–°
6. å¤‰æ›´ã‚µãƒãƒªãƒ¼ã‚’å ±å‘Š
</file>

<file path=".agent/workflows/setup-dual-remote.md">
---
description: Gitea/GitHub Dual Remoteç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
---
# Dual Remote ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã«2ã¤ã®ãƒªãƒ¢ãƒ¼ãƒˆï¼ˆGitea + GitHubï¼‰ã‚’è¨­å®šã—ã¾ã™ã€‚

## å‰ææ¡ä»¶

- GitåˆæœŸåŒ–æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- Giteaã¨GitHubã®ãƒªãƒã‚¸ãƒˆãƒªURLã‚’ç”¨æ„ã—ã¦ã„ã‚‹ã“ã¨

## æ‰‹é †

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«Giteaã®ãƒªãƒã‚¸ãƒˆãƒªURLã‚’ç¢ºèª
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«GitHubã®ãƒªãƒã‚¸ãƒˆãƒªURLã‚’ç¢ºèª
// turbo
3. `git remote add origin <Giteaã®URL>` ã§Giteaã‚’originã¨ã—ã¦è¿½åŠ 
// turbo
4. `git remote add public <GitHubã®URL>` ã§GitHubã‚’publicã¨ã—ã¦è¿½åŠ 
// turbo
5. `git remote -v` ã§ãƒªãƒ¢ãƒ¼ãƒˆè¨­å®šã‚’ç¢ºèª
6. è¨­å®šå®Œäº†ã‚’å ±å‘Š

## é‹ç”¨ãƒ«ãƒ¼ãƒ«

| ãƒªãƒ¢ãƒ¼ãƒˆå | ç”¨é€” | ãƒ—ãƒƒã‚·ãƒ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|-----------|------|-------------------|
| `origin` (Gitea) | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»WIP | ä½œæ¥­ã®åŒºåˆ‡ã‚Šã”ã¨ |
| `public` (GitHub) | å…¬é–‹ãƒ»AIãƒ¬ãƒ“ãƒ¥ãƒ¼ | ã‚¹ã‚¯ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸å¾Œ |
</file>

<file path=".agent/rules.md">
# Workspace Rules
1. å¸¸ã« `docs/development_workflow.md` ã‚’æœ€å„ªå…ˆã®æŒ‡ç¤ºæ›¸ã¨ã—ã¦éµå®ˆã—ã€å…¨ã¦ã®ä½œæ¥­å‰ã«ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¨ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ã®æ•´åˆæ€§ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
2. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆPlan/Taskç­‰ï¼‰ã¯å¿…ãš `docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã§ç®¡ç†ã—ã¦ãã ã•ã„ã€‚
3. Plan / Task ã«è¨˜è¼‰ã•ã‚ŒãŸç›®çš„ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ãƒ»åˆ¶ç´„ã¯ã€äººé–“ã®æ‰¿èªãªã—ã«å¤‰æ›´ã—ã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚å¤‰æ›´ãŒå¿…è¦ãªå ´åˆã¯ã€Œå¤‰æ›´ææ¡ˆã€ã¨ã—ã¦æ˜ç¤ºã—ã¦ãã ã•ã„ã€‚
4. å®Ÿè£…ä½œæ¥­ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€å¯¾å¿œã™ã‚‹ Plan / Task ãŒ docs/ é…ä¸‹ã«å­˜åœ¨ã™ã‚‹ã“ã¨ã‚’å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ã€‚
5. æŒ‡ç¤ºã‚„ä»•æ§˜ã«æ›–æ˜§ã•ã‚„çŸ›ç›¾ã‚’æ„Ÿã˜ãŸå ´åˆã€è‡ªå·±åˆ¤æ–­ã§è£œå®Œã›ãšã€å¿…ãšè³ªå•ã¾ãŸã¯ç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
</file>

<file path="docs/development_workflow.md">
<!-- Antigravity Instruction -->
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä¸Šè¨˜ã€Œé–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ã«å³å¯†ã«å¾“ã£ã¦é–‹ç™ºã•ã‚Œã¾ã™ã€‚
Antigravityã¯å¸¸ã«ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã€å®šç¾©ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ï¼ˆ/backup, /publish ç­‰ï¼‰ã¨ãƒ—ãƒ­ã‚»ã‚¹ã‚’éµå®ˆã—ã¦ãã ã•ã„ã€‚
Planã‚„Taskã¯Artifactsã§ã¯ãªãã€`docs/` é…ä¸‹ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç®¡ç†ã—ã¦ãã ã•ã„ã€‚

# é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

## é‡è¦ãªåŸå‰‡ï¼ˆå¿…é ˆï¼‰
[!IMPORTANT]
**Plan / Task ã«è¨˜è¼‰ã•ã‚ŒãŸã€Œç›®çš„ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ãƒ»åˆ¶ç´„ã€ã¯ã€äººé–“ã®æ‰¿èªãªã—ã«å¤‰æ›´ã—ã¦ã¯ãªã‚‰ãªã„ã€‚**
å¤‰æ›´ãŒå¿…è¦ãªå ´åˆã¯ã€å¿…ãšã€Œå¤‰æ›´ææ¡ˆã€ã¨ã—ã¦åˆ¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¨˜è¿°ã—ã€æ‰¿èªã‚’å¾…ã¤ã“ã¨ã€‚

## æ¦‚è¦

è¤‡æ•°ã®AIï¼ˆGemini/ChatGPT/Antigravityï¼‰ã‚’æ´»ç”¨ã—ãŸåŠ¹ç‡çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ã§ã™ã€‚

## é–‹ç™ºãƒ•ãƒ­ãƒ¼å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢å‡ºã—: Gemini/ChatGPT                       â”‚
â”‚  2. ãƒ—ãƒ©ãƒ³ä½œæˆ: Antigravity â†’ /review-feedback          â”‚
â”‚  3. å®Ÿè£…: Antigravity                                   â”‚
â”‚  4. ãƒ­ãƒ¼ã‚«ãƒ«ç¢ºèª: npm run dev (+ mkcert HTTPS)          â”‚
â”‚  5. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: /backup (Gitea)                       â”‚
â”‚  6. AIãƒ¬ãƒ“ãƒ¥ãƒ¼: /export-context â†’ Gemini/ChatGPT        â”‚
â”‚  7. ä¿®æ­£: /review-feedback â†’ 3ã«æˆ»ã‚‹                    â”‚
â”‚  8. å…¬é–‹æº–å‚™å®Œäº†: /publish â†’ GitHub Public + Pages      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ®µéšåˆ¥ãƒªãƒã‚¸ãƒˆãƒªé‹ç”¨

| é–‹ç™ºæ®µéš | ãƒªãƒã‚¸ãƒˆãƒª | ç¢ºèªæ–¹æ³• | AIãƒ¬ãƒ“ãƒ¥ãƒ¼ |
|----------|-----------|----------|-----------|
| **åˆæœŸé–‹ç™º** | Gitea | ãƒ­ãƒ¼ã‚«ãƒ«HTTP/HTTPS | repomix â†’ è²¼ã‚Šä»˜ã‘ |
| **æ©Ÿèƒ½å®Ÿè£…ä¸­** | Gitea | ãƒ­ãƒ¼ã‚«ãƒ«HTTPS | repomix â†’ è²¼ã‚Šä»˜ã‘ |
| **å…¬é–‹æº–å‚™** | GitHub Public | Pages | URLç›´æ¥å…±æœ‰å¯èƒ½ |
| **å…¬é–‹å¾Œ** | GitHub Public | Pages | URLç›´æ¥å…±æœ‰ |

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ä½¿ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|---------|------|---------------|
| `/backup` | Giteaã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | ä½œæ¥­ã®åŒºåˆ‡ã‚Šã”ã¨ |
| `/publish` | GitHubã¸ã‚¹ã‚¯ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸ | å…¬é–‹æº–å‚™å®Œäº†æ™‚ |
| `/review-feedback` | å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã‚’å–ã‚Šè¾¼ã‚€ | ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œ |
| `/export-context` | repomixã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | AIãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼å‰ |
| `/setup-dual-remote` | Dual Remoteè¨­å®š | åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ |

## ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªæ§‹æˆ

| ãƒªãƒ¢ãƒ¼ãƒˆå | URL | ç”¨é€” |
|-----------|-----|------|
| `origin` | Gitea (ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ) | é–‹ç™ºãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— |
| `public` | GitHub (ãƒ‘ãƒ–ãƒªãƒƒã‚¯) | å…¬é–‹ãƒ»Pages |

## ãƒ­ãƒ¼ã‚«ãƒ«HTTPSç’°å¢ƒï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

PWAã®Service Workerç­‰ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆã™ã‚‹å ´åˆï¼š

```bash
# mkcertã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰
sudo apt install mkcert
mkcert -install
mkcert localhost

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«HTTPSæœ‰åŠ¹åŒ–
npm run dev -- --https
```

## AIãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
ä»¥ä¸‹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å…¨ä½“ã§ã™ã€‚
ä»¥ä¸‹ã®è¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼š

1. è¨­è¨ˆãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ•´åˆæ€§
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µ
3. UI/UXã®æ”¹å–„æ¡ˆ
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ä½™åœ°

---
[context.txtã®å†…å®¹ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘]
```

## ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å½¢å¼

å¤–éƒ¨AIã‹ã‚‰ã®æŒ‡æ‘˜ã‚’Antigravityã«æ¸¡ã™éš›ã®æ¨å¥¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼š

```markdown
## å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

### æ¡ç”¨ã™ã‚‹æŒ‡æ‘˜
- [ ] â—‹â—‹ã®ä¿®æ­£
- [ ] â–³â–³ã®è¿½åŠ 

### æ¤œè¨ãŒå¿…è¦ãªæŒ‡æ‘˜
- â–¡â–¡ã«ã¤ã„ã¦ï¼ˆç†ç”±: ...ï¼‰

### å´ä¸‹ã™ã‚‹æŒ‡æ‘˜
- Ã—Ã—ï¼ˆå´ä¸‹ç†ç”±: ...ï¼‰
```
</file>

<file path="docs/implementation_plan.md">
# Phase 4 å®Ÿè£…è¨ˆç”»: å·®åˆ†ç®¡ç†ã¨çµ±åˆ

## ç›®æ¨™
Spec-Flow Studioã®æ ¸å¿ƒæ©Ÿèƒ½ã§ã‚ã‚‹ã€ŒDiffé§†å‹•é–‹ç™ºã€ã‚’å®Ÿè£…ã™ã‚‹ã€‚  
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã®å¤‰æ›´ã‚’æ¤œå‡ºã—ã€`SpecPatch`å½¢å¼ã§è¨˜éŒ²ãƒ»ç®¡ç†ã™ã‚‹ã€‚  
ã¾ãŸã€å±¥æ­´ç®¡ç†ï¼ˆã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«ï¼‰ã¨Aether Consoleã¨ã®WebSocketé€£æºã‚’å®Œæˆã•ã›ã‚‹ã€‚

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªäº‹é …

> [!IMPORTANT]
> **WebSocketçµ±åˆ**: å®Œå…¨ãªæ¤œè¨¼ã«ã¯Aether Consoleã®èµ·å‹•ãŒå¿…è¦ã§ã™ã€‚  
> Aether ConsoleãŒåˆ©ç”¨ã§ããªã„å ´åˆã¯ã€WebSocketæ¥ç¶šã‚’ãƒ¢ãƒƒã‚¯åŒ–ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ã€‚

---

## å¤‰æ›´å†…å®¹

### ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ (Diffã‚¨ãƒ³ã‚¸ãƒ³)

#### [NEW] [diff-utils.ts](file:///home/gemini1/workspace3/spec-flow-studio/src/lib/utils/diff-utils.ts)
- `generateSpecPatch(before, after)` ã®å®Ÿè£…
  - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»å¤‰æ›´ã‚’æ¤œå‡º
  - ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ¬ãƒ™ãƒ«ã®å¤‰æ›´ã‚’æ¤œå‡ºï¼ˆconstraints, capabilitiesãªã©ï¼‰
  - å½±éŸ¿åº¦ï¼ˆimpactï¼‰ã‚’ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã«ç®—å‡º
- `applySpecPatch(spec, patch)` ã®å®Ÿè£…
  - ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ã¦çŠ¶æ…‹ã‚’æ›´æ–°

---

### çŠ¶æ…‹ç®¡ç† (å±¥æ­´)

#### [NEW] [history-store.ts](file:///home/gemini1/workspace3/spec-flow-studio/src/lib/stores/history-store.ts)
- `SpecPatch` ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’ä¿å­˜
- Undo / Redo ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å®Ÿè£…
- `localStorage` ã¸ã®æ°¸ç¶šåŒ–

---

### UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### [NEW] [history/+page.svelte](file:///home/gemini1/workspace3/spec-flow-studio/src/routes/history/+page.svelte)
- ãƒ‘ãƒƒãƒã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º
- é¸æŠã—ãŸãƒ‘ãƒƒãƒã®è©³ç´°è¡¨ç¤ºï¼ˆè‡ªç„¶è¨€èªè¦ç´„ + æ§‹é€ å·®åˆ†ï¼‰
- ã€Œã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™ã€ãƒœã‚¿ãƒ³

#### [MODIFY] [editor/+page.svelte](file:///home/gemini1/workspace3/spec-flow-studio/src/routes/editor/+page.svelte)
- ä¿å­˜æ™‚ï¼ˆã¾ãŸã¯ã€Œã‚³ãƒŸãƒƒãƒˆã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ï¼‰ã«Diffç”Ÿæˆã‚’ãƒˆãƒªã‚¬ãƒ¼
- `history-store` ã¨ã®é€£æº

---

### çµ±åˆ (WebSocket)

#### [NEW] [websocket.ts](file:///home/gemini1/workspace3/spec-flow-studio/src/lib/services/websocket.ts)
- Spec-Flow Studio â†” Aether Console æ¥ç¶š
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—: `PATCH_CREATED`, `SYNC_REQUEST`, `SYNC_RESPONSE`

---

## æ¤œè¨¼è¨ˆç”»

### è‡ªå‹•ãƒ†ã‚¹ãƒˆ
- **Diffãƒ­ã‚¸ãƒƒã‚¯**: `diff-utils.ts` ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
  - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ãƒ»å‰Šé™¤ã®æ¤œå‡ºç¢ºèª
  - ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¤‰æ›´ï¼ˆconstraintsãªã©ï¼‰ã®æ¤œå‡ºç¢ºèª
  - ãƒ‘ãƒƒãƒé©ç”¨å¾Œã€å…ƒã®çŠ¶æ…‹ãŒå¾©å…ƒã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

### æ‰‹å‹•æ¤œè¨¼
1. **Diffç”Ÿæˆ**
   - ã‚¨ãƒ‡ã‚£ã‚¿ã§Specã‚’å¤‰æ›´
   - å±¥æ­´ãƒ“ãƒ¥ãƒ¼ã«æ–°ã—ã„ãƒ‘ãƒƒãƒãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - Summaryã¨Diffsã®å†…å®¹ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèª
2. **ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«**
   - è¤‡æ•°å›å¤‰æ›´ã‚’åŠ ãˆã‚‹
   - ã€ŒUndoã€ã¾ãŸã¯å¤ã„ãƒ‘ãƒƒãƒã‚’é¸æŠ
   - ã‚¨ãƒ‡ã‚£ã‚¿ã®å†…å®¹ãŒä»¥å‰ã®çŠ¶æ…‹ã«æˆ»ã‚‹ã“ã¨ã‚’ç¢ºèª
3. **æ°¸ç¶šåŒ–**
   - ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
   - å±¥æ­´ã¨ç¾åœ¨ã®çŠ¶æ…‹ãŒå¾©å…ƒã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
</file>

<file path="docs/integration.ts">
/**
 * Spec-Flow Studio Integration Types
 * 
 * Aether Consoleã¨Spec-Flow Studioã®é€£æºç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©
 * Spec-Flow Studioå´ã§ã‚‚åŒã˜å‹å®šç¾©ã‚’ä½¿ç”¨ã™ã‚‹
 */

// ========================================
// Spec-Kitå½¢å¼ï¼ˆå…±é€šãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼‰
// ========================================

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜
 */
export interface AgentSpec {
    name: string;
    displayName: string;
    role: string;
    capabilities: string[];
    constraints: string[];
    communication: {
        canSendTo: string[];
        canReceiveFrom: string[];
    };
}

/**
 * Specå·®åˆ†ï¼ˆä»•æ§˜å¤‰æ›´ï¼‰
 */
export interface SpecDiff {
    id: string;
    agentName: string;
    operation: 'add' | 'remove' | 'modify';
    path: string;
    before?: unknown;
    after?: unknown;
    description: string;
    impact: 'low' | 'medium' | 'high';
}

/**
 * ãƒ‘ãƒƒãƒï¼ˆå·®åˆ†ã®é›†åˆï¼‰
 */
export interface SpecPatch {
    id: string;
    name: string;
    description: string;
    diffs: SpecDiff[];
    appliedAt?: Date;
}

// ========================================
// é€£æºã‚¤ãƒ™ãƒ³ãƒˆ
// ========================================

/**
 * Aether Console â†’ Spec-Flow Studio
 * ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã‚¹ã‚¿ã‚¸ã‚ªã¸é€ä¿¡ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
 */
export type ConsoleToStudioEvent =
    | { type: 'PATCH_APPLIED'; patch: SpecPatch }
    | { type: 'PATCH_REVERTED'; patchId: string }
    | { type: 'AGENT_EXECUTED'; agentName: string; input: string; output: string }
    | { type: 'PROPOSAL_GENERATED'; proposal: string; agentResults: AgentResultSummary[] }
    | { type: 'SYNC_REQUEST'; };

/**
 * Spec-Flow Studio â†’ Aether Console
 * ã‚¹ã‚¿ã‚¸ã‚ªã‹ã‚‰ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸é€ä¿¡ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
 */
export type StudioToConsoleEvent =
    | { type: 'SPEC_UPDATED'; agents: AgentSpec[] }
    | { type: 'PATCH_CREATED'; patch: SpecPatch }
    | { type: 'SCENARIO_CREATED'; scenario: ScenarioSummary }
    | { type: 'SYNC_RESPONSE'; agents: AgentSpec[]; patches: SpecPatch[] };

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œçµæœã®æ¦‚è¦
 */
export interface AgentResultSummary {
    agentName: string;
    displayName: string;
    status: 'completed' | 'error';
    responseSummary: string;
}

/**
 * ã‚·ãƒŠãƒªã‚ªã®æ¦‚è¦
 */
export interface ScenarioSummary {
    id: string;
    name: string;
    description: string;
    messageCount: number;
}

// ========================================
// é€£æºè¨­å®š
// ========================================

/**
 * é€£æºæ¥ç¶šè¨­å®š
 */
export interface IntegrationConfig {
    /** Spec-Flow Studioã®WebSocket URL */
    studioUrl: string;
    /** è‡ªå‹•åŒæœŸã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ */
    autoSync: boolean;
    /** åŒæœŸé–“éš”ï¼ˆãƒŸãƒªç§’ï¼‰ */
    syncInterval: number;
}

/**
 * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é€£æºè¨­å®š
 */
export const DEFAULT_INTEGRATION_CONFIG: IntegrationConfig = {
    studioUrl: 'ws://localhost:3001/api/ws',
    autoSync: false,
    syncInterval: 5000
};
</file>

<file path="docs/plan.md">
# Spec-Flow Studio å®Ÿè£…è¨ˆç”»

## ç›®çš„ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ãƒ»åˆ¶ç´„

> [!IMPORTANT]
> ä»¥ä¸‹ã®å†…å®¹ã¯äººé–“ã®æ‰¿èªãªã—ã«å¤‰æ›´ã—ã¦ã¯ãªã‚‰ãªã„ã€‚å¤‰æ›´ãŒå¿…è¦ãªå ´åˆã¯ã€Œå¤‰æ›´ææ¡ˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã€‚

### ç›®çš„

Spec-Flow Studioã¯ã€AIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å¯è¦–åŒ–ãƒ»åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®PWAã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚
Spec-Kitå½¢å¼ã§ä»•æ§˜ã‚’è¨˜è¿°ã—ã€AIãŒè‡ªå‹•çš„ã«ä»¥ä¸‹ã‚’ç”Ÿæˆã™ã‚‹ï¼š

- UIãƒ¢ãƒƒã‚¯
- APIä»•æ§˜
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³

Aether Consoleï¼ˆSFé¢¨å¸ä»¤å®¤ï¼‰ã¨é€£æºã—ã€ã€ŒAIã‚’ã©ã†åˆ¶å¾¡ã™ã‚‹ã‹ã€ã‚’å¯è¦–åŒ–ã§ãã‚‹ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã¨ãªã‚‹ã€‚

### ã‚¹ã‚³ãƒ¼ãƒ—

**å«ã‚ã‚‹ã‚‚ã®:**
- Spec-Kitã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆYAMLå½¢å¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã®ç·¨é›†ï¼‰
- AIç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆGemini APIã«ã‚ˆã‚‹è‡ªå‹•ç”Ÿæˆï¼‰
- ç”Ÿæˆç‰©ãƒ“ãƒ¥ãƒ¼ã‚¢ï¼ˆPWAã§ä¸€è¦§è¡¨ç¤ºï¼‰
- å·®åˆ†ç®¡ç†ï¼ˆSpecPatchä½œæˆãƒ»é©ç”¨ãƒ»å±¥æ­´ï¼‰
- Aether Consoleé€£æºï¼ˆWebSocketåŒæ–¹å‘é€šä¿¡ï¼‰

**å«ã‚ãªã„ã‚‚ã®ï¼ˆPhase 1ã§ã¯ï¼‰:**
- è¤‡é›‘ãªãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
- ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®æ°¸ç¶šåŒ–ï¼ˆlocalStorageã§ä»£æ›¿ï¼‰

### åˆ¶ç´„

1. **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: SvelteKit + TypeScript + Vanilla CSS
2. **ãƒ‡ãƒ—ãƒ­ã‚¤**: GitHub Pagesï¼ˆPhase 1-2ï¼‰â†’ Vercelï¼ˆPhase 3ï¼‰
3. **AI API**: Gemini API ã‚’ä½¿ç”¨
4. **é€£æºãƒ—ãƒ­ãƒˆã‚³ãƒ«**: `integration.ts` ã§å®šç¾©ã•ã‚ŒãŸå‹ã‚’å³å®ˆ

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Spec-Flow Studio                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Spec Editor â”‚  â”‚ AI Generator â”‚  â”‚ Artifact Viewer    â”‚ â”‚
â”‚  â”‚ (Desired)   â”‚â†’ â”‚ (Gemini)    â”‚â†’ â”‚ (Actual)           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â†‘                                    â†“              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚         Diff Manager (SpecPatch) - Driftæ¤œå‡º           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                           â†•                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚         Integration Layer (WebSocket)                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                           â†•                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    Aether Console      â”‚
              â”‚   (SFé¢¨AIå¸ä»¤å®¤)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ…‹ç®¡ç†ã®3å±¤ãƒ¢ãƒ‡ãƒ«

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | èª¬æ˜ | å¯¾å¿œUI |
|---------|------|--------|
| **Desired State** | Spec-Kitï¼ˆYAMLä»•æ§˜ï¼‰ | ã‚¨ãƒ‡ã‚£ã‚¿ |
| **Actual State** | ç”Ÿæˆã•ã‚ŒãŸArtifacts | ãƒ“ãƒ¥ãƒ¼ã‚¢ |
| **Drift** | ä¸¡è€…ã®ä¹–é›¢ãƒ»ãƒ‘ãƒƒãƒå±¥æ­´ | å±¥æ­´ãƒšãƒ¼ã‚¸ |

---

## Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆç›®æ¨™: 1é€±é–“ï¼‰

**ç›®æ¨™**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ãƒ»åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å®Œæˆ

### ã‚¿ã‚¹ã‚¯

| # | ã‚¿ã‚¹ã‚¯ | è©³ç´° |
|---|--------|------|
| 1.1 | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆæ•´ç† | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã€å‹å®šç¾©ã€storesé…ç½® |
| 1.2 | å…±é€šå‹å®šç¾© | `integration.ts` ã‚’ `$lib/types` ã¸ç§»å‹•ãƒ»æ‹¡å¼µ |
| 1.3 | ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  | SFé¢¨CSSå¤‰æ•°ã€å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| 1.4 | åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | ã‚µã‚¤ãƒ‰ãƒãƒ¼ + ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ + ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ |
| 1.5 | PWAè¨­å®š | manifest.json, service worker |
| 1.6 | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | `/editor`, `/viewer`, `/history`, `/settings` |
| 1.7 | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸè¡¨ç¤º | ç¾åœ¨ã®Specåã€Artifactä¸€è¦§ã€æ¥ç¶šçŠ¶æ…‹ |

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆäºˆå®šï¼‰

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ components/     # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ui/         # åŸºæœ¬UI (Button, Panel, etc.)
â”‚   â”‚   â”œâ”€â”€ editor/     # ã‚¨ãƒ‡ã‚£ã‚¿é–¢é€£
â”‚   â”‚   â””â”€â”€ viewer/     # ãƒ“ãƒ¥ãƒ¼ã‚¢é–¢é€£
â”‚   â”œâ”€â”€ stores/         # Svelte stores
â”‚   â”‚   â”œâ”€â”€ spec-store.ts
â”‚   â”‚   â”œâ”€â”€ artifact-store.ts
â”‚   â”‚   â””â”€â”€ integration-store.ts
â”‚   â”œâ”€â”€ types/          # TypeScriptå‹å®šç¾©
â”‚   â”‚   â””â”€â”€ index.ts    # integration.ts ã®å†…å®¹ã‚’å«ã‚€
â”‚   â”œâ”€â”€ services/       # å¤–éƒ¨é€£æº
â”‚   â”‚   â”œâ”€â”€ ai-service.ts
â”‚   â”‚   â””â”€â”€ ws-service.ts
â”‚   â””â”€â”€ utils/          # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ +layout.svelte
â”‚   â”œâ”€â”€ +page.svelte    # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ editor/         # Spec-Kit ã‚¨ãƒ‡ã‚£ã‚¿
â”‚   â”œâ”€â”€ viewer/         # ç”Ÿæˆç‰©ãƒ“ãƒ¥ãƒ¼ã‚¢
â”‚   â”œâ”€â”€ history/        # å·®åˆ†å±¥æ­´
â”‚   â””â”€â”€ settings/       # è¨­å®š
â””â”€â”€ app.css             # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
```

---

## Phase 2: Spec-Kit ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆç›®æ¨™: 1é€±é–“ï¼‰

**ç›®æ¨™**: YAMLã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã‚’ç·¨é›†ã§ãã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ã®å®Œæˆ

### ã‚¿ã‚¹ã‚¯

| # | ã‚¿ã‚¹ã‚¯ | è©³ç´° |
|---|--------|------|
| 2.1 | YAMLãƒ‘ãƒ¼ã‚µãƒ¼çµ±åˆ | js-yaml + ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ |
| 2.2 | ã‚¨ãƒ‡ã‚£ã‚¿UI | CodeMirror or Monaco Editor |
| 2.3 | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | Spec-Kitå½¢å¼ã®ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ |
| 2.4 | **åˆ¶ç´„å¯è¦–åŒ–ãƒ‘ãƒãƒ«** | constraints ã‚’åˆ¥ãƒ‘ãƒãƒ«ã§å¼·èª¿è¡¨ç¤º |
| 2.5 | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ |
| 2.6 | ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ | localStorage ã¸ã®ä¿å­˜ãƒ»èª­è¾¼ |
| 2.7 | ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ | YAML â†’ æ§‹é€ åŒ–ãƒ“ãƒ¥ãƒ¼ |

---

## Phase 3.0: AIç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³ãƒ»ã‚³ã‚¢ï¼ˆç›®æ¨™: 1é€±é–“ï¼‰

**ç›®æ¨™**: UIãƒ¢ãƒƒã‚¯ã¨APIä»•æ§˜ã®è‡ªå‹•ç”Ÿæˆ

### ã‚¿ã‚¹ã‚¯

| # | ã‚¿ã‚¹ã‚¯ | è©³ç´° |
|---|--------|------|
| 3.0.1 | Gemini APIçµ±åˆ | APIã‚­ãƒ¼ç®¡ç†ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç† |
| 3.0.2 | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆï¼ˆã‚³ã‚¢ï¼‰ | UIãƒ¢ãƒƒã‚¯ãƒ»APIä»•æ§˜ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ |
| 3.0.3 | UIãƒ¢ãƒƒã‚¯ç”Ÿæˆ | HTML/CSSã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |
| 3.0.4 | APIä»•æ§˜ç”Ÿæˆ | OpenAPIå½¢å¼ã§å‡ºåŠ›ï¼ˆStructured Outputæ´»ç”¨ï¼‰ |
| 3.0.5 | ç”Ÿæˆãƒ­ã‚°ä¿å­˜ | ä½¿ç”¨Specã€ç”Ÿæˆç†ç”±ï¼ˆrationaleï¼‰ã‚’è¨˜éŒ² |

---

## Phase 3.5: AIç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³ãƒ»æ‹¡å¼µï¼ˆç›®æ¨™: 1é€±é–“ï¼‰

**ç›®æ¨™**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒ»ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã®ç”Ÿæˆã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ

### ã‚¿ã‚¹ã‚¯

| # | ã‚¿ã‚¹ã‚¯ | è©³ç´° |
|---|--------|------|
| 3.5.1 | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆï¼ˆæ‹¡å¼µï¼‰ | Testãƒ»UCç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ |
| 3.5.2 | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”Ÿæˆ | Jest/Vitestå½¢å¼ã§å‡ºåŠ› |
| 3.5.3 | ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ç”Ÿæˆ | Mermaidå½¢å¼ã§å‡ºåŠ› |
| 3.5.4 | Mermaidãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | mermaid.jsçµ±åˆ |
| 3.5.5 | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ | ç”Ÿæˆä¸­ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º |

---

## Phase 4: å·®åˆ†ç®¡ç†ãƒ»é€£æºï¼ˆç›®æ¨™: 2é€±é–“ï¼‰

**ç›®æ¨™**: å·®åˆ†ç®¡ç†ã¨Aether Consoleé€£æº

### ã‚¿ã‚¹ã‚¯

| # | ã‚¿ã‚¹ã‚¯ | è©³ç´° |
|---|--------|------|
| 4.1 | SpecDiffç”Ÿæˆ | ä»•æ§˜å¤‰æ›´ã®å·®åˆ†æ¤œå‡º |
| 4.2 | SpecPatchç®¡ç† | ãƒ‘ãƒƒãƒã®ä½œæˆãƒ»é©ç”¨ãƒ»å±¥æ­´ |
| 4.3 | å·®åˆ†ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚º | å¤‰æ›´ç®‡æ‰€ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º |
| 4.4 | WebSocketå®Ÿè£… | Aether Consoleã¨ã®é€šä¿¡åŸºç›¤ |
| 4.5 | ã‚¤ãƒ™ãƒ³ãƒˆé€å—ä¿¡ | ConsoleToStudioEvent / StudioToConsoleEvent |
| 4.6 | åŒæœŸæ©Ÿèƒ½ | ä»•æ§˜ãƒ»ãƒ‘ãƒƒãƒã®è‡ªå‹•åŒæœŸ |
| 4.7 | **Rollbackæ©Ÿèƒ½** | ä»»æ„ã®SpecPatchã¾ã§ä»•æ§˜ã‚’å·»ãæˆ»ã— |

---

## æˆæœç‰©ä¸€è¦§

| Phase | æˆæœç‰© | èª¬æ˜ |
|-------|--------|------|
| 1 | åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | SFé¢¨PWAã‚·ã‚§ãƒ« |
| 2 | Spec-Kitã‚¨ãƒ‡ã‚£ã‚¿ | YAMLç·¨é›†UI + åˆ¶ç´„å¯è¦–åŒ– |
| 3.0 | AIç”Ÿæˆï¼ˆã‚³ã‚¢ï¼‰ | UIãƒ¢ãƒƒã‚¯ + APIä»•æ§˜ |
| 3.5 | AIç”Ÿæˆï¼ˆæ‹¡å¼µï¼‰ | Test + UC + ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° |
| 4 | å·®åˆ†ç®¡ç†ãƒ»é€£æº | Aether Consoleé€£æº + Rollback |

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [spec-patch-format.md](./spec-patch-format.md) - SpecPatchå½¢å¼ã®å®šç¾©

---

## å¤‰æ›´ææ¡ˆ

ï¼ˆç¾æ™‚ç‚¹ã§ã¯ææ¡ˆãªã—ï¼‰

---

## æ‰¿èªå±¥æ­´

| æ—¥ä»˜ | æ‰¿èªè€… | å†…å®¹ |
|------|--------|------|
| 2026-01-15 | ChatGPT / Gemini | å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†ãƒ»GOåˆ¤æ–­ |
| 2026-01-15 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | Phaseåˆ†å‰²ãƒ»SpecPatchå½¢å¼ãƒ»AIé™çš„è§£æå»¶æœŸã‚’æ‰¿èª |
</file>

<file path="docs/roadmap.md">
# Aether Console ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

## æ¦‚è¦

Aether Consoleã¯SFé¢¨ã®AIã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ PWAã€‚è¤‡æ•°ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å¯è¦–åŒ–ãƒ»åˆ¶å¾¡ã—ã€æœ€çµ‚çš„ã«ã¯Spec-Flow Studioã‚’ç›£è¦–ã™ã‚‹ã€‚

## é–‹ç™ºæ–¹é‡

```
Aether Console (å…ˆè¡Œé–‹ç™º)
     â†“
Spec-Kitå½¢å¼ã‚’è¨­è¨ˆãƒ»å…±é€šåŒ–
     â†“
Spec-Flow Studio (å¾Œç¶šé–‹ç™º)
     â†“
ä¸¡è€…é€£æºã§å®Œæˆ
```

---

## Phase 1: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Œæˆ

**ç›®æ¨™**: SFé¢¨å¸ä»¤å®¤UIã®å®Œæˆã€ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§ã®å‹•ä½œç¢ºèª

| ã‚¿ã‚¹ã‚¯ | çŠ¶æ…‹ | è©³ç´° |
|--------|------|------|
| SvelteKitãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ– | âœ… | TypeScript, PWAè¨­å®šæ¸ˆã¿ |
| SFé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  | âœ… | global.css, Panel, GlitchText, StatusIndicator |
| å¸ä»¤å®¤ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | â¬œ | è¤‡æ•°ãƒ‘ãƒãƒ«ã®ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ‘ãƒãƒ« | â¬œ | å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çŠ¶æ…‹è¡¨ç¤º |
| ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›è¡¨ç¤º | â¬œ | ãƒ­ã‚°/ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ è¡¨ç¤º |
| GitHub Pages ãƒ‡ãƒ—ãƒ­ã‚¤ | â¬œ | adapter-staticè¨­å®š |

**æˆæœç‰©**: é™çš„ãªSFé¢¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼‰

---

## Phase 2: é™çš„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**ç›®æ¨™**: ã€ŒAIãŒã„ãªãã¦ã‚‚ã€"AIãŒåˆ¶å¾¡ã•ã‚Œã¦ã„ã‚‹æ„Ÿè¦š"ãŒä½“é¨“ã§ãã‚‹ã€

| ã‚¿ã‚¹ã‚¯ | çŠ¶æ…‹ | è©³ç´° |
|--------|------|------|
| Spec-Kitå½¢å¼è¨­è¨ˆ | âœ… | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã®YAML/JSONå½¢å¼ |
| ãƒ¢ãƒƒã‚¯ã‚·ãƒŠãƒªã‚ªä½œæˆ | â¬œ | äº‹å‰å®šç¾©ã—ãŸä¼šè©±ã‚·ãƒŠãƒªã‚ª |
| ã‚·ãƒŠãƒªã‚ªå†ç”Ÿæ©Ÿèƒ½ | â¬œ | ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ä¸Šã§ã‚·ãƒŠãƒªã‚ªã‚’å†ç”Ÿ |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ä¼šè©±è¡¨ç¤º | â¬œ | ä¼šè©±ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚º |
| Specå·®åˆ†ã®é©ç”¨ãƒ»å†ç”Ÿ | â¬œ | ä»•æ§˜å¤‰æ›´ã®å³æ™‚åæ˜  |
| å·®åˆ†ã«ã‚ˆã‚‹æŒ™å‹•å¤‰åŒ–ã®å¯è¦–åŒ– | â¬œ | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè²¬ä»»å¢ƒç•Œã®å¯è¦–åŒ– |

**æˆæœç‰©**: 
- ã‚·ãƒŠãƒªã‚ªå†ç”Ÿå¯èƒ½ãªãƒ‡ãƒ¢
- Specå·®åˆ† â†’ æŒ™å‹•å¤‰åŒ–ã®å¯è¦–åŒ–
- å°†æ¥ç”Ÿæˆã•ã‚Œã‚‹UI/API/Testã®"äºˆå‘Šè¡¨ç¤º"ï¼ˆSpec-Flow Studioã®"å½±"ï¼‰

---

## Phase 3: AIçµ±åˆ

**ç›®æ¨™**: å®Ÿéš›ã®AI APIã¨æ¥ç¶šã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‹•ä½œ

| ã‚¿ã‚¹ã‚¯ | çŠ¶æ…‹ | è©³ç´° |
|--------|------|------|
| AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒåŸºç›¤ | â¬œ | Gemini/Claude APIé€£æº |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç† | â¬œ | Svelte storeã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çŠ¶æ…‹ç®¡ç† |
| WebSocket/SSEæ¥ç¶š | â¬œ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ |
| ææ¡ˆçµ±åˆæ©Ÿèƒ½ | â¬œ | è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‡ºåŠ›ã®ã¾ã¨ã‚ |
| Spec-Flow Studioé€£æº | â¬œ | ç›£è¦–å¯¾è±¡ã¨ã®æ¥ç¶š |

**æˆæœç‰©**: å®Ÿéš›ã«AIãŒå‹•ä½œã™ã‚‹å¸ä»¤å®¤

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹æˆï¼ˆäºˆå®šï¼‰

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | å½¹å‰² | ç›£è¦–å¯¾è±¡ |
|-------------|------|---------|
| **Analyzer** | æƒ…å ±è§£æ | å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ |
| **Predictor** | äºˆæ¸¬ | ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒªã‚¹ã‚¯äºˆæ¸¬ |
| **Planner** | è¨ˆç”»ç«‹æ¡ˆ | æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ææ¡ˆ |
| **Monitor** | ãƒªã‚¹ã‚¯ç›£è¦– | ç•°å¸¸æ¤œçŸ¥ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ |

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ |
|---------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | SvelteKit + TypeScript |
| ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | Vanilla CSS |
| PWA | vite-plugin-pwa |
| ãƒ‡ãƒ—ãƒ­ã‚¤ | GitHub Pages â†’ Vercelï¼ˆPhase 3ï¼‰ |
| AI API | Gemini / Claudeï¼ˆPhase 3ï¼‰ |
| é€šä¿¡ | WebSocket / SSEï¼ˆPhase 3ï¼‰ |

---

## ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | ç›®æ¨™æ—¥ | å†…å®¹ |
|---------------|--------|------|
| M1: UIåŸºç›¤å®Œæˆ | - | Phase 1å®Œäº† |
| M2: ãƒ‡ãƒ¢å¯èƒ½ | - | Phase 2å®Œäº†ã€ã‚·ãƒŠãƒªã‚ªå†ç”Ÿ |
| M3: AIçµ±åˆ | - | Phase 3å®Œäº†ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‹•ä½œ |
| M4: Spec-Flowé€£æº | - | Spec-Flow Studioã¨é€£æº |
</file>

<file path="docs/spec-kit-format.md">
# Spec-Kit ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©å½¢å¼ï¼ˆDraftï¼‰

## æ¦‚è¦

Spec-Kitã¯ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½¹å‰²ãƒ»èƒ½åŠ›ãƒ»åˆ¶ç´„ã‚’å®£è¨€çš„ã«å®šç¾©ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‚
Aether Consoleã¨Spec-Flow Studioã®ä¸¡æ–¹ã§å…±é€šåˆ©ç”¨ã™ã‚‹ã€‚

---

## åŸºæœ¬æ§‹é€ 

```yaml
# agent.spec.yaml
kind: Agent
version: v1
metadata:
  name: analyzer
  displayName: "Analyzer"
  description: "æƒ…å ±è§£æã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"
  icon: "ğŸ”"

spec:
  role: |
    å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ã€‚
    ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ç•°å¸¸ã‚’æ¤œå‡ºã—ã€ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å ±å‘Šã™ã‚‹ã€‚

  capabilities:
    - data-analysis
    - pattern-recognition
    - anomaly-detection

  constraints:
    - "æ¨æ¸¬ã§æƒ…å ±ã‚’è£œå®Œã—ãªã„"
    - "ç¢ºä¿¡åº¦ãŒä½ã„å ´åˆã¯æ˜ç¤ºã™ã‚‹"

  inputs:
    - type: text
      description: "åˆ†æå¯¾è±¡ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿"
    - type: structured-data
      description: "JSONå½¢å¼ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿"

  outputs:
    - type: analysis-report
      schema:
        findings: string[]
        confidence: number
        anomalies: string[]

  triggers:
    - event: data-received
      action: analyze
    - event: request-from-planner
      action: deep-analyze

  communication:
    canSendTo:
      - predictor
      - planner
      - monitor
    canReceiveFrom:
      - planner
      - monitor

  # Aether Consoleã¸ã®å…¬é–‹è¨­å®š
  observability:
    expose:
      - status
      - progress
      - metrics.errorRate
    logLevel: info
```

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡

```yaml
# message.spec.yaml
kind: Message
version: v1
metadata:
  id: "msg-001"
  from: analyzer
  to: predictor
  timestamp: "2026-01-14T00:30:00Z"

spec:
  type: analysis-complete
  priority: normal
  content:
    summary: "ãƒ‡ãƒ¼ã‚¿åˆ†æå®Œäº†"
    findings:
      - "ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ç•°å¸¸ãªã—"
      - "CPUä½¿ç”¨ç‡ãŒé€šå¸¸ã‚ˆã‚Š20%é«˜ã„"
    confidence: 0.85
    requestPrediction: true
```

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹

```yaml
# state.spec.yaml
kind: AgentState
version: v1
metadata:
  agentName: analyzer
  timestamp: "2026-01-14T00:30:00Z"

spec:
  status: active  # active | idle | warning | error | offline
  currentTask: "analyzing-input-001"
  progress: 0.65
  lastActivity: "2026-01-14T00:29:55Z"
  metrics:
    tasksCompleted: 42
    averageResponseTime: 1.2s
    errorRate: 0.02
```

---

## ã‚·ãƒŠãƒªã‚ªå®šç¾©ï¼ˆPhase 2ç”¨ï¼‰

```yaml
# scenario.spec.yaml
kind: Scenario
version: v1
metadata:
  name: "basic-analysis-flow"
  description: "åŸºæœ¬çš„ãªåˆ†æãƒ•ãƒ­ãƒ¼"

spec:
  steps:
    - time: 0
      action: set-state
      agent: analyzer
      state: { status: idle }

    - time: 1000
      action: set-state
      agent: analyzer
      state: { status: active, currentTask: "analyzing-input" }

    - time: 2000
      action: send-message
      from: analyzer
      to: predictor
      message:
        type: analysis-complete
        content: { summary: "åˆ†æå®Œäº†", confidence: 0.9 }

    - time: 3000
      action: set-state
      agent: predictor
      state: { status: active }

    - time: 5000
      action: console-log
      message: "[Predictor] äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’å®Ÿè¡Œä¸­..."
```

---

## è¨­è¨ˆåŸå‰‡

1. **å®£è¨€çš„**: ã€Œä½•ã‚’ã™ã‚‹ã‹ã€ã‚’è¨˜è¿°ã€ã€Œã©ã†ã‚„ã‚‹ã‹ã€ã¯å®Ÿè£…ãŒæ±ºã‚ã‚‹
2. **å‹å®‰å…¨**: ã‚¹ã‚­ãƒ¼ãƒã§input/outputã‚’æ˜ç¢ºåŒ–
3. **ç–çµåˆ**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§é€šä¿¡
4. **å¯è¦–åŒ–ã—ã‚„ã™ã„**: Aether Consoleã§ã®è¡¨ç¤ºã‚’æ„è­˜ã—ãŸæ§‹é€ 

---

## ä»Šå¾Œã®æ¤œè¨äº‹é …

- [ ] ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆJSON Schema / Zodï¼‰
- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰
- [ ] ä¼šè©±å±¥æ­´ã®æ°¸ç¶šåŒ–
- [ ] è¤‡æ•°ã‚·ãƒŠãƒªã‚ªã®åˆ‡ã‚Šæ›¿ãˆ
</file>

<file path="docs/spec-patch-format.md">
# SpecPatch å½¢å¼å®šç¾©

## æ¦‚è¦

SpecPatchã¯ã€Spec-Kitä»•æ§˜ã®å·®åˆ†ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å½¢å¼ã€‚
æ©Ÿæ¢°çš„ãªå‡¦ç†ã¨äººé–“ãƒ»AIã®ç†è§£ã®ä¸¡æ–¹ã«å¯¾å¿œã™ã‚‹ã€‚

---

## åŸºæœ¬æ§‹é€ 

```yaml
kind: SpecPatch
version: v1
metadata:
  id: patch-001
  name: "æ¨æ¸¬ç¦æ­¢åˆ¶ç´„ã®è¿½åŠ "
  createdAt: 2026-01-15T23:00:00Z
  author: human  # human | ai | system

spec:
  # æ§‹é€ çš„å·®åˆ†ï¼ˆæ©Ÿæ¢°å‡¦ç†ç”¨ï¼‰
  diffs:
    - id: diff-001
      agentName: analyzer
      operation: add        # add | remove | modify
      path: spec.constraints
      before: null
      after: "å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’æ¨æ¸¬ã§è£œå®Œã—ãªã„"
      impact: medium        # low | medium | high
  
  # è‡ªç„¶è¨€èªè¦ç´„ï¼ˆäººé–“ãƒ»AIç†è§£ç”¨ï¼‰
  summary: "Analyzerã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ¨æ¸¬ç¦æ­¢ã®åˆ¶ç´„ã‚’è¿½åŠ "
  rationale: "éåº¦ãªæ¨è«–ã«ã‚ˆã‚‹èª¤åˆ†æã‚’é˜²ããŸã‚"
  
  # é©ç”¨çŠ¶æ…‹
  appliedAt: null           # é©ç”¨æ—¥æ™‚ï¼ˆæœªé©ç”¨ã¯nullï¼‰
```

---

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©

### metadata

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|-----------|-----|------|------|
| `id` | string | âœ“ | ãƒ‘ãƒƒãƒã®ä¸€æ„è­˜åˆ¥å­ |
| `name` | string | âœ“ | ãƒ‘ãƒƒãƒã®çŸ­ã„åå‰ |
| `createdAt` | ISO8601 | âœ“ | ä½œæˆæ—¥æ™‚ |
| `author` | enum | âœ“ | ä½œæˆè€…ç¨®åˆ¥ (`human` / `ai` / `system`) |

### spec.diffs[]

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|-----------|-----|------|------|
| `id` | string | âœ“ | å·®åˆ†ã®ä¸€æ„è­˜åˆ¥å­ |
| `agentName` | string | âœ“ | å¯¾è±¡ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå |
| `operation` | enum | âœ“ | æ“ä½œç¨®åˆ¥ (`add` / `remove` / `modify`) |
| `path` | string | âœ“ | å¤‰æ›´ãƒ‘ã‚¹ï¼ˆJSONPathå½¢å¼ï¼‰ |
| `before` | any | - | å¤‰æ›´å‰ã®å€¤ï¼ˆaddæ™‚ã¯nullï¼‰ |
| `after` | any | - | å¤‰æ›´å¾Œã®å€¤ï¼ˆremoveæ™‚ã¯nullï¼‰ |
| `impact` | enum | âœ“ | å½±éŸ¿åº¦ (`low` / `medium` / `high`) |

### specï¼ˆãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|-----------|-----|------|------|
| `diffs` | array | âœ“ | å·®åˆ†ã®é…åˆ— |
| `summary` | string | âœ“ | å¤‰æ›´ã®è‡ªç„¶è¨€èªè¦ç´„ |
| `rationale` | string | - | å¤‰æ›´ç†ç”±ï¼ˆãªãœã“ã®å¤‰æ›´ãŒå¿…è¦ã‹ï¼‰ |
| `appliedAt` | ISO8601 | - | é©ç”¨æ—¥æ™‚ï¼ˆæœªé©ç”¨ã¯nullï¼‰ |

---

## æ“ä½œä¾‹

### 1. åˆ¶ç´„ã®è¿½åŠ 

```yaml
diffs:
  - id: diff-001
    agentName: analyzer
    operation: add
    path: spec.constraints
    before: null
    after: "å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’æ¨æ¸¬ã§è£œå®Œã—ãªã„"
    impact: medium
```

### 2. èƒ½åŠ›ã®å¤‰æ›´

```yaml
diffs:
  - id: diff-002
    agentName: predictor
    operation: modify
    path: spec.capabilities[0]
    before: "trend-prediction"
    after: "advanced-trend-prediction"
    impact: low
```

### 3. é€šä¿¡å…ˆã®å‰Šé™¤

```yaml
diffs:
  - id: diff-003
    agentName: monitor
    operation: remove
    path: spec.communication.canSendTo[2]
    before: "deprecated-agent"
    after: null
    impact: high
```

---

## TypeScriptå‹å®šç¾©

```typescript
export interface SpecPatch {
  kind: 'SpecPatch';
  version: 'v1';
  metadata: {
    id: string;
    name: string;
    createdAt: string;  // ISO8601
    author: 'human' | 'ai' | 'system';
  };
  spec: {
    diffs: SpecDiff[];
    summary: string;
    rationale?: string;
    appliedAt?: string;  // ISO8601
  };
}

export interface SpecDiff {
  id: string;
  agentName: string;
  operation: 'add' | 'remove' | 'modify';
  path: string;
  before?: unknown;
  after?: unknown;
  impact: 'low' | 'medium' | 'high';
}
```

---

## Aether Consoleé€£æº

### ãƒ‘ãƒƒãƒé©ç”¨ã‚¤ãƒ™ãƒ³ãƒˆ

```typescript
// Console â†’ Studio
{ type: 'PATCH_APPLIED', patch: SpecPatch }

// Studio â†’ Console
{ type: 'PATCH_CREATED', patch: SpecPatch }
```

### Rollback

Rollbackã¯ã€æŒ‡å®šã—ãŸãƒ‘ãƒƒãƒã¾ã§ã®å…¨ãƒ‘ãƒƒãƒã‚’é€†é †ã§ `remove` / `add` ã‚’åè»¢ã—ã¦é©ç”¨ã™ã‚‹ã€‚

---

## è¨­è¨ˆåŸå‰‡

1. **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰**: æ§‹é€ diffï¼ˆæ©Ÿæ¢°ç”¨ï¼‰+ è‡ªç„¶è¨€èªï¼ˆäººé–“ãƒ»AIç”¨ï¼‰
2. **è¿½è·¡å¯èƒ½**: èª°ãŒãƒ»ã„ã¤ãƒ»ãªãœå¤‰æ›´ã—ãŸã‹ã‚’è¨˜éŒ²
3. **å¯é€†**: Rollbackã«å¿…è¦ãªæƒ…å ±ã‚’ä¿æŒ
4. **é€£æºå¯¾å¿œ**: Aether Consoleã®ã‚¤ãƒ™ãƒ³ãƒˆå½¢å¼ã¨äº’æ›
</file>

<file path="docs/user-guide.md">
# Spec-Flow Studio ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰

Spec-Flow Studioã¯ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä»•æ§˜ï¼ˆSpec-Kitï¼‰ã‚’ç·¨é›†ãƒ»ç®¡ç†ã—ã€AIã«ã‚ˆã‚‹æˆæœç‰©ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ç›®æ¬¡

1. [ã¯ã˜ã‚ã«](#ã¯ã˜ã‚ã«)
2. [èµ·å‹•æ–¹æ³•](#èµ·å‹•æ–¹æ³•)
3. [ç”»é¢æ§‹æˆ](#ç”»é¢æ§‹æˆ)
4. [åŸºæœ¬çš„ãªä½¿ã„æ–¹](#åŸºæœ¬çš„ãªä½¿ã„æ–¹)
5. [å„æ©Ÿèƒ½ã®è©³ç´°](#å„æ©Ÿèƒ½ã®è©³ç´°)
6. [APIè¨­å®š](#apiè¨­å®š)
7. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ã¯ã˜ã‚ã«

### Spec-Kitå½¢å¼ã¨ã¯

Spec-Kitã¯ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æŒ¯ã‚‹èˆã„ã‚’YAMLå½¢å¼ã§å®šç¾©ã™ã‚‹ä»•æ§˜æ›¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã™ã€‚

```yaml
agents:
  - name: analyzer
    displayName: åˆ†æã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    role: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦ä»¶ã‚’åˆ†æã—ã€ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã™ã‚‹
    capabilities:
      - è‡ªç„¶è¨€èªã®è§£æ
      - ã‚¿ã‚¹ã‚¯ã®å„ªå…ˆåº¦ä»˜ã‘
    constraints:
      - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ˜ç¤ºçš„ãªæŒ‡ç¤ºãªã—ã«å¤–éƒ¨APIã‚’å‘¼ã³å‡ºã•ãªã„
    communication:
      canSendTo: [executor]
      canReceiveFrom: [user]
```

---

## èµ·å‹•æ–¹æ³•

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼

```bash
cd spec-flow-studio
npm install
npm run dev
```

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `http://localhost:5173` ã§èµ·å‹•ã—ã¾ã™ã€‚

---

## ç”»é¢æ§‹æˆ

### ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

| ã‚¢ã‚¤ã‚³ãƒ³ | ãƒšãƒ¼ã‚¸ | èª¬æ˜ |
|---------|--------|------|
| ğŸ  | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | ç¾åœ¨ã®çŠ¶æ…‹ä¸€è¦§ã€ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
| âœï¸ | ã‚¨ãƒ‡ã‚£ã‚¿ | Spec-Kit YAMLã®ç·¨é›† |
| ğŸ“„ | ãƒ“ãƒ¥ãƒ¼ã‚¢ | ç”Ÿæˆã—ãŸã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®é–²è¦§ |
| ğŸ“œ | å±¥æ­´ | å¤‰æ›´å±¥æ­´ï¼ˆãƒ‘ãƒƒãƒï¼‰ã®ç®¡ç† |
| âš™ï¸ | è¨­å®š | APIè¨­å®šã€ãƒ‡ãƒ¼ã‚¿ç®¡ç† |

### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼

ç”»é¢ä¸‹éƒ¨ã«è¡¨ç¤ºã•ã‚Œã€ä»¥ä¸‹ã®æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ï¼š
- **æ¥ç¶šçŠ¶æ…‹**: Aether Consoleã¨ã®æ¥ç¶šçŠ¶æ³
- **Specs**: å®šç¾©æ¸ˆã¿ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•°
- **Artifacts**: ç”Ÿæˆç‰©ã®æ•°
- **ç¾åœ¨æ™‚åˆ»**

---

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

### 1. ã‚¨ãƒ‡ã‚£ã‚¿ã§Spec-Kitã‚’ä½œæˆãƒ»ç·¨é›†

1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€Œã‚¨ãƒ‡ã‚£ã‚¿ã€ã‚’é¸æŠ
2. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ**ã§åŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã³ã€ŒLoad Templateã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. YAMLã‚’ç·¨é›†ã—ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã‚’å®šç¾©
4. å³å´ã®ã€ŒStructure Previewã€ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹é€ ã‚’ç¢ºèª
5. ã€ŒConstraintsã€ãƒ‘ãƒãƒ«ã§åˆ¶ç´„æ¡ä»¶ã‚’ä¸€è¦§è¡¨ç¤º

### 2. ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼ˆæˆæœç‰©ï¼‰ã‚’ç”Ÿæˆ

1. ã‚¨ãƒ‡ã‚£ã‚¿ç”»é¢ã§ã€ŒGenerate Artifactsã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ç”Ÿæˆã™ã‚‹æˆæœç‰©ã®ã‚¿ã‚¤ãƒ—ã‚’é¸æŠï¼š
   - **UI Mock**: HTMLãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—
   - **API Spec**: OpenAPIä»•æ§˜
   - **Test Case**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
   - **Use Case Diagram**: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³
3. ã€Œç”Ÿæˆé–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ˆåˆå›ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãŒå¿…è¦ï¼‰

### 3. ç”Ÿæˆç‰©ã‚’ç¢ºèª

1. ã€Œãƒ“ãƒ¥ãƒ¼ã‚¢ã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. å·¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰ç”Ÿæˆç‰©ã‚’é¸æŠ
3. **Preview**/**Code** ã§è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆ
4. ä¸è¦ãªç”Ÿæˆç‰©ã¯ã€Œå‰Šé™¤ã€ã§å‰Šé™¤

---

## ç”»é¢ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
ç¾åœ¨ã®çŠ¶æ…‹ä¸€è¦§ã¨ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼š

![ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](tutorials/dashboard.png)

### ã‚¨ãƒ‡ã‚£ã‚¿
Spec-Kit YAMLã®ç·¨é›†ç”»é¢ã€‚å³å´ã«åˆ¶ç´„ãƒ‘ãƒãƒ«ã¨é€šä¿¡å›³ï¼š

![ã‚¨ãƒ‡ã‚£ã‚¿](tutorials/editor.png)

### ãƒ“ãƒ¥ãƒ¼ã‚¢
ç”Ÿæˆã—ãŸã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®é–²è¦§ã€‚Preview/Codeåˆ‡ã‚Šæ›¿ãˆå¯èƒ½ï¼š

![ãƒ“ãƒ¥ãƒ¼ã‚¢](tutorials/viewer.png)

---

## å„æ©Ÿèƒ½ã®è©³ç´°

### ã‚¨ãƒ‡ã‚£ã‚¿æ©Ÿèƒ½

#### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ç”¨é€” |
|-------------|------|
| Default Template | æ±ç”¨çš„ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾© |
| Analyzer Agent | åˆ†æç³»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ |

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

YAMLã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¤œå‡ºã•ã‚Œã€ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

#### åˆ¶ç´„ã‚¯ãƒªãƒƒã‚¯â†’è¡Œã‚¸ãƒ£ãƒ³ãƒ—

å³å´ã®ã€ŒConstraintsã€ãƒ‘ãƒãƒ«ã§åˆ¶ç´„ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚¨ãƒ‡ã‚£ã‚¿å†…ã®è©²å½“è¡Œã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¦ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

### Communication Diagram

ã‚¨ãƒ‡ã‚£ã‚¿å³ä¸‹ã®ã€ŒCommunicationã€ã‚¿ãƒ–ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€šä¿¡é–¢ä¿‚ã‚’Mermaidå›³ã¨ã—ã¦å¯è¦–åŒ–ã§ãã¾ã™ã€‚

### å±¥æ­´ï¼ˆãƒ‘ãƒƒãƒï¼‰ç®¡ç†

ã€Œã‚³ãƒŸãƒƒãƒˆã€ãƒœã‚¿ãƒ³ã§å¤‰æ›´ã‚’ãƒ‘ãƒƒãƒã¨ã—ã¦ä¿å­˜ã§ãã¾ã™ã€‚å±¥æ­´ãƒšãƒ¼ã‚¸ã§éå»ã®å¤‰æ›´ã‚’ç¢ºèªã§ãã¾ã™ã€‚

---

## APIè¨­å®š

### Gemini API ã‚­ãƒ¼ã®è¨­å®š

1. ã€Œè¨­å®šã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. **Gemini API Key** æ¬„ã«APIã‚­ãƒ¼ã‚’å…¥åŠ›
3. **æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰** ã‚’è¨­å®šï¼ˆã“ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§APIã‚­ãƒ¼ãŒæš—å·åŒ–ã•ã‚Œã¾ã™ï¼‰
4. ã€ŒAPIã‚­ãƒ¼ã‚’ä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

> **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: APIã‚­ãƒ¼ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®LocalStorageã«æš—å·åŒ–ï¼ˆAES-GCMï¼‰ã•ã‚ŒãŸçŠ¶æ…‹ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã«ã¯é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚

### ãƒ¢ãƒ‡ãƒ«é¸æŠ

APIã‚­ãƒ¼ä¿å­˜å¾Œã€ã€Œãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’æ›´æ–°ã€ã§Geminiã®åˆ©ç”¨å¯èƒ½ãƒ¢ãƒ‡ãƒ«ã‚’å–å¾—ã§ãã¾ã™ã€‚

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã€Œç”Ÿæˆé–‹å§‹ã€ãŒåå¿œã—ãªã„

- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æœªå…¥åŠ›**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã”ã¨ã«æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ãŒå¿…è¦ã§ã™
- **APIã‚­ãƒ¼æœªè¨­å®š**: è¨­å®šãƒšãƒ¼ã‚¸ã§APIã‚­ãƒ¼ã‚’ä¿å­˜ã—ã¦ãã ã•ã„

### ãƒ“ãƒ¥ãƒ¼ã‚¢ã«ç”Ÿæˆç‰©ãŒè¡¨ç¤ºã•ã‚Œãªã„

- ã‚¨ãƒ‡ã‚£ã‚¿ãƒšãƒ¼ã‚¸ã§ç”Ÿæˆå¾Œã€ãƒ“ãƒ¥ãƒ¼ã‚¢ã«ç§»å‹•ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„
- ç”Ÿæˆç‰©ã¯localStorageã«è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã™

### æ¥ç¶šçŠ¶æ…‹ãŒã€ŒDisconnectedã€

- Aether Consoleã¨ã®é€£æºã«ã¯åˆ¥é€”Aether Consoleã®èµ·å‹•ãŒå¿…è¦ã§ã™
- å˜ä½“åˆ©ç”¨ã®å ´åˆã¯ã€ŒDisconnectedã€ã®ã¾ã¾ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“

---

## ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

| æ“ä½œ | èª¬æ˜ |
|------|------|
| ã‚¨ãƒ‡ã‚£ã‚¿å†… Ctrl+Z | å…ƒã«æˆ»ã™ |
| ã‚¨ãƒ‡ã‚£ã‚¿å†… Ctrl+Shift+Z | ã‚„ã‚Šç›´ã™ |
| â†¶ / â†· ãƒœã‚¿ãƒ³ | Undo/Redoï¼ˆSpecå˜ä½ï¼‰ |

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: SvelteKit + Svelte 5 (Runes)
- **ã‚¨ãƒ‡ã‚£ã‚¿**: CodeMirror 6
- **å›³è¡¨**: Mermaid
- **AI**: Google Gemini API
- **æš—å·åŒ–**: Web Crypto API (AES-GCM)
</file>

<file path="src/lib/assets/favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="107" height="128" viewBox="0 0 107 128"><title>svelte-logo</title><path d="M94.157 22.819c-10.4-14.885-30.94-19.297-45.792-9.835L22.282 29.608A29.92 29.92 0 0 0 8.764 49.65a31.5 31.5 0 0 0 3.108 20.231 30 30 0 0 0-4.477 11.183 31.9 31.9 0 0 0 5.448 24.116c10.402 14.887 30.942 19.297 45.791 9.835l26.083-16.624A29.92 29.92 0 0 0 98.235 78.35a31.53 31.53 0 0 0-3.105-20.232 30 30 0 0 0 4.474-11.182 31.88 31.88 0 0 0-5.447-24.116" style="fill:#ff3e00"/><path d="M45.817 106.582a20.72 20.72 0 0 1-22.237-8.243 19.17 19.17 0 0 1-3.277-14.503 18 18 0 0 1 .624-2.435l.49-1.498 1.337.981a33.6 33.6 0 0 0 10.203 5.098l.97.294-.09.968a5.85 5.85 0 0 0 1.052 3.878 6.24 6.24 0 0 0 6.695 2.485 5.8 5.8 0 0 0 1.603-.704L69.27 76.28a5.43 5.43 0 0 0 2.45-3.631 5.8 5.8 0 0 0-.987-4.371 6.24 6.24 0 0 0-6.698-2.487 5.7 5.7 0 0 0-1.6.704l-9.953 6.345a19 19 0 0 1-5.296 2.326 20.72 20.72 0 0 1-22.237-8.243 19.17 19.17 0 0 1-3.277-14.502 17.99 17.99 0 0 1 8.13-12.052l26.081-16.623a19 19 0 0 1 5.3-2.329 20.72 20.72 0 0 1 22.237 8.243 19.17 19.17 0 0 1 3.277 14.503 18 18 0 0 1-.624 2.435l-.49 1.498-1.337-.98a33.6 33.6 0 0 0-10.203-5.1l-.97-.294.09-.968a5.86 5.86 0 0 0-1.052-3.878 6.24 6.24 0 0 0-6.696-2.485 5.8 5.8 0 0 0-1.602.704L37.73 51.72a5.42 5.42 0 0 0-2.449 3.63 5.79 5.79 0 0 0 .986 4.372 6.24 6.24 0 0 0 6.698 2.486 5.8 5.8 0 0 0 1.602-.704l9.952-6.342a19 19 0 0 1 5.295-2.328 20.72 20.72 0 0 1 22.237 8.242 19.17 19.17 0 0 1 3.277 14.503 18 18 0 0 1-8.13 12.053l-26.081 16.622a19 19 0 0 1-5.3 2.328" style="fill:#fff"/></svg>
</file>

<file path="src/lib/components/editor/index.ts">
export { default as SpecEditor } from './SpecEditor.svelte';
export { default as ConstraintPanel } from './ConstraintPanel.svelte';
</file>

<file path="src/lib/components/ui/Panel.svelte">
<!--
  Panel Component
  SFé¢¨ã®ãƒ‘ãƒãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
-->
<script lang="ts">
	interface Props {
		title?: string;
		variant?: 'default' | 'accent' | 'success' | 'warning' | 'error';
		glow?: boolean;
		class?: string;
		children?: import('svelte').Snippet;
		header?: import('svelte').Snippet;
	}

	let { title, variant = 'default', glow = false, class: className = '', children, header }: Props = $props();

	const variantColors = {
		default: 'var(--color-accent-primary)',
		accent: 'var(--color-accent-secondary)',
		success: 'var(--color-accent-success)',
		warning: 'var(--color-accent-warning)',
		error: 'var(--color-accent-error)'
	};
</script>

<div
	class="panel {className}"
	class:panel--glow={glow}
	style="--panel-accent: {variantColors[variant]}"
>
	{#if title || header}
		<div class="panel__header">
			{#if header}
				{@render header()}
			{:else if title}
				<h3 class="panel__title">{title}</h3>
			{/if}
		</div>
	{/if}
	<div class="panel__content">
		{#if children}
			{@render children()}
		{/if}
	</div>
</div>

<style>
	.panel {
		background: var(--gradient-panel);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-lg);
		overflow: hidden;
		transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
	}

	.panel:hover {
		border-color: var(--panel-accent);
	}

	.panel--glow {
		box-shadow: var(--shadow-glow);
	}

	.panel--glow:hover {
		box-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
	}

	.panel__header {
		padding: var(--space-4) var(--space-5);
		border-bottom: 1px solid var(--color-border-secondary);
		background: rgba(0, 0, 0, 0.2);
	}

	.panel__title {
		font-size: var(--font-size-sm);
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--panel-accent);
		margin: 0;
	}

	.panel__content {
		padding: var(--space-5);
	}
</style>
</file>

<file path="src/lib/components/ui/StatusIndicator.svelte">
<!--
  StatusIndicator Component
  æ¥ç¶šçŠ¶æ…‹ãªã©ã‚’ç¤ºã™ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
-->
<script lang="ts">
	interface Props {
		status: 'success' | 'warning' | 'error' | 'info' | 'offline';
		label?: string;
		pulse?: boolean;
		size?: 'sm' | 'md' | 'lg';
	}

	let { status, label, pulse = false, size = 'md' }: Props = $props();

	const statusColors = {
		success: 'var(--color-accent-success)',
		warning: 'var(--color-accent-warning)',
		error: 'var(--color-accent-error)',
		info: 'var(--color-accent-primary)',
		offline: 'var(--color-text-muted)'
	};

	const statusLabels = {
		success: 'æ¥ç¶šä¸­',
		warning: 'è­¦å‘Š',
		error: 'ã‚¨ãƒ©ãƒ¼',
		info: 'æƒ…å ±',
		offline: 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'
	};
</script>

<div class="status status--{size}" style="--status-color: {statusColors[status]}">
	<span class="status__dot" class:status__dot--pulse={pulse}></span>
	{#if label !== undefined}
		<span class="status__label">{label}</span>
	{:else}
		<span class="status__label">{statusLabels[status]}</span>
	{/if}
</div>

<style>
	.status {
		display: inline-flex;
		align-items: center;
		gap: var(--space-2);
	}

	.status__dot {
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background-color: var(--status-color);
		flex-shrink: 0;
	}

	.status--sm .status__dot {
		width: 6px;
		height: 6px;
	}

	.status--lg .status__dot {
		width: 10px;
		height: 10px;
	}

	.status__dot--pulse {
		animation: pulse-glow 2s ease-in-out infinite;
		box-shadow: 0 0 8px var(--status-color);
	}

	.status__label {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
	}

	.status--sm .status__label {
		font-size: var(--font-size-xs);
	}

	.status--lg .status__label {
		font-size: var(--font-size-base);
	}

	@keyframes pulse-glow {
		0%, 100% {
			opacity: 1;
			box-shadow: 0 0 4px var(--status-color);
		}
		50% {
			opacity: 0.6;
			box-shadow: 0 0 12px var(--status-color);
		}
	}
</style>
</file>

<file path="src/lib/components/ui/VirtualList.svelte">
<!--
  VirtualList Component
  ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æä¾›ã™ã‚‹æ±ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  å¤§é‡ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’åŠ¹ç‡çš„ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
-->
<script lang="ts" generics="T">
	import { onMount } from 'svelte';

	interface Props {
		items: T[];
		itemHeight: number;
		containerHeight?: number;
		overscan?: number;
		children: (item: T, index: number) => any;
	}

	let { items, itemHeight, containerHeight = 400, overscan = 3, children }: Props = $props();

	let scrollContainer: HTMLElement;
	let scrollTop = $state(0);

	// è¡¨ç¤ºç¯„å›²ã‚’è¨ˆç®—
	const visibleItems = $derived.by(() => {
		const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);
		const visibleCount = Math.ceil(containerHeight / itemHeight) + 2 * overscan;
		const endIndex = Math.min(items.length, startIndex + visibleCount);

		return items.slice(startIndex, endIndex).map((item, i) => ({
			item,
			index: startIndex + i,
			style: `position: absolute; top: ${(startIndex + i) * itemHeight}px; width: 100%;`
		}));
	});

	// å…¨ä½“ã®é«˜ã•
	const totalHeight = $derived(items.length * itemHeight);

	function handleScroll(event: Event) {
		const target = event.target as HTMLElement;
		scrollTop = target.scrollTop;
	}

	onMount(() => {
		if (scrollContainer) {
			scrollTop = scrollContainer.scrollTop;
		}
	});
</script>

<div
	class="virtual-list-container"
	bind:this={scrollContainer}
	onscroll={handleScroll}
	style="height: {containerHeight}px;"
>
	<div class="virtual-list-inner" style="height: {totalHeight}px;">
		{#each visibleItems as { item, index, style } (index)}
			<div class="virtual-list-item" {style}>
				{@render children(item, index)}
			</div>
		{/each}
	</div>
</div>

<style>
	.virtual-list-container {
		overflow-y: auto;
		position: relative;
	}

	.virtual-list-inner {
		position: relative;
	}

	.virtual-list-item {
		box-sizing: border-box;
	}
</style>
</file>

<file path="src/lib/domain/index.ts">
/**
 * Domain Layer Index
 *
 * ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
 */
export * from './spec-engine';
</file>

<file path="src/lib/domain/spec-engine.ts">
/**
 * Spec Engine
 *
 * Spec-Kité–¢é€£ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’é›†ç´„
 * ã‚¹ãƒˆã‚¢ã‹ã‚‰åˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢ã—ã€å†åˆ©ç”¨æ€§ã¨ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’å‘ä¸Š
 */
import type { AgentSpec, SpecPatch, SpecDiff } from '$lib/types';
import {
    validateSpecKitFully,
    type ValidationResult,
    type ValidationWarning
} from '$lib/utils/spec-kit-schema';

// ========================================
// Spec ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
// ========================================

/**
 * è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
 */
export function validateSpecs(specs: AgentSpec[]): ValidationResult {
    return validateSpecKitFully({ agents: specs });
}

/**
 * å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
 */
export function validateSingleSpec(spec: AgentSpec): ValidationResult {
    return validateSpecKitFully({ agents: [spec] });
}

// ========================================
// Spec åˆ†æ
// ========================================

/**
 * ã™ã¹ã¦ã®constraintsã‚’æŠ½å‡º
 */
export function extractAllConstraints(specs: AgentSpec[]): string[] {
    return specs.flatMap(spec => spec.constraints || []);
}

/**
 * ã™ã¹ã¦ã®capabilitiesã‚’æŠ½å‡º
 */
export function extractAllCapabilities(specs: AgentSpec[]): string[] {
    return specs.flatMap(spec => spec.capabilities || []);
}

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€šä¿¡ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰
 */
export interface CommunicationEdge {
    from: string;
    to: string;
}

export function buildCommunicationGraph(specs: AgentSpec[]): CommunicationEdge[] {
    const edges: CommunicationEdge[] = [];

    for (const spec of specs) {
        for (const target of spec.communication?.canSendTo || []) {
            edges.push({ from: spec.name, to: target });
        }
    }

    return edges;
}

/**
 * å­¤ç«‹ã—ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆé€šä¿¡ã®ãªã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰ã‚’æ¤œå‡º
 */
export function findIsolatedAgents(specs: AgentSpec[]): string[] {
    const connectedAgents = new Set<string>();

    for (const spec of specs) {
        const canSend = spec.communication?.canSendTo || [];
        const canReceive = spec.communication?.canReceiveFrom || [];

        if (canSend.length > 0 || canReceive.length > 0) {
            connectedAgents.add(spec.name);
            canSend.forEach(name => connectedAgents.add(name));
            canReceive.forEach(name => connectedAgents.add(name));
        }
    }

    return specs
        .filter(spec => !connectedAgents.has(spec.name))
        .map(spec => spec.name);
}

// ========================================
// Patch è©•ä¾¡
// ========================================

/**
 * ãƒ‘ãƒƒãƒã®å½±éŸ¿åº¦ã‚’è©•ä¾¡
 */
export function evaluatePatchImpact(patch: SpecPatch): 'low' | 'medium' | 'high' {
    const diffs = patch.spec.diffs;

    // é«˜å½±éŸ¿: constraintså¤‰æ›´ã€è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¤‰æ›´
    const hasConstraintChange = diffs.some(d => d.path.includes('constraints'));
    const uniqueAgents = new Set(diffs.map(d => d.agentName));

    if (hasConstraintChange) return 'high';
    if (uniqueAgents.size > 2) return 'high';
    if (diffs.some(d => d.impact === 'high')) return 'high';

    // ä¸­å½±éŸ¿: roleå¤‰æ›´ã€capabilityå¤‰æ›´
    const hasRoleChange = diffs.some(d => d.path.includes('role'));
    const hasCapabilityChange = diffs.some(d => d.path.includes('capabilities'));

    if (hasRoleChange || hasCapabilityChange) return 'medium';
    if (uniqueAgents.size > 1) return 'medium';

    return 'low';
}

/**
 * ãƒ‘ãƒƒãƒã®ã‚µãƒãƒªãƒ¼ã‚’è‡ªå‹•ç”Ÿæˆ
 */
export function generatePatchSummary(diffs: SpecDiff[]): string {
    if (diffs.length === 0) return 'å¤‰æ›´ãªã—';

    const operations = {
        add: diffs.filter(d => d.operation === 'add').length,
        modify: diffs.filter(d => d.operation === 'modify').length,
        remove: diffs.filter(d => d.operation === 'remove').length
    };

    const parts: string[] = [];
    if (operations.add > 0) parts.push(`${operations.add}ä»¶è¿½åŠ `);
    if (operations.modify > 0) parts.push(`${operations.modify}ä»¶å¤‰æ›´`);
    if (operations.remove > 0) parts.push(`${operations.remove}ä»¶å‰Šé™¤`);

    const affectedAgents = [...new Set(diffs.map(d => d.agentName))];
    const agentText = affectedAgents.length <= 2
        ? affectedAgents.join(', ')
        : `${affectedAgents.slice(0, 2).join(', ')} ä»–${affectedAgents.length - 2}ä»¶`;

    return `${agentText}: ${parts.join(', ')}`;
}
</file>

<file path="src/lib/server/csrf.ts">
/**
 * CSRF Protection Utilities
 *
 * Double-Submit Cookieæ–¹å¼ã§CSRFå¯¾ç­–ã‚’å®Ÿè£…
 * - ã‚µãƒ¼ãƒãƒ¼: CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’Cookieã«ã‚»ãƒƒãƒˆ
 * - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«Cookieã®å€¤ã‚’ãƒ˜ãƒƒãƒ€ãƒ¼ã«å«ã‚ã‚‹
 * - ã‚µãƒ¼ãƒãƒ¼: Cookieã¨ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’Revalidate
 */

const CSRF_COOKIE_NAME = 'csrf-token';
const CSRF_HEADER_NAME = 'x-csrf-token';

/**
 * CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆ
 */
export function generateCsrfToken(): string {
    const array = new Uint8Array(32);
    crypto.getRandomValues(array);
    return Array.from(array, (b) => b.toString(16).padStart(2, '0')).join('');
}

/**
 * ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¤œè¨¼
 * Cookie ã¨ Header ã®å€¤ãŒä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
 */
export function validateCsrfToken(request: Request): boolean {
    const cookieHeader = request.headers.get('cookie');
    const csrfHeader = request.headers.get(CSRF_HEADER_NAME);

    if (!cookieHeader || !csrfHeader) {
        return false;
    }

    // Cookieã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æŠ½å‡º
    const cookies = parseCookies(cookieHeader);
    const cookieToken = cookies[CSRF_COOKIE_NAME];

    if (!cookieToken) {
        return false;
    }

    // Timing-safe comparison
    return timingSafeEqual(cookieToken, csrfHeader);
}

/**
 * Cookieæ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹
 */
function parseCookies(cookieHeader: string): Record<string, string> {
    const cookies: Record<string, string> = {};
    for (const cookie of cookieHeader.split(';')) {
        const [name, ...rest] = cookie.trim().split('=');
        if (name && rest.length > 0) {
            cookies[name] = rest.join('=');
        }
    }
    return cookies;
}

/**
 * Timing-safe æ–‡å­—åˆ—æ¯”è¼ƒ
 */
function timingSafeEqual(a: string, b: string): boolean {
    if (a.length !== b.length) {
        return false;
    }

    let result = 0;
    for (let i = 0; i < a.length; i++) {
        result |= a.charCodeAt(i) ^ b.charCodeAt(i);
    }
    return result === 0;
}

/**
 * CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’Set-Cookieå½¢å¼ã§è¿”ã™
 */
export function createCsrfCookie(token: string): string {
    return `${CSRF_COOKIE_NAME}=${token}; Path=/; HttpOnly=false; SameSite=Strict; Secure`;
}

/**
 * CSRFãƒ˜ãƒƒãƒ€ãƒ¼åã‚’å–å¾—
 */
export function getCsrfHeaderName(): string {
    return CSRF_HEADER_NAME;
}

/**
 * CSRF Cookieåã‚’å–å¾—
 */
export function getCsrfCookieName(): string {
    return CSRF_COOKIE_NAME;
}
</file>

<file path="src/lib/server/gemini-proxy.ts">
/**
 * Gemini Proxy Configuration
 *
 * ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰ã§ã®Gemini APIè¨­å®š
 * æœ¬ç•ªç’°å¢ƒã§ã¯ã‚µãƒ¼ãƒãƒ¼å´ã§APIã‚­ãƒ¼ã‚’ç®¡ç†
 */

/**
 * ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰ã‹ã©ã†ã‹ã‚’åˆ¤å®š
 * GEMINI_API_KEYç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰
 */
export function isProxyMode(): boolean {
    return !!import.meta.env.GEMINI_API_KEY || !!process.env.GEMINI_API_KEY;
}

/**
 * ã‚µãƒ¼ãƒãƒ¼è¨­å®šã®APIã‚­ãƒ¼ã‚’å–å¾—
 * ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆã¯nullã‚’è¿”ã™
 */
export function getServerApiKey(): string | null {
    return import.meta.env.GEMINI_API_KEY || process.env.GEMINI_API_KEY || null;
}

/**
 * ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰ã®è¨­å®š
 */
export interface ProxyConfig {
    enabled: boolean;
    rateLimit: {
        maxRequestsPerMinute: number;
        maxTokensPerDay: number;
    };
    allowedOrigins: string[];
}

/**
 * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ—ãƒ­ã‚­ã‚·è¨­å®š
 */
export const defaultProxyConfig: ProxyConfig = {
    enabled: false,
    rateLimit: {
        maxRequestsPerMinute: 10,
        maxTokensPerDay: 100000
    },
    allowedOrigins: [
        'http://localhost:3001',
        'http://localhost:5173'
    ]
};

/**
 * ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã¿
 */
export function loadProxyConfig(): ProxyConfig {
    const serverKey = getServerApiKey();

    return {
        enabled: !!serverKey,
        rateLimit: {
            maxRequestsPerMinute: parseInt(process.env.RATE_LIMIT_RPM || '10', 10),
            maxTokensPerDay: parseInt(process.env.RATE_LIMIT_TOKENS || '100000', 10)
        },
        allowedOrigins: process.env.ALLOWED_ORIGINS
            ? process.env.ALLOWED_ORIGINS.split(',')
            : defaultProxyConfig.allowedOrigins
    };
}
</file>

<file path="src/lib/server/gemini.ts">
/**
 * Gemini API Server Service
 *
 * Google Gemini API ã¨ã®é€šä¿¡ã‚’æ‹…å½“ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
 * ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«APIã‚­ãƒ¼ã¨è¨­å®šã‚’å—ã‘å–ã‚Šã€ç”Ÿæˆã‚’å®Ÿè¡Œã™ã‚‹
 */
import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from '@google/generative-ai';

interface GenerateOptions {
    apiKey: string;
    modelName: string;
    prompt: string;
    temperature?: number;
}

export async function generateContent({ apiKey, modelName, prompt, temperature = 0.7 }: GenerateOptions) {
    try {
        const genAI = new GoogleGenerativeAI(apiKey);
        const model = genAI.getGenerativeModel({
            model: modelName,
            safetySettings: [
                {
                    category: HarmCategory.HARM_CATEGORY_HARASSMENT,
                    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
                },
                {
                    category: HarmCategory.HARM_CATEGORY_HATE_SPEECH,
                    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
                },
                {
                    category: HarmCategory.HARM_CATEGORY_SEXUALLY_EXPLICIT,
                    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
                },
                {
                    category: HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT,
                    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
                },
            ],
            generationConfig: {
                temperature,
            }
        });

        const result = await model.generateContent(prompt);
        const response = await result.response;
        return response.text();
    } catch (error) {
        console.error('Gemini Generate Error:', error);
        throw error;
    }
}

// ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œç‰ˆ (Phase 3.5ã§æœ¬æ ¼åˆ©ç”¨)
export async function generateContentStream({ apiKey, modelName, prompt, temperature = 0.7 }: GenerateOptions) {
    try {
        const genAI = new GoogleGenerativeAI(apiKey);
        const model = genAI.getGenerativeModel({ model: modelName });

        const result = await model.generateContentStream(prompt);
        return result.stream;
    } catch (error) {
        console.error('Gemini Stream Error:', error);
        throw error;
    }
}

interface ModelInfo {
    name: string; // models/gemini-pro
    displayName: string;
    description: string;
    supportedGenerationMethods: string[];
}

// ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’å–å¾— (SDKã«æ©Ÿèƒ½ãŒãªã„å ´åˆãŒã‚ã‚‹ãŸã‚REST APIã‚’ä½¿ç”¨)
export async function listModels(apiKey: string): Promise<ModelInfo[]> {
    try {
        // APIã‚­ãƒ¼ã‚’ä½¿ã£ã¦ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’å–å¾—
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`);

        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Failed to fetch models: ${response.status} ${response.statusText} - ${errorText}`);
        }

        const data = await response.json();

        // generateContentã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        return (data.models || []).filter((m: any) =>
            m.supportedGenerationMethods && m.supportedGenerationMethods.includes('generateContent')
        ).map((m: any) => ({
            name: m.name.replace('models/', ''), // "models/" ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’é™¤å»
            displayName: m.displayName,
            description: m.description,
            supportedGenerationMethods: m.supportedGenerationMethods
        }));
    } catch (error) {
        console.error('Gemini List Models Error:', error);
        throw error;
    }
}
</file>

<file path="src/lib/services/websocket.ts">
/**
 * WebSocket Service
 *
 * Aether Console ã¨ã® WebSocket é€šä¿¡ã‚’ç®¡ç†
 */
import { writable, get } from 'svelte/store';
import type {
    ConnectionStatus,
    ConsoleToStudioEvent,
    StudioToConsoleEvent,
    AgentSpec,
    SpecPatch
} from '$lib/types';
import { integrationConfig, updateStatus } from '$lib/stores/integration-store';
import { specs } from '$lib/stores/spec-store';
import { historyStore, patches } from '$lib/stores/history-store';

// æ¥ç¶šçŠ¶æ…‹ã‚¹ãƒˆã‚¢
export const wsStatus = writable<ConnectionStatus>('disconnected');

// å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ãƒˆã‚¢ï¼ˆæœ€æ–°ã®ã‚‚ã®ï¼‰
export const lastReceivedEvent = writable<ConsoleToStudioEvent | null>(null);

let ws: WebSocket | null = null;
let reconnectTimer: ReturnType<typeof setTimeout> | null = null;
let reconnectAttempts = 0;
const MAX_RECONNECT_ATTEMPTS = 5;
const RECONNECT_DELAY = 3000;

/**
 * WebSocketæ¥ç¶šã‚’é–‹å§‹
 */
export function connect() {
    const config = get(integrationConfig);
    if (!config.consoleUrl) {
        console.warn('WebSocket URL is not configured');
        return;
    }

    if (ws && (ws.readyState === WebSocket.CONNECTING || ws.readyState === WebSocket.OPEN)) {
        console.log('WebSocket is already connected or connecting');
        return;
    }

    wsStatus.set('connecting');
    updateStatus('connecting');

    try {
        ws = new WebSocket(config.consoleUrl);

        ws.onopen = () => {
            console.log('WebSocket connected to Aether Console');
            wsStatus.set('connected');
            updateStatus('connected');
            reconnectAttempts = 0;
        };

        ws.onmessage = (event) => {
            try {
                const message = JSON.parse(event.data) as ConsoleToStudioEvent;
                handleMessage(message);
            } catch (e) {
                console.error('Failed to parse WebSocket message:', e);
            }
        };

        ws.onerror = (error) => {
            console.error('WebSocket error:', error);
            wsStatus.set('error');
            updateStatus('error');
        };

        ws.onclose = () => {
            console.log('WebSocket closed');
            wsStatus.set('disconnected');
            updateStatus('disconnected');
            ws = null;
            scheduleReconnect();
        };
    } catch (error) {
        console.error('Failed to create WebSocket:', error);
        wsStatus.set('error');
        updateStatus('error');
    }
}

/**
 * å†æ¥ç¶šã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
 */
function scheduleReconnect() {
    if (reconnectAttempts >= MAX_RECONNECT_ATTEMPTS) {
        console.log('Max reconnect attempts reached');
        return;
    }

    if (reconnectTimer) {
        clearTimeout(reconnectTimer);
    }

    reconnectTimer = setTimeout(() => {
        reconnectAttempts++;
        console.log(`Reconnecting... (attempt ${reconnectAttempts})`);
        connect();
    }, RECONNECT_DELAY);
}

/**
 * æ¥ç¶šã‚’åˆ‡æ–­
 */
export function disconnect() {
    if (reconnectTimer) {
        clearTimeout(reconnectTimer);
        reconnectTimer = null;
    }

    if (ws) {
        ws.close();
        ws = null;
    }

    wsStatus.set('disconnected');
    updateStatus('disconnected');
}

/**
 * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
 */
export function send(event: StudioToConsoleEvent) {
    if (!ws || ws.readyState !== WebSocket.OPEN) {
        console.warn('WebSocket is not connected');
        return false;
    }

    try {
        ws.send(JSON.stringify(event));
        return true;
    } catch (e) {
        console.error('Failed to send WebSocket message:', e);
        return false;
    }
}

/**
 * å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
 */
function handleMessage(event: ConsoleToStudioEvent) {
    lastReceivedEvent.set(event);

    switch (event.type) {
        case 'SYNC_REQUEST':
            // Consoleã‹ã‚‰ã®åŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œç­”
            const currentSpecs = get(specs);
            const currentPatches = get(patches);
            send({
                type: 'SYNC_RESPONSE',
                agents: currentSpecs,
                patches: currentPatches
            });
            break;

        case 'PATCH_APPLIED':
            // Consoleã§ãƒ‘ãƒƒãƒãŒé©ç”¨ã•ã‚ŒãŸé€šçŸ¥
            console.log('Patch applied on Console:', event.patch.metadata.name);
            // TODO: å¿…è¦ã«å¿œã˜ã¦ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã‚’æ›´æ–°
            break;

        case 'PATCH_REVERTED':
            // Consoleã§ãƒ‘ãƒƒãƒãŒãƒªãƒãƒ¼ãƒˆã•ã‚ŒãŸé€šçŸ¥
            console.log('Patch reverted on Console:', event.patchId);
            break;

        case 'AGENT_EXECUTED':
            // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œé€šçŸ¥
            console.log(`Agent ${event.agentName} executed`);
            break;

        case 'PROPOSAL_GENERATED':
            // ææ¡ˆç”Ÿæˆé€šçŸ¥
            console.log('Proposal generated:', event.proposal);
            break;

        default:
            console.log('Unknown event type:', event);
    }
}

/**
 * ãƒ‘ãƒƒãƒã‚’Consoleã«é€ä¿¡
 */
export function sendPatch(patch: SpecPatch) {
    return send({
        type: 'PATCH_CREATED',
        patch
    });
}

/**
 * Specæ›´æ–°ã‚’Consoleã«é€ä¿¡
 */
export function sendSpecUpdate(agents: AgentSpec[]) {
    return send({
        type: 'SPEC_UPDATED',
        agents
    });
}
</file>

<file path="src/lib/stores/config-store.ts">
/**
 * Config Store
 *
 * Aether Consoleé€£æºè¨­å®šã‚’ç®¡ç†
 * integration-storeã‹ã‚‰è²¬å‹™åˆ†é›¢
 */
import { writable } from 'svelte/store';
import type { IntegrationConfig } from '$lib/types';
import { DEFAULT_INTEGRATION_CONFIG } from '$lib/types';

// é€£æºè¨­å®š
export const integrationConfig = writable<IntegrationConfig>(DEFAULT_INTEGRATION_CONFIG);

/**
 * è¨­å®šã‚’æ›´æ–°
 */
export function updateConfig(updates: Partial<IntegrationConfig>) {
    integrationConfig.update((current) => ({ ...current, ...updates }));
}

/**
 * è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ
 */
export function resetConfig() {
    integrationConfig.set(DEFAULT_INTEGRATION_CONFIG);
}
</file>

<file path="src/lib/stores/connection-store.ts">
/**
 * Connection Store
 *
 * Aether Consoleã¨ã®æ¥ç¶šçŠ¶æ…‹ã‚’ç®¡ç†
 * integration-storeã‹ã‚‰è²¬å‹™åˆ†é›¢
 */
import { writable, derived } from 'svelte/store';
import type { ConnectionStatus } from '$lib/types';

// æ¥ç¶šçŠ¶æ…‹
export const connectionStatus = writable<ConnectionStatus>('disconnected');

// æ¥ç¶šä¸­ã‹ã©ã†ã‹
export const isConnected = derived(connectionStatus, ($status) => $status === 'connected');

// æ¥ç¶šä¸­ï¼ˆè©¦è¡Œä¸­ï¼‰ã‹ã©ã†ã‹
export const isConnecting = derived(connectionStatus, ($status) => $status === 'connecting');

// ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‹ã©ã†ã‹
export const hasError = derived(connectionStatus, ($status) => $status === 'error');

/**
 * æ¥ç¶šçŠ¶æ…‹ã‚’æ›´æ–°
 */
export function setConnectionStatus(status: ConnectionStatus) {
    connectionStatus.set(status);
}

// å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹
export const updateStatus = setConnectionStatus;
</file>

<file path="src/lib/stores/session-store.ts">
import { writable } from 'svelte/store';

interface SessionState {
    encryptionPassword: string | null;
}

const initialState: SessionState = {
    encryptionPassword: null
};

function createSessionStore() {
    const { subscribe, set, update } = writable<SessionState>(initialState);

    return {
        subscribe,
        setPassword: (password: string) => update((s) => ({ ...s, encryptionPassword: password })),
        clearPassword: () => update((s) => ({ ...s, encryptionPassword: null })),
        reset: () => set(initialState)
    };
}

export const session = createSessionStore();
</file>

<file path="src/lib/stores/settings-store.ts">
import { writable } from 'svelte/store';
import { saveToStorage, loadFromStorage, STORAGE_KEYS } from '$lib/utils/storage-utils';

export interface Settings {
    // Gemini API
    geminiModel: string;
    hasApiKey: boolean;
    availableModels: string[]; // åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«åã®ãƒªã‚¹ãƒˆ
}

const DEFAULT_SETTINGS: Settings = {
    geminiModel: 'gemini-2.0-flash-exp', // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    hasApiKey: false,
    availableModels: [
        'gemini-2.0-flash-exp',
        'gemini-1.5-pro',
        'gemini-1.5-flash',
        'gemini-1.0-pro'
    ] // åˆæœŸãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒªã‚¹ãƒˆ
};

function createSettingsStore() {
    const stored = loadFromStorage<Settings>(STORAGE_KEYS.SETTINGS, DEFAULT_SETTINGS);

    // ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã®äº’æ›æ€§ç¢ºä¿ï¼ˆavailableModelsãŒãªã„å ´åˆãªã©ï¼‰
    const initialValue = {
        ...DEFAULT_SETTINGS,
        ...stored,
        availableModels: stored.availableModels?.length > 0 ? stored.availableModels : DEFAULT_SETTINGS.availableModels
    };

    const { subscribe, set, update } = writable<Settings>(initialValue);

    return {
        subscribe,
        updateSettings: (newSettings: Partial<Settings>) => {
            update(current => {
                const updated = { ...current, ...newSettings };
                saveToStorage(STORAGE_KEYS.SETTINGS, updated);
                return updated;
            });
        },
        reset: () => {
            set(DEFAULT_SETTINGS);
            saveToStorage(STORAGE_KEYS.SETTINGS, DEFAULT_SETTINGS);
        }
    };
}

export const settings = createSettingsStore();
</file>

<file path="src/lib/stores/spec-store.ts">
/**
 * Spec Store
 *
 * ç¾åœ¨ç·¨é›†ä¸­ã®Spec-Kitä»•æ§˜ã‚’ç®¡ç†ã™ã‚‹ã‚¹ãƒˆã‚¢
 */
import { writable, derived } from 'svelte/store';
import type { AgentSpec } from '$lib/types';

// ç¾åœ¨ã®Specä¸€è¦§
export const specs = writable<AgentSpec[]>([]);

// ç¾åœ¨ã®Specåï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åãªã©ï¼‰
export const currentSpecName = writable<string | null>(null);

// SpecãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹
export const hasSpec = derived(specs, ($specs) => $specs.length > 0);

// Specæ•°
export const specCount = derived(specs, ($specs) => $specs.length);

/**
 * Specã‚’è¨­å®š
 */
export function setSpecs(newSpecs: AgentSpec[], name?: string) {
    specs.set(newSpecs);
    if (name) {
        currentSpecName.set(name);
    }
}

/**
 * Specã‚’ã‚¯ãƒªã‚¢
 */
export function clearSpecs() {
    specs.set([]);
    currentSpecName.set(null);
}

/**
 * å˜ä¸€ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¿½åŠ 
 */
export function addAgent(agent: AgentSpec) {
    specs.update((current) => [...current, agent]);
}

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ›´æ–°
 */
export function updateAgent(name: string, updates: Partial<AgentSpec>) {
    specs.update((current) =>
        current.map((agent) => (agent.name === name ? { ...agent, ...updates } : agent))
    );
}

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å‰Šé™¤
 */
export function removeAgent(name: string) {
    specs.update((current) => current.filter((agent) => agent.name !== name));
}
</file>

<file path="src/lib/stores/sync-patch-store.ts">
/**
 * Patch Store
 *
 * å¤–éƒ¨ã‹ã‚‰ã®ãƒ‘ãƒƒãƒï¼ˆAether ConsoleçµŒç”±ï¼‰ã‚’ç®¡ç†
 * integration-storeã‹ã‚‰è²¬å‹™åˆ†é›¢
 * 
 * æ³¨: history-storeã¯ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ­ãƒ¼ã‚«ãƒ«å±¥æ­´ã‚’ç®¡ç†
 * ã“ã¡ã‚‰ã¯Aether Consoleã‹ã‚‰ã®åŒæœŸãƒ‘ãƒƒãƒã‚’ç®¡ç†
 */
import { writable, derived } from 'svelte/store';
import type { SpecPatch } from '$lib/types';

// ãƒ‘ãƒƒãƒå±¥æ­´
export const syncPatches = writable<SpecPatch[]>([]);

// ãƒ‘ãƒƒãƒæ•°
export const syncPatchCount = derived(syncPatches, ($patches) => $patches.length);

// é©ç”¨æ¸ˆã¿ãƒ‘ãƒƒãƒ
export const appliedSyncPatches = derived(syncPatches, ($patches) =>
    $patches.filter((p) => p.spec.appliedAt !== undefined)
);

/**
 * ãƒ‘ãƒƒãƒã‚’è¿½åŠ 
 */
export function addSyncPatch(patch: SpecPatch) {
    syncPatches.update((current) => [...current, patch]);
}

/**
 * ãƒ‘ãƒƒãƒã‚’é©ç”¨æ¸ˆã¿ã«ã™ã‚‹
 */
export function applySyncPatch(patchId: string) {
    syncPatches.update((current) =>
        current.map((p) =>
            p.metadata.id === patchId
                ? { ...p, spec: { ...p.spec, appliedAt: new Date().toISOString() } }
                : p
        )
    );
}

/**
 * ãƒ‘ãƒƒãƒã‚’å‰Šé™¤
 */
export function removeSyncPatch(patchId: string) {
    syncPatches.update((current) => current.filter((p) => p.metadata.id !== patchId));
}

/**
 * å…¨ã¦ã®ãƒ‘ãƒƒãƒã‚’ã‚¯ãƒªã‚¢
 */
export function clearSyncPatches() {
    syncPatches.set([]);
}
</file>

<file path="src/lib/utils/crypto-utils.ts">
/**
 * Crypto Utils
 *
 * Web Crypto API ã‚’ä½¿ç”¨ã—ãŸAES-GCMæš—å·åŒ–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 */

const ALGORITHM = 'AES-GCM';
const KEY_LENGTH = 256;
const SALT_LENGTH = 16;
const IV_LENGTH = 12;
const ITERATIONS = 100000;

/**
 * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰æš—å·åŒ–ã‚­ãƒ¼ã‚’ç”Ÿæˆï¼ˆPBKDF2ï¼‰
 */
async function deriveKey(password: string, salt: Uint8Array): Promise<CryptoKey> {
    const enc = new TextEncoder();
    const keyMaterial = await window.crypto.subtle.importKey(
        'raw',
        enc.encode(password),
        'PBKDF2',
        false,
        ['deriveKey']
    );

    return window.crypto.subtle.deriveKey(
        {
            name: 'PBKDF2',
            salt,
            iterations: ITERATIONS,
            hash: 'SHA-256'
        },
        keyMaterial,
        { name: ALGORITHM, length: KEY_LENGTH },
        false,
        ['encrypt', 'decrypt']
    );
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–
 * @returns {salt, iv, data} Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—
 */
export async function encryptData(text: string, password: string): Promise<string> {
    const salt = window.crypto.getRandomValues(new Uint8Array(SALT_LENGTH));
    const iv = window.crypto.getRandomValues(new Uint8Array(IV_LENGTH));
    const key = await deriveKey(password, salt);
    const enc = new TextEncoder();

    const encrypted = await window.crypto.subtle.encrypt(
        { name: ALGORITHM, iv },
        key,
        enc.encode(text)
    );

    // salt + iv + encrypted data ã‚’çµåˆã—ã¦Base64åŒ–
    const combined = new Uint8Array(salt.length + iv.length + encrypted.byteLength);
    combined.set(salt, 0);
    combined.set(iv, salt.length);
    combined.set(new Uint8Array(encrypted), salt.length + iv.length);

    return btoa(String.fromCharCode(...combined));
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å·åŒ–
 */
export async function decryptData(encryptedBase64: string, password: string): Promise<string> {
    try {
        const combined = new Uint8Array(
            atob(encryptedBase64)
                .split('')
                .map((c) => c.charCodeAt(0))
        );

        const salt = combined.slice(0, SALT_LENGTH);
        const iv = combined.slice(SALT_LENGTH, SALT_LENGTH + IV_LENGTH);
        const data = combined.slice(SALT_LENGTH + IV_LENGTH);

        const key = await deriveKey(password, salt);

        const decrypted = await window.crypto.subtle.decrypt(
            { name: ALGORITHM, iv },
            key,
            data
        );

        return new TextDecoder().decode(decrypted);
    } catch (error) {
        console.error('Decryption failed:', error);
        throw new Error('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã€ãƒ‡ãƒ¼ã‚¿ãŒç ´æã—ã¦ã„ã¾ã™');
    }
}

/**
 * APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒãƒƒã‚·ãƒ¥ç”Ÿæˆ
 */
export async function hashKey(text: string): Promise<string> {
    const enc = new TextEncoder();
    const hash = await window.crypto.subtle.digest('SHA-256', enc.encode(text));
    return btoa(String.fromCharCode(...new Uint8Array(hash)));
}
</file>

<file path="src/lib/utils/csrf-client.ts">
/**
 * CSRF Client Utilities
 *
 * ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ãƒ»ç®¡ç†ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 */

let csrfToken: string | null = null;
let csrfHeaderName: string = 'x-csrf-token';

/**
 * CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
 */
export async function getCsrfToken(): Promise<string> {
    if (csrfToken) {
        return csrfToken;
    }

    const response = await fetch('/api/csrf');
    if (!response.ok) {
        throw new Error('Failed to fetch CSRF token');
    }

    const data = await response.json();
    csrfToken = data.token;
    csrfHeaderName = data.headerName;

    return csrfToken as string;
}

/**
 * CSRFä¿è­·ä»˜ãã§fetchã‚’å®Ÿè¡Œ
 */
export async function csrfFetch(
    url: string,
    options: RequestInit = {}
): Promise<Response> {
    const token = await getCsrfToken();

    const headers = new Headers(options.headers);
    headers.set(csrfHeaderName, token);

    return fetch(url, {
        ...options,
        headers,
        credentials: 'same-origin' // Cookieã‚’å«ã‚ã‚‹
    });
}

/**
 * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚¯ãƒªã‚¢ï¼ˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ãªã©ï¼‰
 */
export function clearCsrfToken(): void {
    csrfToken = null;
}
</file>

<file path="src/lib/utils/diff-utils.ts">
/**
 * Diff Utils
 *
 * Spec-Kitã®å·®åˆ†æ¤œå‡ºã¨ãƒ‘ãƒƒãƒç”Ÿæˆãƒ»é©ç”¨ãƒ­ã‚¸ãƒƒã‚¯
 */
import type { AgentSpec, SpecDiff, SpecPatch } from '$lib/types';

/**
 * 2ã¤ã®AgentSpecé…åˆ—ã‚’æ¯”è¼ƒã—ã€å·®åˆ†ã‚’æ¤œå‡ºã—ã¦SpecPatchã‚’ç”Ÿæˆ
 */
export function generateSpecPatch(
    before: AgentSpec[],
    after: AgentSpec[],
    options?: { name?: string; author?: 'human' | 'ai' | 'system' }
): SpecPatch {
    const diffs: SpecDiff[] = [];
    const beforeMap = new Map(before.map((s) => [s.name, s]));
    const afterMap = new Map(after.map((s) => [s.name, s]));

    // å‰Šé™¤ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    for (const [name, spec] of beforeMap) {
        if (!afterMap.has(name)) {
            diffs.push({
                id: `diff-${crypto.randomUUID().slice(0, 8)}`,
                agentName: name,
                operation: 'remove',
                path: 'agent',
                before: spec,
                after: undefined,
                impact: 'high'
            });
        }
    }

    // è¿½åŠ ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    for (const [name, spec] of afterMap) {
        if (!beforeMap.has(name)) {
            diffs.push({
                id: `diff-${crypto.randomUUID().slice(0, 8)}`,
                agentName: name,
                operation: 'add',
                path: 'agent',
                before: undefined,
                after: spec,
                impact: 'high'
            });
        }
    }

    // å¤‰æ›´ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    for (const [name, afterSpec] of afterMap) {
        const beforeSpec = beforeMap.get(name);
        if (beforeSpec) {
            const fieldDiffs = detectFieldChanges(name, beforeSpec, afterSpec);
            diffs.push(...fieldDiffs);
        }
    }

    // è‡ªç„¶è¨€èªã‚µãƒãƒªãƒ¼ã®ç”Ÿæˆ
    const summary = generateSummary(diffs);

    return {
        kind: 'SpecPatch',
        version: 'v1',
        metadata: {
            id: `patch-${crypto.randomUUID().slice(0, 8)}`,
            name: options?.name || summary.slice(0, 50),
            createdAt: new Date().toISOString(),
            author: options?.author || 'human'
        },
        spec: {
            diffs,
            summary
        }
    };
}

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå†…ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¤‰æ›´ã‚’æ¤œå‡º
 */
function detectFieldChanges(agentName: string, before: AgentSpec, after: AgentSpec): SpecDiff[] {
    const diffs: SpecDiff[] = [];

    // role
    if (before.role !== after.role) {
        diffs.push(createDiff(agentName, 'spec.role', before.role, after.role, 'medium'));
    }

    // displayName
    if (before.displayName !== after.displayName) {
        diffs.push(createDiff(agentName, 'spec.displayName', before.displayName, after.displayName, 'low'));
    }

    // constraints (é…åˆ—æ¯”è¼ƒ)
    const constraintDiffs = detectArrayChanges(
        agentName,
        'spec.constraints',
        before.constraints,
        after.constraints,
        'medium' // åˆ¶ç´„å¤‰æ›´ã¯ä¸­ç¨‹åº¦ã®å½±éŸ¿
    );
    diffs.push(...constraintDiffs);

    // capabilities (é…åˆ—æ¯”è¼ƒ)
    const capabilityDiffs = detectArrayChanges(
        agentName,
        'spec.capabilities',
        before.capabilities,
        after.capabilities,
        'low'
    );
    diffs.push(...capabilityDiffs);

    // communication.canSendTo
    const sendToDiffs = detectArrayChanges(
        agentName,
        'spec.communication.canSendTo',
        before.communication.canSendTo,
        after.communication.canSendTo,
        'medium'
    );
    diffs.push(...sendToDiffs);

    // communication.canReceiveFrom
    const receiveFromDiffs = detectArrayChanges(
        agentName,
        'spec.communication.canReceiveFrom',
        before.communication.canReceiveFrom,
        after.communication.canReceiveFrom,
        'medium'
    );
    diffs.push(...receiveFromDiffs);

    return diffs;
}

/**
 * é…åˆ—ã®å¤‰æ›´ã‚’æ¤œå‡º
 */
function detectArrayChanges(
    agentName: string,
    basePath: string,
    before: string[],
    after: string[],
    defaultImpact: 'low' | 'medium' | 'high'
): SpecDiff[] {
    const diffs: SpecDiff[] = [];
    const beforeSet = new Set(before);
    const afterSet = new Set(after);

    // å‰Šé™¤ã•ã‚ŒãŸè¦ç´ 
    for (const item of before) {
        if (!afterSet.has(item)) {
            diffs.push(createDiff(agentName, `${basePath}[]`, item, undefined, defaultImpact, 'remove'));
        }
    }

    // è¿½åŠ ã•ã‚ŒãŸè¦ç´ 
    for (const item of after) {
        if (!beforeSet.has(item)) {
            diffs.push(createDiff(agentName, `${basePath}[]`, undefined, item, defaultImpact, 'add'));
        }
    }

    return diffs;
}

/**
 * SpecDiffã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
 */
function createDiff(
    agentName: string,
    path: string,
    before: unknown,
    after: unknown,
    impact: 'low' | 'medium' | 'high',
    operation?: 'add' | 'remove' | 'modify'
): SpecDiff {
    let op: 'add' | 'remove' | 'modify' = operation || 'modify';
    if (!operation) {
        if (before === undefined) op = 'add';
        else if (after === undefined) op = 'remove';
        else op = 'modify';
    }

    return {
        id: `diff-${crypto.randomUUID().slice(0, 8)}`,
        agentName,
        operation: op,
        path,
        before,
        after,
        impact
    };
}

/**
 * å·®åˆ†ã‹ã‚‰è‡ªç„¶è¨€èªã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆ
 */
function generateSummary(diffs: SpecDiff[]): string {
    if (diffs.length === 0) return 'å¤‰æ›´ãªã—';

    const parts: string[] = [];
    const agentAdded = diffs.filter((d) => d.path === 'agent' && d.operation === 'add');
    const agentRemoved = diffs.filter((d) => d.path === 'agent' && d.operation === 'remove');
    const fieldChanges = diffs.filter((d) => d.path !== 'agent');

    if (agentAdded.length > 0) {
        parts.push(`${agentAdded.map((d) => d.agentName).join(', ')} ã‚’è¿½åŠ `);
    }
    if (agentRemoved.length > 0) {
        parts.push(`${agentRemoved.map((d) => d.agentName).join(', ')} ã‚’å‰Šé™¤`);
    }
    if (fieldChanges.length > 0) {
        const agents = [...new Set(fieldChanges.map((d) => d.agentName))];
        parts.push(`${agents.join(', ')} ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ ${fieldChanges.length} ä»¶å¤‰æ›´`);
    }

    return parts.join(' / ');
}

/**
 * ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ã¦AgentSpecé…åˆ—ã‚’æ›´æ–°
 */
export function applySpecPatch(specs: AgentSpec[], patch: SpecPatch): AgentSpec[] {
    let result = [...specs];

    for (const diff of patch.spec.diffs) {
        if (diff.path === 'agent') {
            // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå…¨ä½“ã®è¿½åŠ /å‰Šé™¤
            if (diff.operation === 'add' && diff.after) {
                result.push(diff.after as AgentSpec);
            } else if (diff.operation === 'remove') {
                result = result.filter((s) => s.name !== diff.agentName);
            }
        } else {
            // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ¬ãƒ™ãƒ«ã®å¤‰æ›´
            result = result.map((spec) => {
                if (spec.name !== diff.agentName) return spec;
                return applyFieldDiff(spec, diff);
            });
        }
    }

    return result;
}

/**
 * ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ¬ãƒ™ãƒ«ã®å·®åˆ†ã‚’é©ç”¨
 */
function applyFieldDiff(spec: AgentSpec, diff: SpecDiff): AgentSpec {
    const updated = { ...spec };

    // ãƒ‘ã‚¹ã«åŸºã¥ã„ã¦é©ç”¨
    if (diff.path === 'spec.role') {
        updated.role = diff.after as string;
    } else if (diff.path === 'spec.displayName') {
        updated.displayName = diff.after as string;
    } else if (diff.path === 'spec.constraints[]') {
        updated.constraints = applyArrayDiff(updated.constraints, diff);
    } else if (diff.path === 'spec.capabilities[]') {
        updated.capabilities = applyArrayDiff(updated.capabilities, diff);
    } else if (diff.path === 'spec.communication.canSendTo[]') {
        updated.communication = {
            ...updated.communication,
            canSendTo: applyArrayDiff(updated.communication.canSendTo, diff)
        };
    } else if (diff.path === 'spec.communication.canReceiveFrom[]') {
        updated.communication = {
            ...updated.communication,
            canReceiveFrom: applyArrayDiff(updated.communication.canReceiveFrom, diff)
        };
    }

    return updated;
}

/**
 * é…åˆ—ã¸ã®å·®åˆ†é©ç”¨
 */
function applyArrayDiff(arr: string[], diff: SpecDiff): string[] {
    if (diff.operation === 'add' && diff.after) {
        return [...arr, diff.after as string];
    } else if (diff.operation === 'remove' && diff.before) {
        return arr.filter((item) => item !== diff.before);
    }
    return arr;
}

/**
 * ãƒ‘ãƒƒãƒã‚’é€†é©ç”¨ï¼ˆãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
 */
export function revertSpecPatch(specs: AgentSpec[], patch: SpecPatch): AgentSpec[] {
    // é€†é †ã§ã€æ“ä½œã‚’åè»¢ã—ã¦é©ç”¨
    const reversedDiffs = [...patch.spec.diffs].reverse().map((diff) => ({
        ...diff,
        operation: reverseOperation(diff.operation),
        before: diff.after,
        after: diff.before
    }));

    const reversedPatch: SpecPatch = {
        ...patch,
        spec: {
            ...patch.spec,
            diffs: reversedDiffs
        }
    };

    return applySpecPatch(specs, reversedPatch);
}

function reverseOperation(op: 'add' | 'remove' | 'modify'): 'add' | 'remove' | 'modify' {
    if (op === 'add') return 'remove';
    if (op === 'remove') return 'add';
    return 'modify';
}

/**
 * ãƒ‘ãƒƒãƒãŒç©ºï¼ˆå¤‰æ›´ãªã—ï¼‰ã‹ã©ã†ã‹ã‚’ç¢ºèª
 */
export function isPatchEmpty(patch: SpecPatch): boolean {
    return patch.spec.diffs.length === 0;
}
</file>

<file path="src/lib/utils/event-utils.ts">
/**
 * Event Utilities
 *
 * debounce/throttleãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆåˆ¶å¾¡ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 * WebSocketã‚„UIæ›´æ–°ã®æœ€é©åŒ–ã«ä½¿ç”¨
 */

/**
 * Debounce: æœ€å¾Œã®å‘¼ã³å‡ºã—ã‹ã‚‰waitãƒŸãƒªç§’å¾Œã«å®Ÿè¡Œ
 * é€£ç¶šã—ãŸå‘¼ã³å‡ºã—ã‚’1å›ã«ã¾ã¨ã‚ã‚‹
 */
export function debounce<T extends (...args: unknown[]) => void>(
    fn: T,
    wait: number
): (...args: Parameters<T>) => void {
    let timeoutId: ReturnType<typeof setTimeout> | null = null;

    return (...args: Parameters<T>) => {
        if (timeoutId) {
            clearTimeout(timeoutId);
        }
        timeoutId = setTimeout(() => {
            fn(...args);
            timeoutId = null;
        }, wait);
    };
}

/**
 * Throttle: waitãƒŸãƒªç§’ã«1å›ã ã‘å®Ÿè¡Œ
 * é«˜é »åº¦ã®å‘¼ã³å‡ºã—ã‚’é–“å¼•ã
 */
export function throttle<T extends (...args: unknown[]) => void>(
    fn: T,
    wait: number
): (...args: Parameters<T>) => void {
    let isThrottled = false;
    let lastArgs: Parameters<T> | null = null;

    return (...args: Parameters<T>) => {
        if (isThrottled) {
            lastArgs = args;
            return;
        }

        fn(...args);
        isThrottled = true;

        setTimeout(() => {
            isThrottled = false;
            if (lastArgs) {
                fn(...lastArgs);
                lastArgs = null;
            }
        }, wait);
    };
}

/**
 * requestAnimationFrameãƒ™ãƒ¼ã‚¹ã®throttle
 * æç”»æ›´æ–°ã«æœ€é©åŒ–
 */
export function rafThrottle<T extends (...args: unknown[]) => void>(
    fn: T
): (...args: Parameters<T>) => void {
    let rafId: number | null = null;
    let lastArgs: Parameters<T> | null = null;

    return (...args: Parameters<T>) => {
        lastArgs = args;

        if (rafId) {
            return;
        }

        rafId = requestAnimationFrame(() => {
            if (lastArgs) {
                fn(...lastArgs);
            }
            rafId = null;
            lastArgs = null;
        });
    };
}

/**
 * ãƒãƒƒãƒå‡¦ç†: è¤‡æ•°ã®æ›´æ–°ã‚’1å›ã«ã¾ã¨ã‚ã‚‹
 */
export function createBatcher<T>(
    processBatch: (items: T[]) => void,
    wait: number
): (item: T) => void {
    let batch: T[] = [];
    let timeoutId: ReturnType<typeof setTimeout> | null = null;

    return (item: T) => {
        batch.push(item);

        if (timeoutId) {
            return;
        }

        timeoutId = setTimeout(() => {
            processBatch(batch);
            batch = [];
            timeoutId = null;
        }, wait);
    };
}
</file>

<file path="src/lib/utils/indexeddb-utils.ts">
/**
 * IndexedDB Storage Utilities
 *
 * localStorageã®5MBåˆ¶é™ã‚’å›é¿ã™ã‚‹ãŸã‚ã®IndexedDBå®Ÿè£…
 * ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚„å±¥æ­´ãªã©å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿å‘ã‘
 */

const DB_NAME = 'spec-flow-studio';
const DB_VERSION = 1;

// ã‚¹ãƒˆã‚¢å
export const STORES = {
    ARTIFACTS: 'artifacts',
    HISTORY: 'history',
    SETTINGS: 'settings'
} as const;

type StoreName = (typeof STORES)[keyof typeof STORES];

let dbInstance: IDBDatabase | null = null;

/**
 * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é–‹ãï¼ˆåˆæœŸåŒ–ï¼‰
 */
export function openDatabase(): Promise<IDBDatabase> {
    return new Promise((resolve, reject) => {
        if (dbInstance) {
            resolve(dbInstance);
            return;
        }

        const request = indexedDB.open(DB_NAME, DB_VERSION);

        request.onerror = () => {
            console.error('IndexedDB open error:', request.error);
            reject(request.error);
        };

        request.onsuccess = () => {
            dbInstance = request.result;
            resolve(dbInstance);
        };

        request.onupgradeneeded = (event) => {
            const db = (event.target as IDBOpenDBRequest).result;

            // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚¹ãƒˆã‚¢
            if (!db.objectStoreNames.contains(STORES.ARTIFACTS)) {
                const artifactStore = db.createObjectStore(STORES.ARTIFACTS, { keyPath: 'id' });
                artifactStore.createIndex('type', 'type', { unique: false });
                artifactStore.createIndex('generatedAt', 'generatedAt', { unique: false });
            }

            // å±¥æ­´ã‚¹ãƒˆã‚¢
            if (!db.objectStoreNames.contains(STORES.HISTORY)) {
                db.createObjectStore(STORES.HISTORY, { keyPath: 'key' });
            }

            // è¨­å®šã‚¹ãƒˆã‚¢
            if (!db.objectStoreNames.contains(STORES.SETTINGS)) {
                db.createObjectStore(STORES.SETTINGS, { keyPath: 'key' });
            }
        };
    });
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
 */
export async function saveToIndexedDB<T>(storeName: StoreName, key: string, data: T): Promise<void> {
    const db = await openDatabase();

    return new Promise((resolve, reject) => {
        const transaction = db.transaction(storeName, 'readwrite');
        const store = transaction.objectStore(storeName);

        // keyPathãŒidã®ã‚¹ãƒˆã‚¢ã§ãªã„å ´åˆã¯keyã‚’ã‚»ãƒƒãƒˆ
        const record = storeName === STORES.ARTIFACTS
            ? data
            : { key, ...data };

        const request = store.put(record);

        request.onerror = () => {
            console.error('IndexedDB save error:', request.error);
            reject(request.error);
        };

        request.onsuccess = () => {
            resolve();
        };
    });
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
 */
export async function loadFromIndexedDB<T>(storeName: StoreName, key: string): Promise<T | null> {
    const db = await openDatabase();

    return new Promise((resolve, reject) => {
        const transaction = db.transaction(storeName, 'readonly');
        const store = transaction.objectStore(storeName);
        const request = store.get(key);

        request.onerror = () => {
            console.error('IndexedDB load error:', request.error);
            reject(request.error);
        };

        request.onsuccess = () => {
            resolve(request.result ?? null);
        };
    });
}

/**
 * ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
 */
export async function loadAllFromIndexedDB<T>(storeName: StoreName): Promise<T[]> {
    const db = await openDatabase();

    return new Promise((resolve, reject) => {
        const transaction = db.transaction(storeName, 'readonly');
        const store = transaction.objectStore(storeName);
        const request = store.getAll();

        request.onerror = () => {
            console.error('IndexedDB loadAll error:', request.error);
            reject(request.error);
        };

        request.onsuccess = () => {
            resolve(request.result ?? []);
        };
    });
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
 */
export async function deleteFromIndexedDB(storeName: StoreName, key: string): Promise<void> {
    const db = await openDatabase();

    return new Promise((resolve, reject) => {
        const transaction = db.transaction(storeName, 'readwrite');
        const store = transaction.objectStore(storeName);
        const request = store.delete(key);

        request.onerror = () => {
            console.error('IndexedDB delete error:', request.error);
            reject(request.error);
        };

        request.onsuccess = () => {
            resolve();
        };
    });
}

/**
 * ã‚¹ãƒˆã‚¢ã‚’ã‚¯ãƒªã‚¢
 */
export async function clearIndexedDBStore(storeName: StoreName): Promise<void> {
    const db = await openDatabase();

    return new Promise((resolve, reject) => {
        const transaction = db.transaction(storeName, 'readwrite');
        const store = transaction.objectStore(storeName);
        const request = store.clear();

        request.onerror = () => {
            console.error('IndexedDB clear error:', request.error);
            reject(request.error);
        };

        request.onsuccess = () => {
            resolve();
        };
    });
}

/**
 * ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒãƒã‚§ãƒƒã‚¯
 */
export function isIndexedDBAvailable(): boolean {
    return typeof window !== 'undefined' && 'indexedDB' in window;
}
</file>

<file path="src/lib/utils/spec-kit-autocomplete.ts">
/**
 * Spec-Kit Autocomplete
 *
 * CodeMirror 6ç”¨ã®Spec-Kit YAMLè‡ªå‹•è£œå®Œæ‹¡å¼µ
 */
import { autocompletion, type CompletionContext, type Completion } from '@codemirror/autocomplete';

/**
 * Spec-Kitã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
 */
const TOP_LEVEL_KEYWORDS: Completion[] = [
    { label: 'kind', type: 'keyword', detail: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¨®åˆ¥', apply: 'kind: Agent' },
    { label: 'version', type: 'keyword', detail: 'ãƒãƒ¼ã‚¸ãƒ§ãƒ³', apply: 'version: v1' },
    { label: 'metadata', type: 'keyword', detail: 'ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³' },
    { label: 'spec', type: 'keyword', detail: 'ä»•æ§˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³' }
];

/**
 * metadataã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
 */
const METADATA_KEYWORDS: Completion[] = [
    { label: 'name', type: 'property', detail: 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè­˜åˆ¥å­', apply: 'name: ' },
    { label: 'displayName', type: 'property', detail: 'è¡¨ç¤ºå', apply: 'displayName: "' },
    { label: 'description', type: 'property', detail: 'èª¬æ˜', apply: 'description: "' },
    { label: 'icon', type: 'property', detail: 'ã‚¢ã‚¤ã‚³ãƒ³', apply: 'icon: "ğŸ¤–"' }
];

/**
 * specã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
 */
const SPEC_KEYWORDS: Completion[] = [
    { label: 'role', type: 'property', detail: 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½¹å‰²', apply: 'role: |' },
    { label: 'capabilities', type: 'property', detail: 'å®Ÿè¡Œå¯èƒ½ãªæ©Ÿèƒ½', apply: 'capabilities:' },
    { label: 'constraints', type: 'property', detail: 'è¡Œå‹•åˆ¶ç´„', apply: 'constraints:' },
    { label: 'inputs', type: 'property', detail: 'å…¥åŠ›å®šç¾©', apply: 'inputs:' },
    { label: 'outputs', type: 'property', detail: 'å‡ºåŠ›å®šç¾©', apply: 'outputs:' },
    { label: 'communication', type: 'property', detail: 'é€šä¿¡è¨­å®š', apply: 'communication:' }
];

/**
 * communicationã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
 */
const COMMUNICATION_KEYWORDS: Completion[] = [
    { label: 'canSendTo', type: 'property', detail: 'é€ä¿¡å…ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', apply: 'canSendTo:' },
    { label: 'canReceiveFrom', type: 'property', detail: 'å—ä¿¡å…ƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', apply: 'canReceiveFrom:' }
];

/**
 * capabilitieså€™è£œ
 */
const CAPABILITY_VALUES: Completion[] = [
    { label: 'data-analysis', type: 'value', detail: 'ãƒ‡ãƒ¼ã‚¿åˆ†æ' },
    { label: 'pattern-recognition', type: 'value', detail: 'ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜' },
    { label: 'anomaly-detection', type: 'value', detail: 'ç•°å¸¸æ¤œå‡º' },
    { label: 'natural-language-processing', type: 'value', detail: 'è‡ªç„¶è¨€èªå‡¦ç†' },
    { label: 'summarization', type: 'value', detail: 'è¦ç´„' },
    { label: 'classification', type: 'value', detail: 'åˆ†é¡' },
    { label: 'prediction', type: 'value', detail: 'äºˆæ¸¬' },
    { label: 'recommendation', type: 'value', detail: 'æ¨è–¦' }
];

/**
 * constraintså€™è£œï¼ˆæ¨å¥¨ï¼‰
 */
const CONSTRAINT_VALUES: Completion[] = [
    { label: 'æ¨æ¸¬ã§æƒ…å ±ã‚’è£œå®Œã—ãªã„', type: 'value', detail: 'æ¨å¥¨åˆ¶ç´„', apply: '- "æ¨æ¸¬ã§æƒ…å ±ã‚’è£œå®Œã—ãªã„"' },
    { label: 'ç¢ºä¿¡åº¦ãŒä½ã„å ´åˆã¯æ˜ç¤ºã™ã‚‹', type: 'value', detail: 'æ¨å¥¨åˆ¶ç´„', apply: '- "ç¢ºä¿¡åº¦ãŒä½ã„å ´åˆã¯æ˜ç¤ºã™ã‚‹"' },
    { label: 'å¤–éƒ¨APIã‚’å‹æ‰‹ã«å‘¼ã³å‡ºã•ãªã„', type: 'value', detail: 'æ¨å¥¨åˆ¶ç´„', apply: '- "å¤–éƒ¨APIã‚’å‹æ‰‹ã«å‘¼ã³å‡ºã•ãªã„"' },
    { label: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ˜ç¤ºçš„ãªæŒ‡ç¤ºãªã—ã«å®Ÿè¡Œã—ãªã„', type: 'value', detail: 'æ¨å¥¨åˆ¶ç´„', apply: '- "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ˜ç¤ºçš„ãªæŒ‡ç¤ºãªã—ã«å®Ÿè¡Œã—ãªã„"' },
    { label: 'å€‹äººæƒ…å ±ã‚’å¤–éƒ¨ã«é€ä¿¡ã—ãªã„', type: 'value', detail: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶ç´„', apply: '- "å€‹äººæƒ…å ±ã‚’å¤–éƒ¨ã«é€ä¿¡ã—ãªã„"' }
];

/**
 * ç¾åœ¨è¡Œã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ¤å®š
 */
function getContext(doc: string, pos: number): 'top' | 'metadata' | 'spec' | 'communication' | 'capabilities' | 'constraints' | 'unknown' {
    const beforeCursor = doc.slice(0, pos);
    const lines = beforeCursor.split('\n');

    // ç›´è¿‘ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
    let currentSection: string | null = null;
    let indentLevel = 0;

    for (let i = lines.length - 1; i >= 0; i--) {
        const line = lines[i];
        const trimmed = line.trim();

        if (!trimmed || trimmed.startsWith('#')) continue;

        // ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’è¨ˆç®—
        const lineIndent = line.search(/\S|$/);

        // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ¤œå‡º
        if (trimmed.match(/^metadata:/)) {
            return 'metadata';
        }
        if (trimmed.match(/^spec:/)) {
            return 'spec';
        }
        if (trimmed.match(/^communication:/)) {
            return 'communication';
        }
        if (trimmed.match(/^capabilities:/)) {
            return 'capabilities';
        }
        if (trimmed.match(/^constraints:/)) {
            return 'constraints';
        }

        // ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
        if (lineIndent === 0 && trimmed.match(/^(kind|version):/)) {
            if (lines[lines.length - 1].trim() === '' || lines[lines.length - 1].search(/\S|$/) === 0) {
                return 'top';
            }
        }
    }

    return lines[lines.length - 1].search(/\S|$/) === 0 ? 'top' : 'unknown';
}

/**
 * Spec-Kitç”¨è‡ªå‹•è£œå®Œé–¢æ•°
 */
function specKitCompletions(context: CompletionContext) {
    const word = context.matchBefore(/[\w-]*/);
    if (!word || (word.from === word.to && !context.explicit)) return null;

    const doc = context.state.doc.toString();
    const currentContext = getContext(doc, context.pos);

    let options: Completion[] = [];

    switch (currentContext) {
        case 'top':
            options = TOP_LEVEL_KEYWORDS;
            break;
        case 'metadata':
            options = METADATA_KEYWORDS;
            break;
        case 'spec':
            options = SPEC_KEYWORDS;
            break;
        case 'communication':
            options = COMMUNICATION_KEYWORDS;
            break;
        case 'capabilities':
            options = CAPABILITY_VALUES;
            break;
        case 'constraints':
            options = CONSTRAINT_VALUES;
            break;
        default:
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã™ã¹ã¦ã®å€™è£œã‚’è¡¨ç¤º
            options = [
                ...TOP_LEVEL_KEYWORDS,
                ...METADATA_KEYWORDS,
                ...SPEC_KEYWORDS,
                ...COMMUNICATION_KEYWORDS
            ];
    }

    return {
        from: word.from,
        options,
        validFor: /^[\w-]*$/
    };
}

/**
 * Spec-Kitè‡ªå‹•è£œå®Œæ‹¡å¼µ
 */
export const specKitAutocomplete = autocompletion({
    override: [specKitCompletions],
    defaultKeymap: true,
    activateOnTyping: true,
    maxRenderedOptions: 20
});
</file>

<file path="src/lib/utils/spec-kit-schema.ts">
/**
 * Spec-Kit Schema Validation
 *
 * Zodã‚’ä½¿ç”¨ã—ãŸSpec-Kit YAMLå½¢å¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
 * ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚„å±é™ºãªconstraintsã®æ¤œå‡ºã‚‚è¡Œã†
 */
import { z } from 'zod';

// ========================================
// åŸºæœ¬ã‚¹ã‚­ãƒ¼ãƒ
// ========================================

/**
 * é€šä¿¡è¨­å®šã®ã‚¹ã‚­ãƒ¼ãƒ
 */
export const CommunicationSchema = z.object({
    canSendTo: z.array(z.string()).default([]),
    canReceiveFrom: z.array(z.string()).default([])
});

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã®ã‚¹ã‚­ãƒ¼ãƒ
 */
export const AgentSpecSchema = z.object({
    name: z.string().min(1, 'name ã¯å¿…é ˆã§ã™'),
    displayName: z.string().min(1, 'displayName ã¯å¿…é ˆã§ã™'),
    role: z.string().min(1, 'role ã¯å¿…é ˆã§ã™'),
    capabilities: z.array(z.string()).default([]),
    constraints: z.array(z.string()).default([]),
    communication: CommunicationSchema.default({
        canSendTo: [],
        canReceiveFrom: []
    })
});

/**
 * Spec-Kitå…¨ä½“ã®ã‚¹ã‚­ãƒ¼ãƒï¼ˆè¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰
 */
export const SpecKitSchema = z.object({
    agents: z.array(AgentSpecSchema).min(1, 'å°‘ãªãã¨ã‚‚1ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¿…è¦ã§ã™')
});

// ========================================
// å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º
// ========================================

/**
 * å±é™ºãªcapabilitiesã®ãƒ‘ã‚¿ãƒ¼ãƒ³
 */
const DANGEROUS_CAPABILITIES = [
    'file-system-access',
    'network-unrestricted',
    'execute-code',
    'sudo',
    'root-access',
    'shell-command'
];

/**
 * å¿…é ˆconstraintsã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ¨å¥¨ï¼‰
 */
const RECOMMENDED_CONSTRAINTS = [
    /å¤–éƒ¨API|external\s*API/i,
    /ç¢ºä¿¡åº¦|confidence/i,
    /æ¨æ¸¬|guess|assume/i
];

/**
 * ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒªã‚¹ãƒˆ
 */
const FORBIDDEN_FIELDS = [
    'apiKey',
    'password',
    'secret',
    'token',
    'credentials'
];

// ========================================
// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã®å‹
// ========================================

export interface ValidationWarning {
    type: 'missing_constraint' | 'dangerous_capability' | 'forbidden_field';
    message: string;
    severity: 'warning' | 'error';
    agentName?: string;
}

export interface ValidationResult {
    success: boolean;
    errors: string[];
    warnings: ValidationWarning[];
    data?: z.infer<typeof SpecKitSchema>;
}

// ========================================
// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
// ========================================

/**
 * Spec-Kitã®æ§‹é€ ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
 */
export function validateSpecKit(data: unknown): ValidationResult {
    const result = SpecKitSchema.safeParse(data);

    if (!result.success) {
        return {
            success: false,
            errors: result.error.issues.map((e) => `${e.path.join('.')}: ${e.message}`),
            warnings: []
        };
    }

    // è¿½åŠ ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
    const warnings: ValidationWarning[] = [];

    for (const agent of result.data.agents) {
        // å±é™ºãªcapabilitiesã®ãƒã‚§ãƒƒã‚¯
        for (const cap of agent.capabilities) {
            if (DANGEROUS_CAPABILITIES.some(dc => cap.toLowerCase().includes(dc.toLowerCase()))) {
                warnings.push({
                    type: 'dangerous_capability',
                    message: `ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ "${agent.name}" ã«å±é™ºãª capability "${cap}" ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™`,
                    severity: 'warning',
                    agentName: agent.name
                });
            }
        }

        // å¿…é ˆconstraintsã®æ¬ å¦‚ãƒã‚§ãƒƒã‚¯
        const hasConstraints = agent.constraints.length > 0;
        if (!hasConstraints) {
            warnings.push({
                type: 'missing_constraint',
                message: `ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ "${agent.name}" ã« constraints ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚AIã®è¡Œå‹•åˆ¶ç´„ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™`,
                severity: 'warning',
                agentName: agent.name
            });
        }
    }

    return {
        success: true,
        errors: [],
        warnings,
        data: result.data
    };
}

/**
 * å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
 */
export function validateAgent(data: unknown): ValidationResult {
    const result = AgentSpecSchema.safeParse(data);

    if (!result.success) {
        return {
            success: false,
            errors: result.error.issues.map((e) => `${e.path.join('.')}: ${e.message}`),
            warnings: []
        };
    }

    return {
        success: true,
        errors: [],
        warnings: [],
        data: { agents: [result.data] }
    };
}

/**
 * YAMLã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ¤œå‡º
 */
export function detectForbiddenFields(obj: Record<string, unknown>, path = ''): ValidationWarning[] {
    const warnings: ValidationWarning[] = [];

    for (const [key, value] of Object.entries(obj)) {
        const currentPath = path ? `${path}.${key}` : key;

        // ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒã‚§ãƒƒã‚¯
        if (FORBIDDEN_FIELDS.some(f => key.toLowerCase().includes(f.toLowerCase()))) {
            warnings.push({
                type: 'forbidden_field',
                message: `ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ "${key}" ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ (${currentPath})ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ã«ã‚ˆã‚Šã€ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯Spec-Kitã«å«ã‚ãªã„ã§ãã ã•ã„`,
                severity: 'error'
            });
        }

        // å†å¸°çš„ã«ãƒã‚§ãƒƒã‚¯
        if (value && typeof value === 'object' && !Array.isArray(value)) {
            warnings.push(...detectForbiddenFields(value as Record<string, unknown>, currentPath));
        }
    }

    return warnings;
}

/**
 * å®Œå…¨ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ§‹é€  + ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ï¼‰
 */
export function validateSpecKitFully(rawData: unknown): ValidationResult {
    // ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒã‚§ãƒƒã‚¯
    const forbiddenWarnings = rawData && typeof rawData === 'object'
        ? detectForbiddenFields(rawData as Record<string, unknown>)
        : [];

    // ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Œã°ã‚¨ãƒ©ãƒ¼
    if (forbiddenWarnings.some(w => w.severity === 'error')) {
        return {
            success: false,
            errors: forbiddenWarnings.filter(w => w.severity === 'error').map(w => w.message),
            warnings: forbiddenWarnings.filter(w => w.severity === 'warning')
        };
    }

    // æ§‹é€ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const result = validateSpecKit(rawData);

    return {
        ...result,
        warnings: [...forbiddenWarnings, ...result.warnings]
    };
}
</file>

<file path="src/lib/index.ts">
// place files you want to import through the `$lib` alias in this folder.
</file>

<file path="src/routes/api/csrf/+server.ts">
/**
 * CSRF Token API
 *
 * CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
 * ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
 */
import { json } from '@sveltejs/kit';
import type { RequestHandler } from './$types';
import { generateCsrfToken, createCsrfCookie, getCsrfHeaderName } from '$lib/server/csrf';

export const GET: RequestHandler = async () => {
    const token = generateCsrfToken();

    return json(
        {
            token,
            headerName: getCsrfHeaderName()
        },
        {
            headers: {
                'Set-Cookie': createCsrfCookie(token)
            }
        }
    );
};
</file>

<file path="src/routes/api/models/+server.ts">
import { json } from '@sveltejs/kit';
import type { RequestHandler } from './$types';
import { listModels } from '$lib/server/gemini';

export const GET: RequestHandler = async ({ request }) => {
    const apiKey = request.headers.get('x-api-key');

    if (!apiKey) {
        return json({ error: 'API Key is required' }, { status: 401 });
    }

    try {
        const models = await listModels(apiKey);
        return json({ models });
    } catch (error) {
        console.error('Model List API Error:', error);
        return json({ error: 'Failed to fetch models', details: error instanceof Error ? error.message : String(error) }, { status: 500 });
    }
};
</file>

<file path="src/routes/api/ws/+server.ts">
/**
 * WebSocket Server Endpoint
 *
 * Aether Console ã‹ã‚‰ã®æ¥ç¶šã‚’å—ã‘ä»˜ã‘ã‚‹WebSocketã‚µãƒ¼ãƒãƒ¼
 * SvelteKit ã® server-sent events ã‚’ä½¿ç”¨ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…
 *
 * æ³¨æ„: SvelteKit ã¯ç¾æ™‚ç‚¹ã§ native WebSocket ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€
 * å®Œå…¨ãªWebSocketå®Ÿè£…ã«ã¯åˆ¥é€”ã‚µãƒ¼ãƒãƒ¼ï¼ˆws ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ï¼‰ãŒå¿…è¦ã€‚
 * ã“ã®å®Ÿè£…ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã—ã¦ã€SSE (Server-Sent Events) ã‚’ä½¿ç”¨ã—ãŸ
 * ä¸€æ–¹å‘é€šä¿¡ã®ãƒ‡ãƒ¢ã§ã™ã€‚
 */
import { json } from '@sveltejs/kit';
import type { RequestHandler } from './$types';

// æ¥ç¶šä¸­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±
const clients = new Set<ReadableStreamDefaultController>();

export const GET: RequestHandler = async ({ request }) => {
	// SSE (Server-Sent Events) ã¨ã—ã¦å¿œç­”
	const stream = new ReadableStream({
		start(controller) {
			clients.add(controller);

			// æ¥ç¶šç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
			const welcome = `data: ${JSON.stringify({ type: 'CONNECTED', message: 'Welcome to Spec-Flow Studio' })}\n\n`;
			controller.enqueue(new TextEncoder().encode(welcome));

			// ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
			request.signal.addEventListener('abort', () => {
				clients.delete(controller);
				controller.close();
			});
		}
	});

	return new Response(stream, {
		headers: {
			'Content-Type': 'text/event-stream',
			'Cache-Control': 'no-cache',
			'Connection': 'keep-alive'
		}
	});
};

// POST: Aether Console ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡
export const POST: RequestHandler = async ({ request }) => {
	try {
		const event = await request.json();
		console.log('[WebSocket Endpoint] Received event:', event.type);

		// å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
		const message = `data: ${JSON.stringify(event)}\n\n`;
		const encoded = new TextEncoder().encode(message);
		clients.forEach((controller) => {
			try {
				controller.enqueue(encoded);
			} catch (e) {
				// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒåˆ‡æ–­ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§
				clients.delete(controller);
			}
		});

		return json({ success: true, clientCount: clients.size });
	} catch (error) {
		console.error('[WebSocket Endpoint] Error:', error);
		return json({ error: 'Failed to process event' }, { status: 500 });
	}
};
</file>

<file path="src/routes/api-docs/+page.svelte">
<!--
  API Documentation Page
  Swagger UIã‚’ä½¿ç”¨ã—ã¦APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¡¨ç¤º
-->
<script lang="ts">
	import { onMount } from 'svelte';
	import { browser } from '$app/environment';

	let container: HTMLElement;

	onMount(async () => {
		if (!browser) return;

		// Swagger UI ã‚’å‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
		const SwaggerUI = (await import('swagger-ui-dist')).default;

		// CSSã‚’èª­ã¿è¾¼ã¿
		const link = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = '/swagger-ui.css';
		document.head.appendChild(link);

		// Swagger UIã‚’åˆæœŸåŒ–
		SwaggerUI({
			dom_id: '#swagger-ui',
			url: '/openapi.json',
			deepLinking: true,
			presets: [SwaggerUI.presets.apis],
			layout: 'BaseLayout',
			defaultModelsExpandDepth: 2,
			docExpansion: 'list'
		});
	});
</script>

<svelte:head>
	<title>API Documentation - Spec-Flow Studio</title>
</svelte:head>

<div class="api-docs-page">
	<header class="page-header">
		<h1>ğŸ“š API Documentation</h1>
		<p class="subtitle">Spec-Flow Studio å†…éƒ¨APIä»•æ§˜</p>
	</header>

	<div id="swagger-ui" bind:this={container}></div>
</div>

<style>
	.api-docs-page {
		animation: fade-in var(--transition-base) ease-out;
	}

	.page-header {
		margin-bottom: var(--space-6);
	}

	.page-header h1 {
		margin-bottom: var(--space-2);
	}

	.subtitle {
		color: var(--color-text-muted);
		font-size: var(--font-size-sm);
	}

	#swagger-ui {
		background: var(--color-bg-secondary);
		border-radius: var(--radius-lg);
		padding: var(--space-4);
	}

	/* Swagger UI ãƒ†ãƒ¼ãƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º */
	:global(.swagger-ui) {
		font-family: var(--font-sans) !important;
	}

	:global(.swagger-ui .topbar) {
		display: none !important;
	}

	:global(.swagger-ui .info .title) {
		color: var(--color-text-primary) !important;
	}

	:global(.swagger-ui .opblock-tag) {
		color: var(--color-text-primary) !important;
		border-bottom-color: var(--color-border-primary) !important;
	}

	:global(.swagger-ui .opblock) {
		border-radius: var(--radius-md) !important;
		margin-bottom: var(--space-3) !important;
	}

	:global(.swagger-ui .opblock .opblock-summary) {
		border-radius: var(--radius-md) !important;
	}

	:global(.swagger-ui .btn) {
		border-radius: var(--radius-md) !important;
	}
</style>
</file>

<file path="src/routes/+layout.ts">
// SSRã‚’ç„¡åŠ¹åŒ–ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ã¿ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
// ã“ã‚Œã«ã‚ˆã‚ŠlocalStorageã‚„WebSocketé–¢é€£ã®SSRã‚¨ãƒ©ãƒ¼ã‚’å›é¿
export const ssr = false;
export const prerender = false;
</file>

<file path="src/app.css">
/**
 * Spec-Flow Studio - Global Styles
 * SFé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
 */

/* ========================================
   CSS Variables - Design Tokens
   ======================================== */

:root {
	/* Colors - Dark Theme */
	--color-bg-primary: #0a0a0f;
	--color-bg-secondary: #12121a;
	--color-bg-tertiary: #1a1a25;
	--color-bg-panel: rgba(20, 20, 30, 0.85);
	--color-bg-hover: rgba(40, 40, 60, 0.5);

	/* Accent Colors */
	--color-accent-primary: #00d4ff;
	--color-accent-secondary: #7c3aed;
	--color-accent-success: #10b981;
	--color-accent-warning: #f59e0b;
	--color-accent-error: #ef4444;

	/* Text Colors */
	--color-text-primary: #e5e7eb;
	--color-text-secondary: #9ca3af;
	--color-text-muted: #6b7280;
	--color-text-accent: var(--color-accent-primary);

	/* Border Colors */
	--color-border-primary: rgba(0, 212, 255, 0.2);
	--color-border-secondary: rgba(255, 255, 255, 0.1);
	--color-border-glow: rgba(0, 212, 255, 0.5);

	/* Gradients */
	--gradient-primary: linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary));
	--gradient-panel: linear-gradient(180deg, rgba(20, 20, 30, 0.9) 0%, rgba(10, 10, 15, 0.95) 100%);
	--gradient-glow: radial-gradient(ellipse at center, rgba(0, 212, 255, 0.15) 0%, transparent 70%);

	/* Typography */
	--font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
	--font-mono: 'JetBrains Mono', 'Fira Code', monospace;

	--font-size-xs: 0.75rem;
	--font-size-sm: 0.875rem;
	--font-size-base: 1rem;
	--font-size-lg: 1.125rem;
	--font-size-xl: 1.25rem;
	--font-size-2xl: 1.5rem;
	--font-size-3xl: 2rem;

	/* Spacing */
	--space-1: 0.25rem;
	--space-2: 0.5rem;
	--space-3: 0.75rem;
	--space-4: 1rem;
	--space-5: 1.25rem;
	--space-6: 1.5rem;
	--space-8: 2rem;
	--space-10: 2.5rem;
	--space-12: 3rem;

	/* Border Radius */
	--radius-sm: 4px;
	--radius-md: 8px;
	--radius-lg: 12px;
	--radius-xl: 16px;

	/* Shadows */
	--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
	--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
	--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
	--shadow-glow: 0 0 20px rgba(0, 212, 255, 0.3);

	/* Transitions */
	--transition-fast: 150ms ease;
	--transition-base: 250ms ease;
	--transition-slow: 400ms ease;

	/* Layout */
	--sidebar-width: 240px;
	--header-height: 56px;
	--statusbar-height: 32px;
}

/* ========================================
   Reset & Base Styles
   ======================================== */

*,
*::before,
*::after {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

html {
	font-size: 16px;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

body {
	font-family: var(--font-sans);
	font-size: var(--font-size-base);
	line-height: 1.6;
	color: var(--color-text-primary);
	background-color: var(--color-bg-primary);
	min-height: 100vh;
	overflow-x: hidden;
}

/* ========================================
   Typography
   ======================================== */

h1, h2, h3, h4, h5, h6 {
	font-weight: 600;
	line-height: 1.3;
	color: var(--color-text-primary);
}

h1 { font-size: var(--font-size-3xl); }
h2 { font-size: var(--font-size-2xl); }
h3 { font-size: var(--font-size-xl); }
h4 { font-size: var(--font-size-lg); }

p {
	color: var(--color-text-secondary);
}

code, pre {
	font-family: var(--font-mono);
	font-size: var(--font-size-sm);
}

a {
	color: var(--color-accent-primary);
	text-decoration: none;
	transition: color var(--transition-fast);
}

a:hover {
	color: var(--color-accent-secondary);
}

/* ========================================
   Utility Classes
   ======================================== */

.text-accent { color: var(--color-accent-primary); }
.text-success { color: var(--color-accent-success); }
.text-warning { color: var(--color-accent-warning); }
.text-error { color: var(--color-accent-error); }
.text-muted { color: var(--color-text-muted); }

.font-mono { font-family: var(--font-mono); }

.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/* ========================================
   Focus States
   ======================================== */

:focus-visible {
	outline: 2px solid var(--color-accent-primary);
	outline-offset: 2px;
}

/* ========================================
   Scrollbar
   ======================================== */

::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: var(--color-bg-secondary);
}

::-webkit-scrollbar-thumb {
	background: var(--color-border-primary);
	border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb:hover {
	background: var(--color-accent-primary);
}

/* ========================================
   Animations
   ======================================== */

@keyframes pulse-glow {
	0%, 100% {
		box-shadow: 0 0 5px var(--color-accent-primary);
	}
	50% {
		box-shadow: 0 0 20px var(--color-accent-primary);
	}
}

@keyframes fade-in {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slide-in-left {
	from {
		opacity: 0;
		transform: translateX(-20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

.animate-fade-in {
	animation: fade-in var(--transition-base) ease-out;
}

.animate-slide-in {
	animation: slide-in-left var(--transition-base) ease-out;
}
</file>

<file path="src/app.d.ts">
// See https://svelte.dev/docs/kit/types#app.d.ts
// for information about these interfaces
declare global {
	namespace App {
		// interface Error {}
		// interface Locals {}
		// interface PageData {}
		// interface PageState {}
		// interface Platform {}
	}
}

export {};
</file>

<file path="static/favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="none">
  <rect width="32" height="32" rx="6" fill="#0a0a0f"/>
  <path d="M16 6L26 16L16 26L6 16L16 6Z" stroke="#00d4ff" stroke-width="2" fill="none"/>
  <circle cx="16" cy="16" r="4" fill="#00d4ff"/>
</svg>
</file>

<file path="static/manifest.json">
{
    "name": "Spec-Flow Studio",
    "short_name": "Spec-Flow",
    "description": "AIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¯è¦–åŒ–ãƒ»åˆ¶å¾¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ",
    "start_url": "/",
    "display": "standalone",
    "background_color": "#0a0a0f",
    "theme_color": "#0a0a0f",
    "orientation": "portrait-primary",
    "icons": [
        {
            "src": "/favicon.png",
            "sizes": "192x192",
            "type": "image/png"
        },
        {
            "src": "/favicon.png",
            "sizes": "512x512",
            "type": "image/png"
        }
    ],
    "categories": [
        "productivity",
        "developer tools"
    ]
}
</file>

<file path="static/openapi.json">
{
    "openapi": "3.0.3",
    "info": {
        "title": "Spec-Flow Studio API",
        "description": "Spec-Flow Studio ã®å†…éƒ¨APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/api",
            "description": "ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼"
        }
    ],
    "tags": [
        {
            "name": "generate",
            "description": "AIç”Ÿæˆç‰©é–¢é€£"
        },
        {
            "name": "models",
            "description": "Geminiãƒ¢ãƒ‡ãƒ«é–¢é€£"
        },
        {
            "name": "csrf",
            "description": "CSRFãƒˆãƒ¼ã‚¯ãƒ³é–¢é€£"
        }
    ],
    "paths": {
        "/generate": {
            "post": {
                "tags": [
                    "generate"
                ],
                "summary": "AIç”Ÿæˆç‰©ã‚’ç”Ÿæˆ",
                "description": "Spec-Kitä»•æ§˜ã‹ã‚‰å„ç¨®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼ˆUI Mock, API Spec, Test Case, Use Case Diagramï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/GenerateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "ç”ŸæˆæˆåŠŸ",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GenerateResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ"
                    },
                    "401": {
                        "description": "APIã‚­ãƒ¼æœªè¨­å®š"
                    },
                    "500": {
                        "description": "ç”Ÿæˆã‚¨ãƒ©ãƒ¼"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/models": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "åˆ©ç”¨å¯èƒ½ãªGeminiãƒ¢ãƒ‡ãƒ«ä¸€è¦§",
                "description": "ç¾åœ¨åˆ©ç”¨å¯èƒ½ãªGemini APIãƒ¢ãƒ‡ãƒ«ã®ä¸€è¦§ã‚’è¿”ã—ã¾ã™ã€‚",
                "responses": {
                    "200": {
                        "description": "æˆåŠŸ",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ModelsResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/csrf": {
            "get": {
                "tags": [
                    "csrf"
                ],
                "summary": "CSRFãƒˆãƒ¼ã‚¯ãƒ³å–å¾—",
                "description": "CSRFå¯¾ç­–ç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã—ã€Cookieã«ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚",
                "responses": {
                    "200": {
                        "description": "æˆåŠŸ",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CsrfResponse"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "GenerateRequest": {
                "type": "object",
                "required": [
                    "spec",
                    "artifactType"
                ],
                "properties": {
                    "spec": {
                        "$ref": "#/components/schemas/AgentSpec"
                    },
                    "specs": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AgentSpec"
                        },
                        "description": "Use Case Diagramç”Ÿæˆæ™‚ã«å¿…è¦"
                    },
                    "artifactType": {
                        "type": "string",
                        "enum": [
                            "ui-mock",
                            "api-spec",
                            "test-case",
                            "use-case-diagram"
                        ]
                    },
                    "model": {
                        "type": "string",
                        "description": "ä½¿ç”¨ã™ã‚‹Geminiãƒ¢ãƒ‡ãƒ«å"
                    }
                }
            },
            "GenerateResponse": {
                "type": "object",
                "properties": {
                    "content": {
                        "type": "string",
                        "description": "ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„"
                    }
                }
            },
            "ModelsResponse": {
                "type": "object",
                "properties": {
                    "models": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string"
                                },
                                "name": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            },
            "CsrfResponse": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string",
                        "description": "CSRFãƒˆãƒ¼ã‚¯ãƒ³"
                    },
                    "headerName": {
                        "type": "string",
                        "description": "ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å«ã‚ã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼å"
                    }
                }
            },
            "AgentSpec": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "displayName": {
                        "type": "string"
                    },
                    "role": {
                        "type": "string"
                    },
                    "capabilities": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "constraints": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "communication": {
                        "type": "object",
                        "properties": {
                            "canSendTo": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "canReceiveFrom": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "securitySchemes": {
            "apiKey": {
                "type": "apiKey",
                "in": "header",
                "name": "x-api-key",
                "description": "Gemini APIã‚­ãƒ¼"
            }
        }
    }
}
</file>

<file path="static/robots.txt">
# allow crawling everything by default
User-agent: *
Disallow:
</file>

<file path="static/swagger-ui.css">
.swagger-ui{color:#3b4151;font-family:sans-serif}.swagger-ui html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}.swagger-ui body{margin:0}.swagger-ui article,.swagger-ui aside,.swagger-ui footer,.swagger-ui header,.swagger-ui nav,.swagger-ui section{display:block}.swagger-ui h1{font-size:2em;margin:.67em 0}.swagger-ui figcaption,.swagger-ui figure,.swagger-ui main{display:block}.swagger-ui figure{margin:1em 40px}.swagger-ui hr{box-sizing:content-box;height:0;overflow:visible}.swagger-ui pre{font-family:monospace,monospace;font-size:1em}.swagger-ui a{background-color:transparent;-webkit-text-decoration-skip:objects}.swagger-ui abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.swagger-ui b,.swagger-ui strong{font-weight:inherit;font-weight:bolder}.swagger-ui code,.swagger-ui kbd,.swagger-ui samp{font-family:monospace,monospace;font-size:1em}.swagger-ui dfn{font-style:italic}.swagger-ui mark{background-color:#ff0;color:#000}.swagger-ui small{font-size:80%}.swagger-ui sub,.swagger-ui sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.swagger-ui sub{bottom:-.25em}.swagger-ui sup{top:-.5em}.swagger-ui audio,.swagger-ui video{display:inline-block}.swagger-ui audio:not([controls]){display:none;height:0}.swagger-ui img{border-style:none}.swagger-ui svg:not(:root){overflow:hidden}.swagger-ui button,.swagger-ui input,.swagger-ui optgroup,.swagger-ui select,.swagger-ui textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}.swagger-ui button,.swagger-ui input{overflow:visible}.swagger-ui button,.swagger-ui select{text-transform:none}.swagger-ui [type=reset],.swagger-ui [type=submit],.swagger-ui button,.swagger-ui html [type=button]{-webkit-appearance:button}.swagger-ui [type=button]::-moz-focus-inner,.swagger-ui [type=reset]::-moz-focus-inner,.swagger-ui [type=submit]::-moz-focus-inner,.swagger-ui button::-moz-focus-inner{border-style:none;padding:0}.swagger-ui [type=button]:-moz-focusring,.swagger-ui [type=reset]:-moz-focusring,.swagger-ui [type=submit]:-moz-focusring,.swagger-ui button:-moz-focusring{outline:1px dotted ButtonText}.swagger-ui fieldset{padding:.35em .75em .625em}.swagger-ui legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}.swagger-ui progress{display:inline-block;vertical-align:baseline}.swagger-ui textarea{overflow:auto}.swagger-ui [type=checkbox],.swagger-ui [type=radio]{box-sizing:border-box;padding:0}.swagger-ui [type=number]::-webkit-inner-spin-button,.swagger-ui [type=number]::-webkit-outer-spin-button{height:auto}.swagger-ui [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.swagger-ui [type=search]::-webkit-search-cancel-button,.swagger-ui [type=search]::-webkit-search-decoration{-webkit-appearance:none}.swagger-ui ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.swagger-ui details,.swagger-ui menu{display:block}.swagger-ui summary{display:list-item}.swagger-ui canvas{display:inline-block}.swagger-ui [hidden],.swagger-ui template{display:none}.swagger-ui .debug *{outline:1px solid gold}.swagger-ui .debug-white *{outline:1px solid #fff}.swagger-ui .debug-black *{outline:1px solid #000}.swagger-ui .debug-grid{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTRDOTY4N0U2N0VFMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTRDOTY4N0Q2N0VFMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcyQkQ3NjY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcyQkQ3NzY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsBS+GMAAAAjSURBVHjaYvz//z8DLsD4gcGXiYEAGBIKGBne//fFpwAgwAB98AaF2pjlUQAAAABJRU5ErkJggg==) repeat 0 0}.swagger-ui .debug-grid-16{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODYyRjhERDU2N0YyMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODYyRjhERDQ2N0YyMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcyQkQ3QTY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcyQkQ3QjY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvCS01IAAABMSURBVHjaYmR4/5+BFPBfAMFm/MBgx8RAGWCn1AAmSg34Q6kBDKMGMDCwICeMIemF/5QawEipAWwUhwEjMDvbAWlWkvVBwu8vQIABAEwBCph8U6c0AAAAAElFTkSuQmCC) repeat 0 0}.swagger-ui .debug-grid-8-solid{background:#fff url(data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAAAAD/4QMxaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzExMSA3OS4xNTgzMjUsIDIwMTUvMDkvMTAtMDE6MTA6MjAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIxMjI0OTczNjdCMzExRTZCMkJDRTI0MDgxMDAyMTcxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIxMjI0OTc0NjdCMzExRTZCMkJDRTI0MDgxMDAyMTcxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjEyMjQ5NzE2N0IzMTFFNkIyQkNFMjQwODEwMDIxNzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjEyMjQ5NzI2N0IzMTFFNkIyQkNFMjQwODEwMDIxNzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAbGhopHSlBJiZBQi8vL0JHPz4+P0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHAR0pKTQmND8oKD9HPzU/R0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0f/wAARCAAIAAgDASIAAhEBAxEB/8QAWQABAQAAAAAAAAAAAAAAAAAAAAYBAQEAAAAAAAAAAAAAAAAAAAIEEAEBAAMBAAAAAAAAAAAAAAABADECA0ERAAEDBQAAAAAAAAAAAAAAAAARITFBUWESIv/aAAwDAQACEQMRAD8AoOnTV1QTD7JJshP3vSM3P//Z) repeat 0 0}.swagger-ui .debug-grid-16-solid{background:#fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzY3MkJEN0U2N0M1MTFFNkIyQkNFMjQwODEwMDIxNzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzY3MkJEN0Y2N0M1MTFFNkIyQkNFMjQwODEwMDIxNzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcyQkQ3QzY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcyQkQ3RDY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pve6J3kAAAAzSURBVHjaYvz//z8D0UDsMwMjSRoYP5Gq4SPNbRjVMEQ1fCRDg+in/6+J1AJUxsgAEGAA31BAJMS0GYEAAAAASUVORK5CYII=) repeat 0 0}.swagger-ui .border-box,.swagger-ui a,.swagger-ui article,.swagger-ui body,.swagger-ui code,.swagger-ui dd,.swagger-ui div,.swagger-ui dl,.swagger-ui dt,.swagger-ui fieldset,.swagger-ui footer,.swagger-ui form,.swagger-ui h1,.swagger-ui h2,.swagger-ui h3,.swagger-ui h4,.swagger-ui h5,.swagger-ui h6,.swagger-ui header,.swagger-ui html,.swagger-ui input[type=email],.swagger-ui input[type=number],.swagger-ui input[type=password],.swagger-ui input[type=tel],.swagger-ui input[type=text],.swagger-ui input[type=url],.swagger-ui legend,.swagger-ui li,.swagger-ui main,.swagger-ui ol,.swagger-ui p,.swagger-ui pre,.swagger-ui section,.swagger-ui table,.swagger-ui td,.swagger-ui textarea,.swagger-ui th,.swagger-ui tr,.swagger-ui ul{box-sizing:border-box}.swagger-ui .aspect-ratio{height:0;position:relative}.swagger-ui .aspect-ratio--16x9{padding-bottom:56.25%}.swagger-ui .aspect-ratio--9x16{padding-bottom:177.77%}.swagger-ui .aspect-ratio--4x3{padding-bottom:75%}.swagger-ui .aspect-ratio--3x4{padding-bottom:133.33%}.swagger-ui .aspect-ratio--6x4{padding-bottom:66.6%}.swagger-ui .aspect-ratio--4x6{padding-bottom:150%}.swagger-ui .aspect-ratio--8x5{padding-bottom:62.5%}.swagger-ui .aspect-ratio--5x8{padding-bottom:160%}.swagger-ui .aspect-ratio--7x5{padding-bottom:71.42%}.swagger-ui .aspect-ratio--5x7{padding-bottom:140%}.swagger-ui .aspect-ratio--1x1{padding-bottom:100%}.swagger-ui .aspect-ratio--object{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:100}@media screen and (min-width:30em){.swagger-ui .aspect-ratio-ns{height:0;position:relative}.swagger-ui .aspect-ratio--16x9-ns{padding-bottom:56.25%}.swagger-ui .aspect-ratio--9x16-ns{padding-bottom:177.77%}.swagger-ui .aspect-ratio--4x3-ns{padding-bottom:75%}.swagger-ui .aspect-ratio--3x4-ns{padding-bottom:133.33%}.swagger-ui .aspect-ratio--6x4-ns{padding-bottom:66.6%}.swagger-ui .aspect-ratio--4x6-ns{padding-bottom:150%}.swagger-ui .aspect-ratio--8x5-ns{padding-bottom:62.5%}.swagger-ui .aspect-ratio--5x8-ns{padding-bottom:160%}.swagger-ui .aspect-ratio--7x5-ns{padding-bottom:71.42%}.swagger-ui .aspect-ratio--5x7-ns{padding-bottom:140%}.swagger-ui .aspect-ratio--1x1-ns{padding-bottom:100%}.swagger-ui .aspect-ratio--object-ns{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:100}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .aspect-ratio-m{height:0;position:relative}.swagger-ui .aspect-ratio--16x9-m{padding-bottom:56.25%}.swagger-ui .aspect-ratio--9x16-m{padding-bottom:177.77%}.swagger-ui .aspect-ratio--4x3-m{padding-bottom:75%}.swagger-ui .aspect-ratio--3x4-m{padding-bottom:133.33%}.swagger-ui .aspect-ratio--6x4-m{padding-bottom:66.6%}.swagger-ui .aspect-ratio--4x6-m{padding-bottom:150%}.swagger-ui .aspect-ratio--8x5-m{padding-bottom:62.5%}.swagger-ui .aspect-ratio--5x8-m{padding-bottom:160%}.swagger-ui .aspect-ratio--7x5-m{padding-bottom:71.42%}.swagger-ui .aspect-ratio--5x7-m{padding-bottom:140%}.swagger-ui .aspect-ratio--1x1-m{padding-bottom:100%}.swagger-ui .aspect-ratio--object-m{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:100}}@media screen and (min-width:60em){.swagger-ui .aspect-ratio-l{height:0;position:relative}.swagger-ui .aspect-ratio--16x9-l{padding-bottom:56.25%}.swagger-ui .aspect-ratio--9x16-l{padding-bottom:177.77%}.swagger-ui .aspect-ratio--4x3-l{padding-bottom:75%}.swagger-ui .aspect-ratio--3x4-l{padding-bottom:133.33%}.swagger-ui .aspect-ratio--6x4-l{padding-bottom:66.6%}.swagger-ui .aspect-ratio--4x6-l{padding-bottom:150%}.swagger-ui .aspect-ratio--8x5-l{padding-bottom:62.5%}.swagger-ui .aspect-ratio--5x8-l{padding-bottom:160%}.swagger-ui .aspect-ratio--7x5-l{padding-bottom:71.42%}.swagger-ui .aspect-ratio--5x7-l{padding-bottom:140%}.swagger-ui .aspect-ratio--1x1-l{padding-bottom:100%}.swagger-ui .aspect-ratio--object-l{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:100}}.swagger-ui img{max-width:100%}.swagger-ui .cover{background-size:cover!important}.swagger-ui .contain{background-size:contain!important}@media screen and (min-width:30em){.swagger-ui .cover-ns{background-size:cover!important}.swagger-ui .contain-ns{background-size:contain!important}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .cover-m{background-size:cover!important}.swagger-ui .contain-m{background-size:contain!important}}@media screen and (min-width:60em){.swagger-ui .cover-l{background-size:cover!important}.swagger-ui .contain-l{background-size:contain!important}}.swagger-ui .bg-center{background-position:50%;background-repeat:no-repeat}.swagger-ui .bg-top{background-position:top;background-repeat:no-repeat}.swagger-ui .bg-right{background-position:100%;background-repeat:no-repeat}.swagger-ui .bg-bottom{background-position:bottom;background-repeat:no-repeat}.swagger-ui .bg-left{background-position:0;background-repeat:no-repeat}@media screen and (min-width:30em){.swagger-ui .bg-center-ns{background-position:50%;background-repeat:no-repeat}.swagger-ui .bg-top-ns{background-position:top;background-repeat:no-repeat}.swagger-ui .bg-right-ns{background-position:100%;background-repeat:no-repeat}.swagger-ui .bg-bottom-ns{background-position:bottom;background-repeat:no-repeat}.swagger-ui .bg-left-ns{background-position:0;background-repeat:no-repeat}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .bg-center-m{background-position:50%;background-repeat:no-repeat}.swagger-ui .bg-top-m{background-position:top;background-repeat:no-repeat}.swagger-ui .bg-right-m{background-position:100%;background-repeat:no-repeat}.swagger-ui .bg-bottom-m{background-position:bottom;background-repeat:no-repeat}.swagger-ui .bg-left-m{background-position:0;background-repeat:no-repeat}}@media screen and (min-width:60em){.swagger-ui .bg-center-l{background-position:50%;background-repeat:no-repeat}.swagger-ui .bg-top-l{background-position:top;background-repeat:no-repeat}.swagger-ui .bg-right-l{background-position:100%;background-repeat:no-repeat}.swagger-ui .bg-bottom-l{background-position:bottom;background-repeat:no-repeat}.swagger-ui .bg-left-l{background-position:0;background-repeat:no-repeat}}.swagger-ui .outline{outline:1px solid}.swagger-ui .outline-transparent{outline:1px solid transparent}.swagger-ui .outline-0{outline:0}@media screen and (min-width:30em){.swagger-ui .outline-ns{outline:1px solid}.swagger-ui .outline-transparent-ns{outline:1px solid transparent}.swagger-ui .outline-0-ns{outline:0}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .outline-m{outline:1px solid}.swagger-ui .outline-transparent-m{outline:1px solid transparent}.swagger-ui .outline-0-m{outline:0}}@media screen and (min-width:60em){.swagger-ui .outline-l{outline:1px solid}.swagger-ui .outline-transparent-l{outline:1px solid transparent}.swagger-ui .outline-0-l{outline:0}}.swagger-ui .ba{border-style:solid;border-width:1px}.swagger-ui .bt{border-top-style:solid;border-top-width:1px}.swagger-ui .br{border-right-style:solid;border-right-width:1px}.swagger-ui .bb{border-bottom-style:solid;border-bottom-width:1px}.swagger-ui .bl{border-left-style:solid;border-left-width:1px}.swagger-ui .bn{border-style:none;border-width:0}@media screen and (min-width:30em){.swagger-ui .ba-ns{border-style:solid;border-width:1px}.swagger-ui .bt-ns{border-top-style:solid;border-top-width:1px}.swagger-ui .br-ns{border-right-style:solid;border-right-width:1px}.swagger-ui .bb-ns{border-bottom-style:solid;border-bottom-width:1px}.swagger-ui .bl-ns{border-left-style:solid;border-left-width:1px}.swagger-ui .bn-ns{border-style:none;border-width:0}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .ba-m{border-style:solid;border-width:1px}.swagger-ui .bt-m{border-top-style:solid;border-top-width:1px}.swagger-ui .br-m{border-right-style:solid;border-right-width:1px}.swagger-ui .bb-m{border-bottom-style:solid;border-bottom-width:1px}.swagger-ui .bl-m{border-left-style:solid;border-left-width:1px}.swagger-ui .bn-m{border-style:none;border-width:0}}@media screen and (min-width:60em){.swagger-ui .ba-l{border-style:solid;border-width:1px}.swagger-ui .bt-l{border-top-style:solid;border-top-width:1px}.swagger-ui .br-l{border-right-style:solid;border-right-width:1px}.swagger-ui .bb-l{border-bottom-style:solid;border-bottom-width:1px}.swagger-ui .bl-l{border-left-style:solid;border-left-width:1px}.swagger-ui .bn-l{border-style:none;border-width:0}}.swagger-ui .b--black{border-color:#000}.swagger-ui .b--near-black{border-color:#111}.swagger-ui .b--dark-gray{border-color:#333}.swagger-ui .b--mid-gray{border-color:#555}.swagger-ui .b--gray{border-color:#777}.swagger-ui .b--silver{border-color:#999}.swagger-ui .b--light-silver{border-color:#aaa}.swagger-ui .b--moon-gray{border-color:#ccc}.swagger-ui .b--light-gray{border-color:#eee}.swagger-ui .b--near-white{border-color:#f4f4f4}.swagger-ui .b--white{border-color:#fff}.swagger-ui .b--white-90{border-color:hsla(0,0%,100%,.9)}.swagger-ui .b--white-80{border-color:hsla(0,0%,100%,.8)}.swagger-ui .b--white-70{border-color:hsla(0,0%,100%,.7)}.swagger-ui .b--white-60{border-color:hsla(0,0%,100%,.6)}.swagger-ui .b--white-50{border-color:hsla(0,0%,100%,.5)}.swagger-ui .b--white-40{border-color:hsla(0,0%,100%,.4)}.swagger-ui .b--white-30{border-color:hsla(0,0%,100%,.3)}.swagger-ui .b--white-20{border-color:hsla(0,0%,100%,.2)}.swagger-ui .b--white-10{border-color:hsla(0,0%,100%,.1)}.swagger-ui .b--white-05{border-color:hsla(0,0%,100%,.05)}.swagger-ui .b--white-025{border-color:hsla(0,0%,100%,.025)}.swagger-ui .b--white-0125{border-color:hsla(0,0%,100%,.013)}.swagger-ui .b--black-90{border-color:rgba(0,0,0,.9)}.swagger-ui .b--black-80{border-color:rgba(0,0,0,.8)}.swagger-ui .b--black-70{border-color:rgba(0,0,0,.7)}.swagger-ui .b--black-60{border-color:rgba(0,0,0,.6)}.swagger-ui .b--black-50{border-color:rgba(0,0,0,.5)}.swagger-ui .b--black-40{border-color:rgba(0,0,0,.4)}.swagger-ui .b--black-30{border-color:rgba(0,0,0,.3)}.swagger-ui .b--black-20{border-color:rgba(0,0,0,.2)}.swagger-ui .b--black-10{border-color:rgba(0,0,0,.1)}.swagger-ui .b--black-05{border-color:rgba(0,0,0,.05)}.swagger-ui .b--black-025{border-color:rgba(0,0,0,.025)}.swagger-ui .b--black-0125{border-color:rgba(0,0,0,.013)}.swagger-ui .b--dark-red{border-color:#e7040f}.swagger-ui .b--red{border-color:#ff4136}.swagger-ui .b--light-red{border-color:#ff725c}.swagger-ui .b--orange{border-color:#ff6300}.swagger-ui .b--gold{border-color:#ffb700}.swagger-ui .b--yellow{border-color:gold}.swagger-ui .b--light-yellow{border-color:#fbf1a9}.swagger-ui .b--purple{border-color:#5e2ca5}.swagger-ui .b--light-purple{border-color:#a463f2}.swagger-ui .b--dark-pink{border-color:#d5008f}.swagger-ui .b--hot-pink{border-color:#ff41b4}.swagger-ui .b--pink{border-color:#ff80cc}.swagger-ui .b--light-pink{border-color:#ffa3d7}.swagger-ui .b--dark-green{border-color:#137752}.swagger-ui .b--green{border-color:#19a974}.swagger-ui .b--light-green{border-color:#9eebcf}.swagger-ui .b--navy{border-color:#001b44}.swagger-ui .b--dark-blue{border-color:#00449e}.swagger-ui .b--blue{border-color:#357edd}.swagger-ui .b--light-blue{border-color:#96ccff}.swagger-ui .b--lightest-blue{border-color:#cdecff}.swagger-ui .b--washed-blue{border-color:#f6fffe}.swagger-ui .b--washed-green{border-color:#e8fdf5}.swagger-ui .b--washed-yellow{border-color:#fffceb}.swagger-ui .b--washed-red{border-color:#ffdfdf}.swagger-ui .b--transparent{border-color:transparent}.swagger-ui .b--inherit{border-color:inherit}.swagger-ui .br0{border-radius:0}.swagger-ui .br1{border-radius:.125rem}.swagger-ui .br2{border-radius:.25rem}.swagger-ui .br3{border-radius:.5rem}.swagger-ui .br4{border-radius:1rem}.swagger-ui .br-100{border-radius:100%}.swagger-ui .br-pill{border-radius:9999px}.swagger-ui .br--bottom{border-top-left-radius:0;border-top-right-radius:0}.swagger-ui .br--top{border-bottom-left-radius:0;border-bottom-right-radius:0}.swagger-ui .br--right{border-bottom-left-radius:0;border-top-left-radius:0}.swagger-ui .br--left{border-bottom-right-radius:0;border-top-right-radius:0}@media screen and (min-width:30em){.swagger-ui .br0-ns{border-radius:0}.swagger-ui .br1-ns{border-radius:.125rem}.swagger-ui .br2-ns{border-radius:.25rem}.swagger-ui .br3-ns{border-radius:.5rem}.swagger-ui .br4-ns{border-radius:1rem}.swagger-ui .br-100-ns{border-radius:100%}.swagger-ui .br-pill-ns{border-radius:9999px}.swagger-ui .br--bottom-ns{border-top-left-radius:0;border-top-right-radius:0}.swagger-ui .br--top-ns{border-bottom-left-radius:0;border-bottom-right-radius:0}.swagger-ui .br--right-ns{border-bottom-left-radius:0;border-top-left-radius:0}.swagger-ui .br--left-ns{border-bottom-right-radius:0;border-top-right-radius:0}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .br0-m{border-radius:0}.swagger-ui .br1-m{border-radius:.125rem}.swagger-ui .br2-m{border-radius:.25rem}.swagger-ui .br3-m{border-radius:.5rem}.swagger-ui .br4-m{border-radius:1rem}.swagger-ui .br-100-m{border-radius:100%}.swagger-ui .br-pill-m{border-radius:9999px}.swagger-ui .br--bottom-m{border-top-left-radius:0;border-top-right-radius:0}.swagger-ui .br--top-m{border-bottom-left-radius:0;border-bottom-right-radius:0}.swagger-ui .br--right-m{border-bottom-left-radius:0;border-top-left-radius:0}.swagger-ui .br--left-m{border-bottom-right-radius:0;border-top-right-radius:0}}@media screen and (min-width:60em){.swagger-ui .br0-l{border-radius:0}.swagger-ui .br1-l{border-radius:.125rem}.swagger-ui .br2-l{border-radius:.25rem}.swagger-ui .br3-l{border-radius:.5rem}.swagger-ui .br4-l{border-radius:1rem}.swagger-ui .br-100-l{border-radius:100%}.swagger-ui .br-pill-l{border-radius:9999px}.swagger-ui .br--bottom-l{border-top-left-radius:0;border-top-right-radius:0}.swagger-ui .br--top-l{border-bottom-left-radius:0;border-bottom-right-radius:0}.swagger-ui .br--right-l{border-bottom-left-radius:0;border-top-left-radius:0}.swagger-ui .br--left-l{border-bottom-right-radius:0;border-top-right-radius:0}}.swagger-ui .b--dotted{border-style:dotted}.swagger-ui .b--dashed{border-style:dashed}.swagger-ui .b--solid{border-style:solid}.swagger-ui .b--none{border-style:none}@media screen and (min-width:30em){.swagger-ui .b--dotted-ns{border-style:dotted}.swagger-ui .b--dashed-ns{border-style:dashed}.swagger-ui .b--solid-ns{border-style:solid}.swagger-ui .b--none-ns{border-style:none}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .b--dotted-m{border-style:dotted}.swagger-ui .b--dashed-m{border-style:dashed}.swagger-ui .b--solid-m{border-style:solid}.swagger-ui .b--none-m{border-style:none}}@media screen and (min-width:60em){.swagger-ui .b--dotted-l{border-style:dotted}.swagger-ui .b--dashed-l{border-style:dashed}.swagger-ui .b--solid-l{border-style:solid}.swagger-ui .b--none-l{border-style:none}}.swagger-ui .bw0{border-width:0}.swagger-ui .bw1{border-width:.125rem}.swagger-ui .bw2{border-width:.25rem}.swagger-ui .bw3{border-width:.5rem}.swagger-ui .bw4{border-width:1rem}.swagger-ui .bw5{border-width:2rem}.swagger-ui .bt-0{border-top-width:0}.swagger-ui .br-0{border-right-width:0}.swagger-ui .bb-0{border-bottom-width:0}.swagger-ui .bl-0{border-left-width:0}@media screen and (min-width:30em){.swagger-ui .bw0-ns{border-width:0}.swagger-ui .bw1-ns{border-width:.125rem}.swagger-ui .bw2-ns{border-width:.25rem}.swagger-ui .bw3-ns{border-width:.5rem}.swagger-ui .bw4-ns{border-width:1rem}.swagger-ui .bw5-ns{border-width:2rem}.swagger-ui .bt-0-ns{border-top-width:0}.swagger-ui .br-0-ns{border-right-width:0}.swagger-ui .bb-0-ns{border-bottom-width:0}.swagger-ui .bl-0-ns{border-left-width:0}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .bw0-m{border-width:0}.swagger-ui .bw1-m{border-width:.125rem}.swagger-ui .bw2-m{border-width:.25rem}.swagger-ui .bw3-m{border-width:.5rem}.swagger-ui .bw4-m{border-width:1rem}.swagger-ui .bw5-m{border-width:2rem}.swagger-ui .bt-0-m{border-top-width:0}.swagger-ui .br-0-m{border-right-width:0}.swagger-ui .bb-0-m{border-bottom-width:0}.swagger-ui .bl-0-m{border-left-width:0}}@media screen and (min-width:60em){.swagger-ui .bw0-l{border-width:0}.swagger-ui .bw1-l{border-width:.125rem}.swagger-ui .bw2-l{border-width:.25rem}.swagger-ui .bw3-l{border-width:.5rem}.swagger-ui .bw4-l{border-width:1rem}.swagger-ui .bw5-l{border-width:2rem}.swagger-ui .bt-0-l{border-top-width:0}.swagger-ui .br-0-l{border-right-width:0}.swagger-ui .bb-0-l{border-bottom-width:0}.swagger-ui .bl-0-l{border-left-width:0}}.swagger-ui .shadow-1{box-shadow:0 0 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-2{box-shadow:0 0 8px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-3{box-shadow:2px 2px 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-4{box-shadow:2px 2px 8px 0 rgba(0,0,0,.2)}.swagger-ui .shadow-5{box-shadow:4px 4px 8px 0 rgba(0,0,0,.2)}@media screen and (min-width:30em){.swagger-ui .shadow-1-ns{box-shadow:0 0 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-2-ns{box-shadow:0 0 8px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-3-ns{box-shadow:2px 2px 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-4-ns{box-shadow:2px 2px 8px 0 rgba(0,0,0,.2)}.swagger-ui .shadow-5-ns{box-shadow:4px 4px 8px 0 rgba(0,0,0,.2)}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .shadow-1-m{box-shadow:0 0 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-2-m{box-shadow:0 0 8px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-3-m{box-shadow:2px 2px 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-4-m{box-shadow:2px 2px 8px 0 rgba(0,0,0,.2)}.swagger-ui .shadow-5-m{box-shadow:4px 4px 8px 0 rgba(0,0,0,.2)}}@media screen and (min-width:60em){.swagger-ui .shadow-1-l{box-shadow:0 0 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-2-l{box-shadow:0 0 8px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-3-l{box-shadow:2px 2px 4px 2px rgba(0,0,0,.2)}.swagger-ui .shadow-4-l{box-shadow:2px 2px 8px 0 rgba(0,0,0,.2)}.swagger-ui .shadow-5-l{box-shadow:4px 4px 8px 0 rgba(0,0,0,.2)}}.swagger-ui .pre{overflow-x:auto;overflow-y:hidden;overflow:scroll}.swagger-ui .top-0{top:0}.swagger-ui .right-0{right:0}.swagger-ui .bottom-0{bottom:0}.swagger-ui .left-0{left:0}.swagger-ui .top-1{top:1rem}.swagger-ui .right-1{right:1rem}.swagger-ui .bottom-1{bottom:1rem}.swagger-ui .left-1{left:1rem}.swagger-ui .top-2{top:2rem}.swagger-ui .right-2{right:2rem}.swagger-ui .bottom-2{bottom:2rem}.swagger-ui .left-2{left:2rem}.swagger-ui .top--1{top:-1rem}.swagger-ui .right--1{right:-1rem}.swagger-ui .bottom--1{bottom:-1rem}.swagger-ui .left--1{left:-1rem}.swagger-ui .top--2{top:-2rem}.swagger-ui .right--2{right:-2rem}.swagger-ui .bottom--2{bottom:-2rem}.swagger-ui .left--2{left:-2rem}.swagger-ui .absolute--fill{bottom:0;left:0;right:0;top:0}@media screen and (min-width:30em){.swagger-ui .top-0-ns{top:0}.swagger-ui .left-0-ns{left:0}.swagger-ui .right-0-ns{right:0}.swagger-ui .bottom-0-ns{bottom:0}.swagger-ui .top-1-ns{top:1rem}.swagger-ui .left-1-ns{left:1rem}.swagger-ui .right-1-ns{right:1rem}.swagger-ui .bottom-1-ns{bottom:1rem}.swagger-ui .top-2-ns{top:2rem}.swagger-ui .left-2-ns{left:2rem}.swagger-ui .right-2-ns{right:2rem}.swagger-ui .bottom-2-ns{bottom:2rem}.swagger-ui .top--1-ns{top:-1rem}.swagger-ui .right--1-ns{right:-1rem}.swagger-ui .bottom--1-ns{bottom:-1rem}.swagger-ui .left--1-ns{left:-1rem}.swagger-ui .top--2-ns{top:-2rem}.swagger-ui .right--2-ns{right:-2rem}.swagger-ui .bottom--2-ns{bottom:-2rem}.swagger-ui .left--2-ns{left:-2rem}.swagger-ui .absolute--fill-ns{bottom:0;left:0;right:0;top:0}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .top-0-m{top:0}.swagger-ui .left-0-m{left:0}.swagger-ui .right-0-m{right:0}.swagger-ui .bottom-0-m{bottom:0}.swagger-ui .top-1-m{top:1rem}.swagger-ui .left-1-m{left:1rem}.swagger-ui .right-1-m{right:1rem}.swagger-ui .bottom-1-m{bottom:1rem}.swagger-ui .top-2-m{top:2rem}.swagger-ui .left-2-m{left:2rem}.swagger-ui .right-2-m{right:2rem}.swagger-ui .bottom-2-m{bottom:2rem}.swagger-ui .top--1-m{top:-1rem}.swagger-ui .right--1-m{right:-1rem}.swagger-ui .bottom--1-m{bottom:-1rem}.swagger-ui .left--1-m{left:-1rem}.swagger-ui .top--2-m{top:-2rem}.swagger-ui .right--2-m{right:-2rem}.swagger-ui .bottom--2-m{bottom:-2rem}.swagger-ui .left--2-m{left:-2rem}.swagger-ui .absolute--fill-m{bottom:0;left:0;right:0;top:0}}@media screen and (min-width:60em){.swagger-ui .top-0-l{top:0}.swagger-ui .left-0-l{left:0}.swagger-ui .right-0-l{right:0}.swagger-ui .bottom-0-l{bottom:0}.swagger-ui .top-1-l{top:1rem}.swagger-ui .left-1-l{left:1rem}.swagger-ui .right-1-l{right:1rem}.swagger-ui .bottom-1-l{bottom:1rem}.swagger-ui .top-2-l{top:2rem}.swagger-ui .left-2-l{left:2rem}.swagger-ui .right-2-l{right:2rem}.swagger-ui .bottom-2-l{bottom:2rem}.swagger-ui .top--1-l{top:-1rem}.swagger-ui .right--1-l{right:-1rem}.swagger-ui .bottom--1-l{bottom:-1rem}.swagger-ui .left--1-l{left:-1rem}.swagger-ui .top--2-l{top:-2rem}.swagger-ui .right--2-l{right:-2rem}.swagger-ui .bottom--2-l{bottom:-2rem}.swagger-ui .left--2-l{left:-2rem}.swagger-ui .absolute--fill-l{bottom:0;left:0;right:0;top:0}}.swagger-ui .cf:after,.swagger-ui .cf:before{content:" ";display:table}.swagger-ui .cf:after{clear:both}.swagger-ui .cf{zoom:1}.swagger-ui .cl{clear:left}.swagger-ui .cr{clear:right}.swagger-ui .cb{clear:both}.swagger-ui .cn{clear:none}@media screen and (min-width:30em){.swagger-ui .cl-ns{clear:left}.swagger-ui .cr-ns{clear:right}.swagger-ui .cb-ns{clear:both}.swagger-ui .cn-ns{clear:none}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .cl-m{clear:left}.swagger-ui .cr-m{clear:right}.swagger-ui .cb-m{clear:both}.swagger-ui .cn-m{clear:none}}@media screen and (min-width:60em){.swagger-ui .cl-l{clear:left}.swagger-ui .cr-l{clear:right}.swagger-ui .cb-l{clear:both}.swagger-ui .cn-l{clear:none}}.swagger-ui .flex{display:flex}.swagger-ui .inline-flex{display:inline-flex}.swagger-ui .flex-auto{flex:1 1 auto;min-height:0;min-width:0}.swagger-ui .flex-none{flex:none}.swagger-ui .flex-column{flex-direction:column}.swagger-ui .flex-row{flex-direction:row}.swagger-ui .flex-wrap{flex-wrap:wrap}.swagger-ui .flex-nowrap{flex-wrap:nowrap}.swagger-ui .flex-wrap-reverse{flex-wrap:wrap-reverse}.swagger-ui .flex-column-reverse{flex-direction:column-reverse}.swagger-ui .flex-row-reverse{flex-direction:row-reverse}.swagger-ui .items-start{align-items:flex-start}.swagger-ui .items-end{align-items:flex-end}.swagger-ui .items-center{align-items:center}.swagger-ui .items-baseline{align-items:baseline}.swagger-ui .items-stretch{align-items:stretch}.swagger-ui .self-start{align-self:flex-start}.swagger-ui .self-end{align-self:flex-end}.swagger-ui .self-center{align-self:center}.swagger-ui .self-baseline{align-self:baseline}.swagger-ui .self-stretch{align-self:stretch}.swagger-ui .justify-start{justify-content:flex-start}.swagger-ui .justify-end{justify-content:flex-end}.swagger-ui .justify-center{justify-content:center}.swagger-ui .justify-between{justify-content:space-between}.swagger-ui .justify-around{justify-content:space-around}.swagger-ui .content-start{align-content:flex-start}.swagger-ui .content-end{align-content:flex-end}.swagger-ui .content-center{align-content:center}.swagger-ui .content-between{align-content:space-between}.swagger-ui .content-around{align-content:space-around}.swagger-ui .content-stretch{align-content:stretch}.swagger-ui .order-0{order:0}.swagger-ui .order-1{order:1}.swagger-ui .order-2{order:2}.swagger-ui .order-3{order:3}.swagger-ui .order-4{order:4}.swagger-ui .order-5{order:5}.swagger-ui .order-6{order:6}.swagger-ui .order-7{order:7}.swagger-ui .order-8{order:8}.swagger-ui .order-last{order:99999}.swagger-ui .flex-grow-0{flex-grow:0}.swagger-ui .flex-grow-1{flex-grow:1}.swagger-ui .flex-shrink-0{flex-shrink:0}.swagger-ui .flex-shrink-1{flex-shrink:1}@media screen and (min-width:30em){.swagger-ui .flex-ns{display:flex}.swagger-ui .inline-flex-ns{display:inline-flex}.swagger-ui .flex-auto-ns{flex:1 1 auto;min-height:0;min-width:0}.swagger-ui .flex-none-ns{flex:none}.swagger-ui .flex-column-ns{flex-direction:column}.swagger-ui .flex-row-ns{flex-direction:row}.swagger-ui .flex-wrap-ns{flex-wrap:wrap}.swagger-ui .flex-nowrap-ns{flex-wrap:nowrap}.swagger-ui .flex-wrap-reverse-ns{flex-wrap:wrap-reverse}.swagger-ui .flex-column-reverse-ns{flex-direction:column-reverse}.swagger-ui .flex-row-reverse-ns{flex-direction:row-reverse}.swagger-ui .items-start-ns{align-items:flex-start}.swagger-ui .items-end-ns{align-items:flex-end}.swagger-ui .items-center-ns{align-items:center}.swagger-ui .items-baseline-ns{align-items:baseline}.swagger-ui .items-stretch-ns{align-items:stretch}.swagger-ui .self-start-ns{align-self:flex-start}.swagger-ui .self-end-ns{align-self:flex-end}.swagger-ui .self-center-ns{align-self:center}.swagger-ui .self-baseline-ns{align-self:baseline}.swagger-ui .self-stretch-ns{align-self:stretch}.swagger-ui .justify-start-ns{justify-content:flex-start}.swagger-ui .justify-end-ns{justify-content:flex-end}.swagger-ui .justify-center-ns{justify-content:center}.swagger-ui .justify-between-ns{justify-content:space-between}.swagger-ui .justify-around-ns{justify-content:space-around}.swagger-ui .content-start-ns{align-content:flex-start}.swagger-ui .content-end-ns{align-content:flex-end}.swagger-ui .content-center-ns{align-content:center}.swagger-ui .content-between-ns{align-content:space-between}.swagger-ui .content-around-ns{align-content:space-around}.swagger-ui .content-stretch-ns{align-content:stretch}.swagger-ui .order-0-ns{order:0}.swagger-ui .order-1-ns{order:1}.swagger-ui .order-2-ns{order:2}.swagger-ui .order-3-ns{order:3}.swagger-ui .order-4-ns{order:4}.swagger-ui .order-5-ns{order:5}.swagger-ui .order-6-ns{order:6}.swagger-ui .order-7-ns{order:7}.swagger-ui .order-8-ns{order:8}.swagger-ui .order-last-ns{order:99999}.swagger-ui .flex-grow-0-ns{flex-grow:0}.swagger-ui .flex-grow-1-ns{flex-grow:1}.swagger-ui .flex-shrink-0-ns{flex-shrink:0}.swagger-ui .flex-shrink-1-ns{flex-shrink:1}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .flex-m{display:flex}.swagger-ui .inline-flex-m{display:inline-flex}.swagger-ui .flex-auto-m{flex:1 1 auto;min-height:0;min-width:0}.swagger-ui .flex-none-m{flex:none}.swagger-ui .flex-column-m{flex-direction:column}.swagger-ui .flex-row-m{flex-direction:row}.swagger-ui .flex-wrap-m{flex-wrap:wrap}.swagger-ui .flex-nowrap-m{flex-wrap:nowrap}.swagger-ui .flex-wrap-reverse-m{flex-wrap:wrap-reverse}.swagger-ui .flex-column-reverse-m{flex-direction:column-reverse}.swagger-ui .flex-row-reverse-m{flex-direction:row-reverse}.swagger-ui .items-start-m{align-items:flex-start}.swagger-ui .items-end-m{align-items:flex-end}.swagger-ui .items-center-m{align-items:center}.swagger-ui .items-baseline-m{align-items:baseline}.swagger-ui .items-stretch-m{align-items:stretch}.swagger-ui .self-start-m{align-self:flex-start}.swagger-ui .self-end-m{align-self:flex-end}.swagger-ui .self-center-m{align-self:center}.swagger-ui .self-baseline-m{align-self:baseline}.swagger-ui .self-stretch-m{align-self:stretch}.swagger-ui .justify-start-m{justify-content:flex-start}.swagger-ui .justify-end-m{justify-content:flex-end}.swagger-ui .justify-center-m{justify-content:center}.swagger-ui .justify-between-m{justify-content:space-between}.swagger-ui .justify-around-m{justify-content:space-around}.swagger-ui .content-start-m{align-content:flex-start}.swagger-ui .content-end-m{align-content:flex-end}.swagger-ui .content-center-m{align-content:center}.swagger-ui .content-between-m{align-content:space-between}.swagger-ui .content-around-m{align-content:space-around}.swagger-ui .content-stretch-m{align-content:stretch}.swagger-ui .order-0-m{order:0}.swagger-ui .order-1-m{order:1}.swagger-ui .order-2-m{order:2}.swagger-ui .order-3-m{order:3}.swagger-ui .order-4-m{order:4}.swagger-ui .order-5-m{order:5}.swagger-ui .order-6-m{order:6}.swagger-ui .order-7-m{order:7}.swagger-ui .order-8-m{order:8}.swagger-ui .order-last-m{order:99999}.swagger-ui .flex-grow-0-m{flex-grow:0}.swagger-ui .flex-grow-1-m{flex-grow:1}.swagger-ui .flex-shrink-0-m{flex-shrink:0}.swagger-ui .flex-shrink-1-m{flex-shrink:1}}@media screen and (min-width:60em){.swagger-ui .flex-l{display:flex}.swagger-ui .inline-flex-l{display:inline-flex}.swagger-ui .flex-auto-l{flex:1 1 auto;min-height:0;min-width:0}.swagger-ui .flex-none-l{flex:none}.swagger-ui .flex-column-l{flex-direction:column}.swagger-ui .flex-row-l{flex-direction:row}.swagger-ui .flex-wrap-l{flex-wrap:wrap}.swagger-ui .flex-nowrap-l{flex-wrap:nowrap}.swagger-ui .flex-wrap-reverse-l{flex-wrap:wrap-reverse}.swagger-ui .flex-column-reverse-l{flex-direction:column-reverse}.swagger-ui .flex-row-reverse-l{flex-direction:row-reverse}.swagger-ui .items-start-l{align-items:flex-start}.swagger-ui .items-end-l{align-items:flex-end}.swagger-ui .items-center-l{align-items:center}.swagger-ui .items-baseline-l{align-items:baseline}.swagger-ui .items-stretch-l{align-items:stretch}.swagger-ui .self-start-l{align-self:flex-start}.swagger-ui .self-end-l{align-self:flex-end}.swagger-ui .self-center-l{align-self:center}.swagger-ui .self-baseline-l{align-self:baseline}.swagger-ui .self-stretch-l{align-self:stretch}.swagger-ui .justify-start-l{justify-content:flex-start}.swagger-ui .justify-end-l{justify-content:flex-end}.swagger-ui .justify-center-l{justify-content:center}.swagger-ui .justify-between-l{justify-content:space-between}.swagger-ui .justify-around-l{justify-content:space-around}.swagger-ui .content-start-l{align-content:flex-start}.swagger-ui .content-end-l{align-content:flex-end}.swagger-ui .content-center-l{align-content:center}.swagger-ui .content-between-l{align-content:space-between}.swagger-ui .content-around-l{align-content:space-around}.swagger-ui .content-stretch-l{align-content:stretch}.swagger-ui .order-0-l{order:0}.swagger-ui .order-1-l{order:1}.swagger-ui .order-2-l{order:2}.swagger-ui .order-3-l{order:3}.swagger-ui .order-4-l{order:4}.swagger-ui .order-5-l{order:5}.swagger-ui .order-6-l{order:6}.swagger-ui .order-7-l{order:7}.swagger-ui .order-8-l{order:8}.swagger-ui .order-last-l{order:99999}.swagger-ui .flex-grow-0-l{flex-grow:0}.swagger-ui .flex-grow-1-l{flex-grow:1}.swagger-ui .flex-shrink-0-l{flex-shrink:0}.swagger-ui .flex-shrink-1-l{flex-shrink:1}}.swagger-ui .dn{display:none}.swagger-ui .di{display:inline}.swagger-ui .db{display:block}.swagger-ui .dib{display:inline-block}.swagger-ui .dit{display:inline-table}.swagger-ui .dt{display:table}.swagger-ui .dtc{display:table-cell}.swagger-ui .dt-row{display:table-row}.swagger-ui .dt-row-group{display:table-row-group}.swagger-ui .dt-column{display:table-column}.swagger-ui .dt-column-group{display:table-column-group}.swagger-ui .dt--fixed{table-layout:fixed;width:100%}@media screen and (min-width:30em){.swagger-ui .dn-ns{display:none}.swagger-ui .di-ns{display:inline}.swagger-ui .db-ns{display:block}.swagger-ui .dib-ns{display:inline-block}.swagger-ui .dit-ns{display:inline-table}.swagger-ui .dt-ns{display:table}.swagger-ui .dtc-ns{display:table-cell}.swagger-ui .dt-row-ns{display:table-row}.swagger-ui .dt-row-group-ns{display:table-row-group}.swagger-ui .dt-column-ns{display:table-column}.swagger-ui .dt-column-group-ns{display:table-column-group}.swagger-ui .dt--fixed-ns{table-layout:fixed;width:100%}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .dn-m{display:none}.swagger-ui .di-m{display:inline}.swagger-ui .db-m{display:block}.swagger-ui .dib-m{display:inline-block}.swagger-ui .dit-m{display:inline-table}.swagger-ui .dt-m{display:table}.swagger-ui .dtc-m{display:table-cell}.swagger-ui .dt-row-m{display:table-row}.swagger-ui .dt-row-group-m{display:table-row-group}.swagger-ui .dt-column-m{display:table-column}.swagger-ui .dt-column-group-m{display:table-column-group}.swagger-ui .dt--fixed-m{table-layout:fixed;width:100%}}@media screen and (min-width:60em){.swagger-ui .dn-l{display:none}.swagger-ui .di-l{display:inline}.swagger-ui .db-l{display:block}.swagger-ui .dib-l{display:inline-block}.swagger-ui .dit-l{display:inline-table}.swagger-ui .dt-l{display:table}.swagger-ui .dtc-l{display:table-cell}.swagger-ui .dt-row-l{display:table-row}.swagger-ui .dt-row-group-l{display:table-row-group}.swagger-ui .dt-column-l{display:table-column}.swagger-ui .dt-column-group-l{display:table-column-group}.swagger-ui .dt--fixed-l{table-layout:fixed;width:100%}}.swagger-ui .fl{_display:inline;float:left}.swagger-ui .fr{_display:inline;float:right}.swagger-ui .fn{float:none}@media screen and (min-width:30em){.swagger-ui .fl-ns{_display:inline;float:left}.swagger-ui .fr-ns{_display:inline;float:right}.swagger-ui .fn-ns{float:none}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .fl-m{_display:inline;float:left}.swagger-ui .fr-m{_display:inline;float:right}.swagger-ui .fn-m{float:none}}@media screen and (min-width:60em){.swagger-ui .fl-l{_display:inline;float:left}.swagger-ui .fr-l{_display:inline;float:right}.swagger-ui .fn-l{float:none}}.swagger-ui .sans-serif{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.swagger-ui .serif{font-family:georgia,serif}.swagger-ui .system-sans-serif{font-family:sans-serif}.swagger-ui .system-serif{font-family:serif}.swagger-ui .code,.swagger-ui code{font-family:Consolas,monaco,monospace}.swagger-ui .courier{font-family:Courier Next,courier,monospace}.swagger-ui .helvetica{font-family:helvetica neue,helvetica,sans-serif}.swagger-ui .avenir{font-family:avenir next,avenir,sans-serif}.swagger-ui .athelas{font-family:athelas,georgia,serif}.swagger-ui .georgia{font-family:georgia,serif}.swagger-ui .times{font-family:times,serif}.swagger-ui .bodoni{font-family:Bodoni MT,serif}.swagger-ui .calisto{font-family:Calisto MT,serif}.swagger-ui .garamond{font-family:garamond,serif}.swagger-ui .baskerville{font-family:baskerville,serif}.swagger-ui .i{font-style:italic}.swagger-ui .fs-normal{font-style:normal}@media screen and (min-width:30em){.swagger-ui .i-ns{font-style:italic}.swagger-ui .fs-normal-ns{font-style:normal}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .i-m{font-style:italic}.swagger-ui .fs-normal-m{font-style:normal}}@media screen and (min-width:60em){.swagger-ui .i-l{font-style:italic}.swagger-ui .fs-normal-l{font-style:normal}}.swagger-ui .normal{font-weight:400}.swagger-ui .b{font-weight:700}.swagger-ui .fw1{font-weight:100}.swagger-ui .fw2{font-weight:200}.swagger-ui .fw3{font-weight:300}.swagger-ui .fw4{font-weight:400}.swagger-ui .fw5{font-weight:500}.swagger-ui .fw6{font-weight:600}.swagger-ui .fw7{font-weight:700}.swagger-ui .fw8{font-weight:800}.swagger-ui .fw9{font-weight:900}@media screen and (min-width:30em){.swagger-ui .normal-ns{font-weight:400}.swagger-ui .b-ns{font-weight:700}.swagger-ui .fw1-ns{font-weight:100}.swagger-ui .fw2-ns{font-weight:200}.swagger-ui .fw3-ns{font-weight:300}.swagger-ui .fw4-ns{font-weight:400}.swagger-ui .fw5-ns{font-weight:500}.swagger-ui .fw6-ns{font-weight:600}.swagger-ui .fw7-ns{font-weight:700}.swagger-ui .fw8-ns{font-weight:800}.swagger-ui .fw9-ns{font-weight:900}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .normal-m{font-weight:400}.swagger-ui .b-m{font-weight:700}.swagger-ui .fw1-m{font-weight:100}.swagger-ui .fw2-m{font-weight:200}.swagger-ui .fw3-m{font-weight:300}.swagger-ui .fw4-m{font-weight:400}.swagger-ui .fw5-m{font-weight:500}.swagger-ui .fw6-m{font-weight:600}.swagger-ui .fw7-m{font-weight:700}.swagger-ui .fw8-m{font-weight:800}.swagger-ui .fw9-m{font-weight:900}}@media screen and (min-width:60em){.swagger-ui .normal-l{font-weight:400}.swagger-ui .b-l{font-weight:700}.swagger-ui .fw1-l{font-weight:100}.swagger-ui .fw2-l{font-weight:200}.swagger-ui .fw3-l{font-weight:300}.swagger-ui .fw4-l{font-weight:400}.swagger-ui .fw5-l{font-weight:500}.swagger-ui .fw6-l{font-weight:600}.swagger-ui .fw7-l{font-weight:700}.swagger-ui .fw8-l{font-weight:800}.swagger-ui .fw9-l{font-weight:900}}.swagger-ui .input-reset{-webkit-appearance:none;-moz-appearance:none}.swagger-ui .button-reset::-moz-focus-inner,.swagger-ui .input-reset::-moz-focus-inner{border:0;padding:0}.swagger-ui .h1{height:1rem}.swagger-ui .h2{height:2rem}.swagger-ui .h3{height:4rem}.swagger-ui .h4{height:8rem}.swagger-ui .h5{height:16rem}.swagger-ui .h-25{height:25%}.swagger-ui .h-50{height:50%}.swagger-ui .h-75{height:75%}.swagger-ui .h-100{height:100%}.swagger-ui .min-h-100{min-height:100%}.swagger-ui .vh-25{height:25vh}.swagger-ui .vh-50{height:50vh}.swagger-ui .vh-75{height:75vh}.swagger-ui .vh-100{height:100vh}.swagger-ui .min-vh-100{min-height:100vh}.swagger-ui .h-auto{height:auto}.swagger-ui .h-inherit{height:inherit}@media screen and (min-width:30em){.swagger-ui .h1-ns{height:1rem}.swagger-ui .h2-ns{height:2rem}.swagger-ui .h3-ns{height:4rem}.swagger-ui .h4-ns{height:8rem}.swagger-ui .h5-ns{height:16rem}.swagger-ui .h-25-ns{height:25%}.swagger-ui .h-50-ns{height:50%}.swagger-ui .h-75-ns{height:75%}.swagger-ui .h-100-ns{height:100%}.swagger-ui .min-h-100-ns{min-height:100%}.swagger-ui .vh-25-ns{height:25vh}.swagger-ui .vh-50-ns{height:50vh}.swagger-ui .vh-75-ns{height:75vh}.swagger-ui .vh-100-ns{height:100vh}.swagger-ui .min-vh-100-ns{min-height:100vh}.swagger-ui .h-auto-ns{height:auto}.swagger-ui .h-inherit-ns{height:inherit}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .h1-m{height:1rem}.swagger-ui .h2-m{height:2rem}.swagger-ui .h3-m{height:4rem}.swagger-ui .h4-m{height:8rem}.swagger-ui .h5-m{height:16rem}.swagger-ui .h-25-m{height:25%}.swagger-ui .h-50-m{height:50%}.swagger-ui .h-75-m{height:75%}.swagger-ui .h-100-m{height:100%}.swagger-ui .min-h-100-m{min-height:100%}.swagger-ui .vh-25-m{height:25vh}.swagger-ui .vh-50-m{height:50vh}.swagger-ui .vh-75-m{height:75vh}.swagger-ui .vh-100-m{height:100vh}.swagger-ui .min-vh-100-m{min-height:100vh}.swagger-ui .h-auto-m{height:auto}.swagger-ui .h-inherit-m{height:inherit}}@media screen and (min-width:60em){.swagger-ui .h1-l{height:1rem}.swagger-ui .h2-l{height:2rem}.swagger-ui .h3-l{height:4rem}.swagger-ui .h4-l{height:8rem}.swagger-ui .h5-l{height:16rem}.swagger-ui .h-25-l{height:25%}.swagger-ui .h-50-l{height:50%}.swagger-ui .h-75-l{height:75%}.swagger-ui .h-100-l{height:100%}.swagger-ui .min-h-100-l{min-height:100%}.swagger-ui .vh-25-l{height:25vh}.swagger-ui .vh-50-l{height:50vh}.swagger-ui .vh-75-l{height:75vh}.swagger-ui .vh-100-l{height:100vh}.swagger-ui .min-vh-100-l{min-height:100vh}.swagger-ui .h-auto-l{height:auto}.swagger-ui .h-inherit-l{height:inherit}}.swagger-ui .tracked{letter-spacing:.1em}.swagger-ui .tracked-tight{letter-spacing:-.05em}.swagger-ui .tracked-mega{letter-spacing:.25em}@media screen and (min-width:30em){.swagger-ui .tracked-ns{letter-spacing:.1em}.swagger-ui .tracked-tight-ns{letter-spacing:-.05em}.swagger-ui .tracked-mega-ns{letter-spacing:.25em}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .tracked-m{letter-spacing:.1em}.swagger-ui .tracked-tight-m{letter-spacing:-.05em}.swagger-ui .tracked-mega-m{letter-spacing:.25em}}@media screen and (min-width:60em){.swagger-ui .tracked-l{letter-spacing:.1em}.swagger-ui .tracked-tight-l{letter-spacing:-.05em}.swagger-ui .tracked-mega-l{letter-spacing:.25em}}.swagger-ui .lh-solid{line-height:1}.swagger-ui .lh-title{line-height:1.25}.swagger-ui .lh-copy{line-height:1.5}@media screen and (min-width:30em){.swagger-ui .lh-solid-ns{line-height:1}.swagger-ui .lh-title-ns{line-height:1.25}.swagger-ui .lh-copy-ns{line-height:1.5}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .lh-solid-m{line-height:1}.swagger-ui .lh-title-m{line-height:1.25}.swagger-ui .lh-copy-m{line-height:1.5}}@media screen and (min-width:60em){.swagger-ui .lh-solid-l{line-height:1}.swagger-ui .lh-title-l{line-height:1.25}.swagger-ui .lh-copy-l{line-height:1.5}}.swagger-ui .link{-webkit-text-decoration:none;text-decoration:none}.swagger-ui .link,.swagger-ui .link:active,.swagger-ui .link:focus,.swagger-ui .link:hover,.swagger-ui .link:link,.swagger-ui .link:visited{transition:color .15s ease-in}.swagger-ui .link:focus{outline:1px dotted currentColor}.swagger-ui .list{list-style-type:none}.swagger-ui .mw-100{max-width:100%}.swagger-ui .mw1{max-width:1rem}.swagger-ui .mw2{max-width:2rem}.swagger-ui .mw3{max-width:4rem}.swagger-ui .mw4{max-width:8rem}.swagger-ui .mw5{max-width:16rem}.swagger-ui .mw6{max-width:32rem}.swagger-ui .mw7{max-width:48rem}.swagger-ui .mw8{max-width:64rem}.swagger-ui .mw9{max-width:96rem}.swagger-ui .mw-none{max-width:none}@media screen and (min-width:30em){.swagger-ui .mw-100-ns{max-width:100%}.swagger-ui .mw1-ns{max-width:1rem}.swagger-ui .mw2-ns{max-width:2rem}.swagger-ui .mw3-ns{max-width:4rem}.swagger-ui .mw4-ns{max-width:8rem}.swagger-ui .mw5-ns{max-width:16rem}.swagger-ui .mw6-ns{max-width:32rem}.swagger-ui .mw7-ns{max-width:48rem}.swagger-ui .mw8-ns{max-width:64rem}.swagger-ui .mw9-ns{max-width:96rem}.swagger-ui .mw-none-ns{max-width:none}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .mw-100-m{max-width:100%}.swagger-ui .mw1-m{max-width:1rem}.swagger-ui .mw2-m{max-width:2rem}.swagger-ui .mw3-m{max-width:4rem}.swagger-ui .mw4-m{max-width:8rem}.swagger-ui .mw5-m{max-width:16rem}.swagger-ui .mw6-m{max-width:32rem}.swagger-ui .mw7-m{max-width:48rem}.swagger-ui .mw8-m{max-width:64rem}.swagger-ui .mw9-m{max-width:96rem}.swagger-ui .mw-none-m{max-width:none}}@media screen and (min-width:60em){.swagger-ui .mw-100-l{max-width:100%}.swagger-ui .mw1-l{max-width:1rem}.swagger-ui .mw2-l{max-width:2rem}.swagger-ui .mw3-l{max-width:4rem}.swagger-ui .mw4-l{max-width:8rem}.swagger-ui .mw5-l{max-width:16rem}.swagger-ui .mw6-l{max-width:32rem}.swagger-ui .mw7-l{max-width:48rem}.swagger-ui .mw8-l{max-width:64rem}.swagger-ui .mw9-l{max-width:96rem}.swagger-ui .mw-none-l{max-width:none}}.swagger-ui .w1{width:1rem}.swagger-ui .w2{width:2rem}.swagger-ui .w3{width:4rem}.swagger-ui .w4{width:8rem}.swagger-ui .w5{width:16rem}.swagger-ui .w-10{width:10%}.swagger-ui .w-20{width:20%}.swagger-ui .w-25{width:25%}.swagger-ui .w-30{width:30%}.swagger-ui .w-33{width:33%}.swagger-ui .w-34{width:34%}.swagger-ui .w-40{width:40%}.swagger-ui .w-50{width:50%}.swagger-ui .w-60{width:60%}.swagger-ui .w-70{width:70%}.swagger-ui .w-75{width:75%}.swagger-ui .w-80{width:80%}.swagger-ui .w-90{width:90%}.swagger-ui .w-100{width:100%}.swagger-ui .w-third{width:33.3333333333%}.swagger-ui .w-two-thirds{width:66.6666666667%}.swagger-ui .w-auto{width:auto}@media screen and (min-width:30em){.swagger-ui .w1-ns{width:1rem}.swagger-ui .w2-ns{width:2rem}.swagger-ui .w3-ns{width:4rem}.swagger-ui .w4-ns{width:8rem}.swagger-ui .w5-ns{width:16rem}.swagger-ui .w-10-ns{width:10%}.swagger-ui .w-20-ns{width:20%}.swagger-ui .w-25-ns{width:25%}.swagger-ui .w-30-ns{width:30%}.swagger-ui .w-33-ns{width:33%}.swagger-ui .w-34-ns{width:34%}.swagger-ui .w-40-ns{width:40%}.swagger-ui .w-50-ns{width:50%}.swagger-ui .w-60-ns{width:60%}.swagger-ui .w-70-ns{width:70%}.swagger-ui .w-75-ns{width:75%}.swagger-ui .w-80-ns{width:80%}.swagger-ui .w-90-ns{width:90%}.swagger-ui .w-100-ns{width:100%}.swagger-ui .w-third-ns{width:33.3333333333%}.swagger-ui .w-two-thirds-ns{width:66.6666666667%}.swagger-ui .w-auto-ns{width:auto}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .w1-m{width:1rem}.swagger-ui .w2-m{width:2rem}.swagger-ui .w3-m{width:4rem}.swagger-ui .w4-m{width:8rem}.swagger-ui .w5-m{width:16rem}.swagger-ui .w-10-m{width:10%}.swagger-ui .w-20-m{width:20%}.swagger-ui .w-25-m{width:25%}.swagger-ui .w-30-m{width:30%}.swagger-ui .w-33-m{width:33%}.swagger-ui .w-34-m{width:34%}.swagger-ui .w-40-m{width:40%}.swagger-ui .w-50-m{width:50%}.swagger-ui .w-60-m{width:60%}.swagger-ui .w-70-m{width:70%}.swagger-ui .w-75-m{width:75%}.swagger-ui .w-80-m{width:80%}.swagger-ui .w-90-m{width:90%}.swagger-ui .w-100-m{width:100%}.swagger-ui .w-third-m{width:33.3333333333%}.swagger-ui .w-two-thirds-m{width:66.6666666667%}.swagger-ui .w-auto-m{width:auto}}@media screen and (min-width:60em){.swagger-ui .w1-l{width:1rem}.swagger-ui .w2-l{width:2rem}.swagger-ui .w3-l{width:4rem}.swagger-ui .w4-l{width:8rem}.swagger-ui .w5-l{width:16rem}.swagger-ui .w-10-l{width:10%}.swagger-ui .w-20-l{width:20%}.swagger-ui .w-25-l{width:25%}.swagger-ui .w-30-l{width:30%}.swagger-ui .w-33-l{width:33%}.swagger-ui .w-34-l{width:34%}.swagger-ui .w-40-l{width:40%}.swagger-ui .w-50-l{width:50%}.swagger-ui .w-60-l{width:60%}.swagger-ui .w-70-l{width:70%}.swagger-ui .w-75-l{width:75%}.swagger-ui .w-80-l{width:80%}.swagger-ui .w-90-l{width:90%}.swagger-ui .w-100-l{width:100%}.swagger-ui .w-third-l{width:33.3333333333%}.swagger-ui .w-two-thirds-l{width:66.6666666667%}.swagger-ui .w-auto-l{width:auto}}.swagger-ui .overflow-visible{overflow:visible}.swagger-ui .overflow-hidden{overflow:hidden}.swagger-ui .overflow-scroll{overflow:scroll}.swagger-ui .overflow-auto{overflow:auto}.swagger-ui .overflow-x-visible{overflow-x:visible}.swagger-ui .overflow-x-hidden{overflow-x:hidden}.swagger-ui .overflow-x-scroll{overflow-x:scroll}.swagger-ui .overflow-x-auto{overflow-x:auto}.swagger-ui .overflow-y-visible{overflow-y:visible}.swagger-ui .overflow-y-hidden{overflow-y:hidden}.swagger-ui .overflow-y-scroll{overflow-y:scroll}.swagger-ui .overflow-y-auto{overflow-y:auto}@media screen and (min-width:30em){.swagger-ui .overflow-visible-ns{overflow:visible}.swagger-ui .overflow-hidden-ns{overflow:hidden}.swagger-ui .overflow-scroll-ns{overflow:scroll}.swagger-ui .overflow-auto-ns{overflow:auto}.swagger-ui .overflow-x-visible-ns{overflow-x:visible}.swagger-ui .overflow-x-hidden-ns{overflow-x:hidden}.swagger-ui .overflow-x-scroll-ns{overflow-x:scroll}.swagger-ui .overflow-x-auto-ns{overflow-x:auto}.swagger-ui .overflow-y-visible-ns{overflow-y:visible}.swagger-ui .overflow-y-hidden-ns{overflow-y:hidden}.swagger-ui .overflow-y-scroll-ns{overflow-y:scroll}.swagger-ui .overflow-y-auto-ns{overflow-y:auto}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .overflow-visible-m{overflow:visible}.swagger-ui .overflow-hidden-m{overflow:hidden}.swagger-ui .overflow-scroll-m{overflow:scroll}.swagger-ui .overflow-auto-m{overflow:auto}.swagger-ui .overflow-x-visible-m{overflow-x:visible}.swagger-ui .overflow-x-hidden-m{overflow-x:hidden}.swagger-ui .overflow-x-scroll-m{overflow-x:scroll}.swagger-ui .overflow-x-auto-m{overflow-x:auto}.swagger-ui .overflow-y-visible-m{overflow-y:visible}.swagger-ui .overflow-y-hidden-m{overflow-y:hidden}.swagger-ui .overflow-y-scroll-m{overflow-y:scroll}.swagger-ui .overflow-y-auto-m{overflow-y:auto}}@media screen and (min-width:60em){.swagger-ui .overflow-visible-l{overflow:visible}.swagger-ui .overflow-hidden-l{overflow:hidden}.swagger-ui .overflow-scroll-l{overflow:scroll}.swagger-ui .overflow-auto-l{overflow:auto}.swagger-ui .overflow-x-visible-l{overflow-x:visible}.swagger-ui .overflow-x-hidden-l{overflow-x:hidden}.swagger-ui .overflow-x-scroll-l{overflow-x:scroll}.swagger-ui .overflow-x-auto-l{overflow-x:auto}.swagger-ui .overflow-y-visible-l{overflow-y:visible}.swagger-ui .overflow-y-hidden-l{overflow-y:hidden}.swagger-ui .overflow-y-scroll-l{overflow-y:scroll}.swagger-ui .overflow-y-auto-l{overflow-y:auto}}.swagger-ui .static{position:static}.swagger-ui .relative{position:relative}.swagger-ui .absolute{position:absolute}.swagger-ui .fixed{position:fixed}@media screen and (min-width:30em){.swagger-ui .static-ns{position:static}.swagger-ui .relative-ns{position:relative}.swagger-ui .absolute-ns{position:absolute}.swagger-ui .fixed-ns{position:fixed}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .static-m{position:static}.swagger-ui .relative-m{position:relative}.swagger-ui .absolute-m{position:absolute}.swagger-ui .fixed-m{position:fixed}}@media screen and (min-width:60em){.swagger-ui .static-l{position:static}.swagger-ui .relative-l{position:relative}.swagger-ui .absolute-l{position:absolute}.swagger-ui .fixed-l{position:fixed}}.swagger-ui .o-100{opacity:1}.swagger-ui .o-90{opacity:.9}.swagger-ui .o-80{opacity:.8}.swagger-ui .o-70{opacity:.7}.swagger-ui .o-60{opacity:.6}.swagger-ui .o-50{opacity:.5}.swagger-ui .o-40{opacity:.4}.swagger-ui .o-30{opacity:.3}.swagger-ui .o-20{opacity:.2}.swagger-ui .o-10{opacity:.1}.swagger-ui .o-05{opacity:.05}.swagger-ui .o-025{opacity:.025}.swagger-ui .o-0{opacity:0}.swagger-ui .rotate-45{transform:rotate(45deg)}.swagger-ui .rotate-90{transform:rotate(90deg)}.swagger-ui .rotate-135{transform:rotate(135deg)}.swagger-ui .rotate-180{transform:rotate(180deg)}.swagger-ui .rotate-225{transform:rotate(225deg)}.swagger-ui .rotate-270{transform:rotate(270deg)}.swagger-ui .rotate-315{transform:rotate(315deg)}@media screen and (min-width:30em){.swagger-ui .rotate-45-ns{transform:rotate(45deg)}.swagger-ui .rotate-90-ns{transform:rotate(90deg)}.swagger-ui .rotate-135-ns{transform:rotate(135deg)}.swagger-ui .rotate-180-ns{transform:rotate(180deg)}.swagger-ui .rotate-225-ns{transform:rotate(225deg)}.swagger-ui .rotate-270-ns{transform:rotate(270deg)}.swagger-ui .rotate-315-ns{transform:rotate(315deg)}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .rotate-45-m{transform:rotate(45deg)}.swagger-ui .rotate-90-m{transform:rotate(90deg)}.swagger-ui .rotate-135-m{transform:rotate(135deg)}.swagger-ui .rotate-180-m{transform:rotate(180deg)}.swagger-ui .rotate-225-m{transform:rotate(225deg)}.swagger-ui .rotate-270-m{transform:rotate(270deg)}.swagger-ui .rotate-315-m{transform:rotate(315deg)}}@media screen and (min-width:60em){.swagger-ui .rotate-45-l{transform:rotate(45deg)}.swagger-ui .rotate-90-l{transform:rotate(90deg)}.swagger-ui .rotate-135-l{transform:rotate(135deg)}.swagger-ui .rotate-180-l{transform:rotate(180deg)}.swagger-ui .rotate-225-l{transform:rotate(225deg)}.swagger-ui .rotate-270-l{transform:rotate(270deg)}.swagger-ui .rotate-315-l{transform:rotate(315deg)}}.swagger-ui .black-90{color:rgba(0,0,0,.9)}.swagger-ui .black-80{color:rgba(0,0,0,.8)}.swagger-ui .black-70{color:rgba(0,0,0,.7)}.swagger-ui .black-60{color:rgba(0,0,0,.6)}.swagger-ui .black-50{color:rgba(0,0,0,.5)}.swagger-ui .black-40{color:rgba(0,0,0,.4)}.swagger-ui .black-30{color:rgba(0,0,0,.3)}.swagger-ui .black-20{color:rgba(0,0,0,.2)}.swagger-ui .black-10{color:rgba(0,0,0,.1)}.swagger-ui .black-05{color:rgba(0,0,0,.05)}.swagger-ui .white-90{color:hsla(0,0%,100%,.9)}.swagger-ui .white-80{color:hsla(0,0%,100%,.8)}.swagger-ui .white-70{color:hsla(0,0%,100%,.7)}.swagger-ui .white-60{color:hsla(0,0%,100%,.6)}.swagger-ui .white-50{color:hsla(0,0%,100%,.5)}.swagger-ui .white-40{color:hsla(0,0%,100%,.4)}.swagger-ui .white-30{color:hsla(0,0%,100%,.3)}.swagger-ui .white-20{color:hsla(0,0%,100%,.2)}.swagger-ui .white-10{color:hsla(0,0%,100%,.1)}.swagger-ui .black{color:#000}.swagger-ui .near-black{color:#111}.swagger-ui .dark-gray{color:#333}.swagger-ui .mid-gray{color:#555}.swagger-ui .gray{color:#777}.swagger-ui .silver{color:#999}.swagger-ui .light-silver{color:#aaa}.swagger-ui .moon-gray{color:#ccc}.swagger-ui .light-gray{color:#eee}.swagger-ui .near-white{color:#f4f4f4}.swagger-ui .white{color:#fff}.swagger-ui .dark-red{color:#e7040f}.swagger-ui .red{color:#ff4136}.swagger-ui .light-red{color:#ff725c}.swagger-ui .orange{color:#ff6300}.swagger-ui .gold{color:#ffb700}.swagger-ui .yellow{color:gold}.swagger-ui .light-yellow{color:#fbf1a9}.swagger-ui .purple{color:#5e2ca5}.swagger-ui .light-purple{color:#a463f2}.swagger-ui .dark-pink{color:#d5008f}.swagger-ui .hot-pink{color:#ff41b4}.swagger-ui .pink{color:#ff80cc}.swagger-ui .light-pink{color:#ffa3d7}.swagger-ui .dark-green{color:#137752}.swagger-ui .green{color:#19a974}.swagger-ui .light-green{color:#9eebcf}.swagger-ui .navy{color:#001b44}.swagger-ui .dark-blue{color:#00449e}.swagger-ui .blue{color:#357edd}.swagger-ui .light-blue{color:#96ccff}.swagger-ui .lightest-blue{color:#cdecff}.swagger-ui .washed-blue{color:#f6fffe}.swagger-ui .washed-green{color:#e8fdf5}.swagger-ui .washed-yellow{color:#fffceb}.swagger-ui .washed-red{color:#ffdfdf}.swagger-ui .color-inherit{color:inherit}.swagger-ui .bg-black-90{background-color:rgba(0,0,0,.9)}.swagger-ui .bg-black-80{background-color:rgba(0,0,0,.8)}.swagger-ui .bg-black-70{background-color:rgba(0,0,0,.7)}.swagger-ui .bg-black-60{background-color:rgba(0,0,0,.6)}.swagger-ui .bg-black-50{background-color:rgba(0,0,0,.5)}.swagger-ui .bg-black-40{background-color:rgba(0,0,0,.4)}.swagger-ui .bg-black-30{background-color:rgba(0,0,0,.3)}.swagger-ui .bg-black-20{background-color:rgba(0,0,0,.2)}.swagger-ui .bg-black-10{background-color:rgba(0,0,0,.1)}.swagger-ui .bg-black-05{background-color:rgba(0,0,0,.05)}.swagger-ui .bg-white-90{background-color:hsla(0,0%,100%,.9)}.swagger-ui .bg-white-80{background-color:hsla(0,0%,100%,.8)}.swagger-ui .bg-white-70{background-color:hsla(0,0%,100%,.7)}.swagger-ui .bg-white-60{background-color:hsla(0,0%,100%,.6)}.swagger-ui .bg-white-50{background-color:hsla(0,0%,100%,.5)}.swagger-ui .bg-white-40{background-color:hsla(0,0%,100%,.4)}.swagger-ui .bg-white-30{background-color:hsla(0,0%,100%,.3)}.swagger-ui .bg-white-20{background-color:hsla(0,0%,100%,.2)}.swagger-ui .bg-white-10{background-color:hsla(0,0%,100%,.1)}.swagger-ui .bg-black{background-color:#000}.swagger-ui .bg-near-black{background-color:#111}.swagger-ui .bg-dark-gray{background-color:#333}.swagger-ui .bg-mid-gray{background-color:#555}.swagger-ui .bg-gray{background-color:#777}.swagger-ui .bg-silver{background-color:#999}.swagger-ui .bg-light-silver{background-color:#aaa}.swagger-ui .bg-moon-gray{background-color:#ccc}.swagger-ui .bg-light-gray{background-color:#eee}.swagger-ui .bg-near-white{background-color:#f4f4f4}.swagger-ui .bg-white{background-color:#fff}.swagger-ui .bg-transparent{background-color:transparent}.swagger-ui .bg-dark-red{background-color:#e7040f}.swagger-ui .bg-red{background-color:#ff4136}.swagger-ui .bg-light-red{background-color:#ff725c}.swagger-ui .bg-orange{background-color:#ff6300}.swagger-ui .bg-gold{background-color:#ffb700}.swagger-ui .bg-yellow{background-color:gold}.swagger-ui .bg-light-yellow{background-color:#fbf1a9}.swagger-ui .bg-purple{background-color:#5e2ca5}.swagger-ui .bg-light-purple{background-color:#a463f2}.swagger-ui .bg-dark-pink{background-color:#d5008f}.swagger-ui .bg-hot-pink{background-color:#ff41b4}.swagger-ui .bg-pink{background-color:#ff80cc}.swagger-ui .bg-light-pink{background-color:#ffa3d7}.swagger-ui .bg-dark-green{background-color:#137752}.swagger-ui .bg-green{background-color:#19a974}.swagger-ui .bg-light-green{background-color:#9eebcf}.swagger-ui .bg-navy{background-color:#001b44}.swagger-ui .bg-dark-blue{background-color:#00449e}.swagger-ui .bg-blue{background-color:#357edd}.swagger-ui .bg-light-blue{background-color:#96ccff}.swagger-ui .bg-lightest-blue{background-color:#cdecff}.swagger-ui .bg-washed-blue{background-color:#f6fffe}.swagger-ui .bg-washed-green{background-color:#e8fdf5}.swagger-ui .bg-washed-yellow{background-color:#fffceb}.swagger-ui .bg-washed-red{background-color:#ffdfdf}.swagger-ui .bg-inherit{background-color:inherit}.swagger-ui .hover-black:focus,.swagger-ui .hover-black:hover{color:#000}.swagger-ui .hover-near-black:focus,.swagger-ui .hover-near-black:hover{color:#111}.swagger-ui .hover-dark-gray:focus,.swagger-ui .hover-dark-gray:hover{color:#333}.swagger-ui .hover-mid-gray:focus,.swagger-ui .hover-mid-gray:hover{color:#555}.swagger-ui .hover-gray:focus,.swagger-ui .hover-gray:hover{color:#777}.swagger-ui .hover-silver:focus,.swagger-ui .hover-silver:hover{color:#999}.swagger-ui .hover-light-silver:focus,.swagger-ui .hover-light-silver:hover{color:#aaa}.swagger-ui .hover-moon-gray:focus,.swagger-ui .hover-moon-gray:hover{color:#ccc}.swagger-ui .hover-light-gray:focus,.swagger-ui .hover-light-gray:hover{color:#eee}.swagger-ui .hover-near-white:focus,.swagger-ui .hover-near-white:hover{color:#f4f4f4}.swagger-ui .hover-white:focus,.swagger-ui .hover-white:hover{color:#fff}.swagger-ui .hover-black-90:focus,.swagger-ui .hover-black-90:hover{color:rgba(0,0,0,.9)}.swagger-ui .hover-black-80:focus,.swagger-ui .hover-black-80:hover{color:rgba(0,0,0,.8)}.swagger-ui .hover-black-70:focus,.swagger-ui .hover-black-70:hover{color:rgba(0,0,0,.7)}.swagger-ui .hover-black-60:focus,.swagger-ui .hover-black-60:hover{color:rgba(0,0,0,.6)}.swagger-ui .hover-black-50:focus,.swagger-ui .hover-black-50:hover{color:rgba(0,0,0,.5)}.swagger-ui .hover-black-40:focus,.swagger-ui .hover-black-40:hover{color:rgba(0,0,0,.4)}.swagger-ui .hover-black-30:focus,.swagger-ui .hover-black-30:hover{color:rgba(0,0,0,.3)}.swagger-ui .hover-black-20:focus,.swagger-ui .hover-black-20:hover{color:rgba(0,0,0,.2)}.swagger-ui .hover-black-10:focus,.swagger-ui .hover-black-10:hover{color:rgba(0,0,0,.1)}.swagger-ui .hover-white-90:focus,.swagger-ui .hover-white-90:hover{color:hsla(0,0%,100%,.9)}.swagger-ui .hover-white-80:focus,.swagger-ui .hover-white-80:hover{color:hsla(0,0%,100%,.8)}.swagger-ui .hover-white-70:focus,.swagger-ui .hover-white-70:hover{color:hsla(0,0%,100%,.7)}.swagger-ui .hover-white-60:focus,.swagger-ui .hover-white-60:hover{color:hsla(0,0%,100%,.6)}.swagger-ui .hover-white-50:focus,.swagger-ui .hover-white-50:hover{color:hsla(0,0%,100%,.5)}.swagger-ui .hover-white-40:focus,.swagger-ui .hover-white-40:hover{color:hsla(0,0%,100%,.4)}.swagger-ui .hover-white-30:focus,.swagger-ui .hover-white-30:hover{color:hsla(0,0%,100%,.3)}.swagger-ui .hover-white-20:focus,.swagger-ui .hover-white-20:hover{color:hsla(0,0%,100%,.2)}.swagger-ui .hover-white-10:focus,.swagger-ui .hover-white-10:hover{color:hsla(0,0%,100%,.1)}.swagger-ui .hover-inherit:focus,.swagger-ui .hover-inherit:hover{color:inherit}.swagger-ui .hover-bg-black:focus,.swagger-ui .hover-bg-black:hover{background-color:#000}.swagger-ui .hover-bg-near-black:focus,.swagger-ui .hover-bg-near-black:hover{background-color:#111}.swagger-ui .hover-bg-dark-gray:focus,.swagger-ui .hover-bg-dark-gray:hover{background-color:#333}.swagger-ui .hover-bg-mid-gray:focus,.swagger-ui .hover-bg-mid-gray:hover{background-color:#555}.swagger-ui .hover-bg-gray:focus,.swagger-ui .hover-bg-gray:hover{background-color:#777}.swagger-ui .hover-bg-silver:focus,.swagger-ui .hover-bg-silver:hover{background-color:#999}.swagger-ui .hover-bg-light-silver:focus,.swagger-ui .hover-bg-light-silver:hover{background-color:#aaa}.swagger-ui .hover-bg-moon-gray:focus,.swagger-ui .hover-bg-moon-gray:hover{background-color:#ccc}.swagger-ui .hover-bg-light-gray:focus,.swagger-ui .hover-bg-light-gray:hover{background-color:#eee}.swagger-ui .hover-bg-near-white:focus,.swagger-ui .hover-bg-near-white:hover{background-color:#f4f4f4}.swagger-ui .hover-bg-white:focus,.swagger-ui .hover-bg-white:hover{background-color:#fff}.swagger-ui .hover-bg-transparent:focus,.swagger-ui .hover-bg-transparent:hover{background-color:transparent}.swagger-ui .hover-bg-black-90:focus,.swagger-ui .hover-bg-black-90:hover{background-color:rgba(0,0,0,.9)}.swagger-ui .hover-bg-black-80:focus,.swagger-ui .hover-bg-black-80:hover{background-color:rgba(0,0,0,.8)}.swagger-ui .hover-bg-black-70:focus,.swagger-ui .hover-bg-black-70:hover{background-color:rgba(0,0,0,.7)}.swagger-ui .hover-bg-black-60:focus,.swagger-ui .hover-bg-black-60:hover{background-color:rgba(0,0,0,.6)}.swagger-ui .hover-bg-black-50:focus,.swagger-ui .hover-bg-black-50:hover{background-color:rgba(0,0,0,.5)}.swagger-ui .hover-bg-black-40:focus,.swagger-ui .hover-bg-black-40:hover{background-color:rgba(0,0,0,.4)}.swagger-ui .hover-bg-black-30:focus,.swagger-ui .hover-bg-black-30:hover{background-color:rgba(0,0,0,.3)}.swagger-ui .hover-bg-black-20:focus,.swagger-ui .hover-bg-black-20:hover{background-color:rgba(0,0,0,.2)}.swagger-ui .hover-bg-black-10:focus,.swagger-ui .hover-bg-black-10:hover{background-color:rgba(0,0,0,.1)}.swagger-ui .hover-bg-white-90:focus,.swagger-ui .hover-bg-white-90:hover{background-color:hsla(0,0%,100%,.9)}.swagger-ui .hover-bg-white-80:focus,.swagger-ui .hover-bg-white-80:hover{background-color:hsla(0,0%,100%,.8)}.swagger-ui .hover-bg-white-70:focus,.swagger-ui .hover-bg-white-70:hover{background-color:hsla(0,0%,100%,.7)}.swagger-ui .hover-bg-white-60:focus,.swagger-ui .hover-bg-white-60:hover{background-color:hsla(0,0%,100%,.6)}.swagger-ui .hover-bg-white-50:focus,.swagger-ui .hover-bg-white-50:hover{background-color:hsla(0,0%,100%,.5)}.swagger-ui .hover-bg-white-40:focus,.swagger-ui .hover-bg-white-40:hover{background-color:hsla(0,0%,100%,.4)}.swagger-ui .hover-bg-white-30:focus,.swagger-ui .hover-bg-white-30:hover{background-color:hsla(0,0%,100%,.3)}.swagger-ui .hover-bg-white-20:focus,.swagger-ui .hover-bg-white-20:hover{background-color:hsla(0,0%,100%,.2)}.swagger-ui .hover-bg-white-10:focus,.swagger-ui .hover-bg-white-10:hover{background-color:hsla(0,0%,100%,.1)}.swagger-ui .hover-dark-red:focus,.swagger-ui .hover-dark-red:hover{color:#e7040f}.swagger-ui .hover-red:focus,.swagger-ui .hover-red:hover{color:#ff4136}.swagger-ui .hover-light-red:focus,.swagger-ui .hover-light-red:hover{color:#ff725c}.swagger-ui .hover-orange:focus,.swagger-ui .hover-orange:hover{color:#ff6300}.swagger-ui .hover-gold:focus,.swagger-ui .hover-gold:hover{color:#ffb700}.swagger-ui .hover-yellow:focus,.swagger-ui .hover-yellow:hover{color:gold}.swagger-ui .hover-light-yellow:focus,.swagger-ui .hover-light-yellow:hover{color:#fbf1a9}.swagger-ui .hover-purple:focus,.swagger-ui .hover-purple:hover{color:#5e2ca5}.swagger-ui .hover-light-purple:focus,.swagger-ui .hover-light-purple:hover{color:#a463f2}.swagger-ui .hover-dark-pink:focus,.swagger-ui .hover-dark-pink:hover{color:#d5008f}.swagger-ui .hover-hot-pink:focus,.swagger-ui .hover-hot-pink:hover{color:#ff41b4}.swagger-ui .hover-pink:focus,.swagger-ui .hover-pink:hover{color:#ff80cc}.swagger-ui .hover-light-pink:focus,.swagger-ui .hover-light-pink:hover{color:#ffa3d7}.swagger-ui .hover-dark-green:focus,.swagger-ui .hover-dark-green:hover{color:#137752}.swagger-ui .hover-green:focus,.swagger-ui .hover-green:hover{color:#19a974}.swagger-ui .hover-light-green:focus,.swagger-ui .hover-light-green:hover{color:#9eebcf}.swagger-ui .hover-navy:focus,.swagger-ui .hover-navy:hover{color:#001b44}.swagger-ui .hover-dark-blue:focus,.swagger-ui .hover-dark-blue:hover{color:#00449e}.swagger-ui .hover-blue:focus,.swagger-ui .hover-blue:hover{color:#357edd}.swagger-ui .hover-light-blue:focus,.swagger-ui .hover-light-blue:hover{color:#96ccff}.swagger-ui .hover-lightest-blue:focus,.swagger-ui .hover-lightest-blue:hover{color:#cdecff}.swagger-ui .hover-washed-blue:focus,.swagger-ui .hover-washed-blue:hover{color:#f6fffe}.swagger-ui .hover-washed-green:focus,.swagger-ui .hover-washed-green:hover{color:#e8fdf5}.swagger-ui .hover-washed-yellow:focus,.swagger-ui .hover-washed-yellow:hover{color:#fffceb}.swagger-ui .hover-washed-red:focus,.swagger-ui .hover-washed-red:hover{color:#ffdfdf}.swagger-ui .hover-bg-dark-red:focus,.swagger-ui .hover-bg-dark-red:hover{background-color:#e7040f}.swagger-ui .hover-bg-red:focus,.swagger-ui .hover-bg-red:hover{background-color:#ff4136}.swagger-ui .hover-bg-light-red:focus,.swagger-ui .hover-bg-light-red:hover{background-color:#ff725c}.swagger-ui .hover-bg-orange:focus,.swagger-ui .hover-bg-orange:hover{background-color:#ff6300}.swagger-ui .hover-bg-gold:focus,.swagger-ui .hover-bg-gold:hover{background-color:#ffb700}.swagger-ui .hover-bg-yellow:focus,.swagger-ui .hover-bg-yellow:hover{background-color:gold}.swagger-ui .hover-bg-light-yellow:focus,.swagger-ui .hover-bg-light-yellow:hover{background-color:#fbf1a9}.swagger-ui .hover-bg-purple:focus,.swagger-ui .hover-bg-purple:hover{background-color:#5e2ca5}.swagger-ui .hover-bg-light-purple:focus,.swagger-ui .hover-bg-light-purple:hover{background-color:#a463f2}.swagger-ui .hover-bg-dark-pink:focus,.swagger-ui .hover-bg-dark-pink:hover{background-color:#d5008f}.swagger-ui .hover-bg-hot-pink:focus,.swagger-ui .hover-bg-hot-pink:hover{background-color:#ff41b4}.swagger-ui .hover-bg-pink:focus,.swagger-ui .hover-bg-pink:hover{background-color:#ff80cc}.swagger-ui .hover-bg-light-pink:focus,.swagger-ui .hover-bg-light-pink:hover{background-color:#ffa3d7}.swagger-ui .hover-bg-dark-green:focus,.swagger-ui .hover-bg-dark-green:hover{background-color:#137752}.swagger-ui .hover-bg-green:focus,.swagger-ui .hover-bg-green:hover{background-color:#19a974}.swagger-ui .hover-bg-light-green:focus,.swagger-ui .hover-bg-light-green:hover{background-color:#9eebcf}.swagger-ui .hover-bg-navy:focus,.swagger-ui .hover-bg-navy:hover{background-color:#001b44}.swagger-ui .hover-bg-dark-blue:focus,.swagger-ui .hover-bg-dark-blue:hover{background-color:#00449e}.swagger-ui .hover-bg-blue:focus,.swagger-ui .hover-bg-blue:hover{background-color:#357edd}.swagger-ui .hover-bg-light-blue:focus,.swagger-ui .hover-bg-light-blue:hover{background-color:#96ccff}.swagger-ui .hover-bg-lightest-blue:focus,.swagger-ui .hover-bg-lightest-blue:hover{background-color:#cdecff}.swagger-ui .hover-bg-washed-blue:focus,.swagger-ui .hover-bg-washed-blue:hover{background-color:#f6fffe}.swagger-ui .hover-bg-washed-green:focus,.swagger-ui .hover-bg-washed-green:hover{background-color:#e8fdf5}.swagger-ui .hover-bg-washed-yellow:focus,.swagger-ui .hover-bg-washed-yellow:hover{background-color:#fffceb}.swagger-ui .hover-bg-washed-red:focus,.swagger-ui .hover-bg-washed-red:hover{background-color:#ffdfdf}.swagger-ui .hover-bg-inherit:focus,.swagger-ui .hover-bg-inherit:hover{background-color:inherit}.swagger-ui .pa0{padding:0}.swagger-ui .pa1{padding:.25rem}.swagger-ui .pa2{padding:.5rem}.swagger-ui .pa3{padding:1rem}.swagger-ui .pa4{padding:2rem}.swagger-ui .pa5{padding:4rem}.swagger-ui .pa6{padding:8rem}.swagger-ui .pa7{padding:16rem}.swagger-ui .pl0{padding-left:0}.swagger-ui .pl1{padding-left:.25rem}.swagger-ui .pl2{padding-left:.5rem}.swagger-ui .pl3{padding-left:1rem}.swagger-ui .pl4{padding-left:2rem}.swagger-ui .pl5{padding-left:4rem}.swagger-ui .pl6{padding-left:8rem}.swagger-ui .pl7{padding-left:16rem}.swagger-ui .pr0{padding-right:0}.swagger-ui .pr1{padding-right:.25rem}.swagger-ui .pr2{padding-right:.5rem}.swagger-ui .pr3{padding-right:1rem}.swagger-ui .pr4{padding-right:2rem}.swagger-ui .pr5{padding-right:4rem}.swagger-ui .pr6{padding-right:8rem}.swagger-ui .pr7{padding-right:16rem}.swagger-ui .pb0{padding-bottom:0}.swagger-ui .pb1{padding-bottom:.25rem}.swagger-ui .pb2{padding-bottom:.5rem}.swagger-ui .pb3{padding-bottom:1rem}.swagger-ui .pb4{padding-bottom:2rem}.swagger-ui .pb5{padding-bottom:4rem}.swagger-ui .pb6{padding-bottom:8rem}.swagger-ui .pb7{padding-bottom:16rem}.swagger-ui .pt0{padding-top:0}.swagger-ui .pt1{padding-top:.25rem}.swagger-ui .pt2{padding-top:.5rem}.swagger-ui .pt3{padding-top:1rem}.swagger-ui .pt4{padding-top:2rem}.swagger-ui .pt5{padding-top:4rem}.swagger-ui .pt6{padding-top:8rem}.swagger-ui .pt7{padding-top:16rem}.swagger-ui .pv0{padding-bottom:0;padding-top:0}.swagger-ui .pv1{padding-bottom:.25rem;padding-top:.25rem}.swagger-ui .pv2{padding-bottom:.5rem;padding-top:.5rem}.swagger-ui .pv3{padding-bottom:1rem;padding-top:1rem}.swagger-ui .pv4{padding-bottom:2rem;padding-top:2rem}.swagger-ui .pv5{padding-bottom:4rem;padding-top:4rem}.swagger-ui .pv6{padding-bottom:8rem;padding-top:8rem}.swagger-ui .pv7{padding-bottom:16rem;padding-top:16rem}.swagger-ui .ph0{padding-left:0;padding-right:0}.swagger-ui .ph1{padding-left:.25rem;padding-right:.25rem}.swagger-ui .ph2{padding-left:.5rem;padding-right:.5rem}.swagger-ui .ph3{padding-left:1rem;padding-right:1rem}.swagger-ui .ph4{padding-left:2rem;padding-right:2rem}.swagger-ui .ph5{padding-left:4rem;padding-right:4rem}.swagger-ui .ph6{padding-left:8rem;padding-right:8rem}.swagger-ui .ph7{padding-left:16rem;padding-right:16rem}.swagger-ui .ma0{margin:0}.swagger-ui .ma1{margin:.25rem}.swagger-ui .ma2{margin:.5rem}.swagger-ui .ma3{margin:1rem}.swagger-ui .ma4{margin:2rem}.swagger-ui .ma5{margin:4rem}.swagger-ui .ma6{margin:8rem}.swagger-ui .ma7{margin:16rem}.swagger-ui .ml0{margin-left:0}.swagger-ui .ml1{margin-left:.25rem}.swagger-ui .ml2{margin-left:.5rem}.swagger-ui .ml3{margin-left:1rem}.swagger-ui .ml4{margin-left:2rem}.swagger-ui .ml5{margin-left:4rem}.swagger-ui .ml6{margin-left:8rem}.swagger-ui .ml7{margin-left:16rem}.swagger-ui .mr0{margin-right:0}.swagger-ui .mr1{margin-right:.25rem}.swagger-ui .mr2{margin-right:.5rem}.swagger-ui .mr3{margin-right:1rem}.swagger-ui .mr4{margin-right:2rem}.swagger-ui .mr5{margin-right:4rem}.swagger-ui .mr6{margin-right:8rem}.swagger-ui .mr7{margin-right:16rem}.swagger-ui .mb0{margin-bottom:0}.swagger-ui .mb1{margin-bottom:.25rem}.swagger-ui .mb2{margin-bottom:.5rem}.swagger-ui .mb3{margin-bottom:1rem}.swagger-ui .mb4{margin-bottom:2rem}.swagger-ui .mb5{margin-bottom:4rem}.swagger-ui .mb6{margin-bottom:8rem}.swagger-ui .mb7{margin-bottom:16rem}.swagger-ui .mt0{margin-top:0}.swagger-ui .mt1{margin-top:.25rem}.swagger-ui .mt2{margin-top:.5rem}.swagger-ui .mt3{margin-top:1rem}.swagger-ui .mt4{margin-top:2rem}.swagger-ui .mt5{margin-top:4rem}.swagger-ui .mt6{margin-top:8rem}.swagger-ui .mt7{margin-top:16rem}.swagger-ui .mv0{margin-bottom:0;margin-top:0}.swagger-ui .mv1{margin-bottom:.25rem;margin-top:.25rem}.swagger-ui .mv2{margin-bottom:.5rem;margin-top:.5rem}.swagger-ui .mv3{margin-bottom:1rem;margin-top:1rem}.swagger-ui .mv4{margin-bottom:2rem;margin-top:2rem}.swagger-ui .mv5{margin-bottom:4rem;margin-top:4rem}.swagger-ui .mv6{margin-bottom:8rem;margin-top:8rem}.swagger-ui .mv7{margin-bottom:16rem;margin-top:16rem}.swagger-ui .mh0{margin-left:0;margin-right:0}.swagger-ui .mh1{margin-left:.25rem;margin-right:.25rem}.swagger-ui .mh2{margin-left:.5rem;margin-right:.5rem}.swagger-ui .mh3{margin-left:1rem;margin-right:1rem}.swagger-ui .mh4{margin-left:2rem;margin-right:2rem}.swagger-ui .mh5{margin-left:4rem;margin-right:4rem}.swagger-ui .mh6{margin-left:8rem;margin-right:8rem}.swagger-ui .mh7{margin-left:16rem;margin-right:16rem}@media screen and (min-width:30em){.swagger-ui .pa0-ns{padding:0}.swagger-ui .pa1-ns{padding:.25rem}.swagger-ui .pa2-ns{padding:.5rem}.swagger-ui .pa3-ns{padding:1rem}.swagger-ui .pa4-ns{padding:2rem}.swagger-ui .pa5-ns{padding:4rem}.swagger-ui .pa6-ns{padding:8rem}.swagger-ui .pa7-ns{padding:16rem}.swagger-ui .pl0-ns{padding-left:0}.swagger-ui .pl1-ns{padding-left:.25rem}.swagger-ui .pl2-ns{padding-left:.5rem}.swagger-ui .pl3-ns{padding-left:1rem}.swagger-ui .pl4-ns{padding-left:2rem}.swagger-ui .pl5-ns{padding-left:4rem}.swagger-ui .pl6-ns{padding-left:8rem}.swagger-ui .pl7-ns{padding-left:16rem}.swagger-ui .pr0-ns{padding-right:0}.swagger-ui .pr1-ns{padding-right:.25rem}.swagger-ui .pr2-ns{padding-right:.5rem}.swagger-ui .pr3-ns{padding-right:1rem}.swagger-ui .pr4-ns{padding-right:2rem}.swagger-ui .pr5-ns{padding-right:4rem}.swagger-ui .pr6-ns{padding-right:8rem}.swagger-ui .pr7-ns{padding-right:16rem}.swagger-ui .pb0-ns{padding-bottom:0}.swagger-ui .pb1-ns{padding-bottom:.25rem}.swagger-ui .pb2-ns{padding-bottom:.5rem}.swagger-ui .pb3-ns{padding-bottom:1rem}.swagger-ui .pb4-ns{padding-bottom:2rem}.swagger-ui .pb5-ns{padding-bottom:4rem}.swagger-ui .pb6-ns{padding-bottom:8rem}.swagger-ui .pb7-ns{padding-bottom:16rem}.swagger-ui .pt0-ns{padding-top:0}.swagger-ui .pt1-ns{padding-top:.25rem}.swagger-ui .pt2-ns{padding-top:.5rem}.swagger-ui .pt3-ns{padding-top:1rem}.swagger-ui .pt4-ns{padding-top:2rem}.swagger-ui .pt5-ns{padding-top:4rem}.swagger-ui .pt6-ns{padding-top:8rem}.swagger-ui .pt7-ns{padding-top:16rem}.swagger-ui .pv0-ns{padding-bottom:0;padding-top:0}.swagger-ui .pv1-ns{padding-bottom:.25rem;padding-top:.25rem}.swagger-ui .pv2-ns{padding-bottom:.5rem;padding-top:.5rem}.swagger-ui .pv3-ns{padding-bottom:1rem;padding-top:1rem}.swagger-ui .pv4-ns{padding-bottom:2rem;padding-top:2rem}.swagger-ui .pv5-ns{padding-bottom:4rem;padding-top:4rem}.swagger-ui .pv6-ns{padding-bottom:8rem;padding-top:8rem}.swagger-ui .pv7-ns{padding-bottom:16rem;padding-top:16rem}.swagger-ui .ph0-ns{padding-left:0;padding-right:0}.swagger-ui .ph1-ns{padding-left:.25rem;padding-right:.25rem}.swagger-ui .ph2-ns{padding-left:.5rem;padding-right:.5rem}.swagger-ui .ph3-ns{padding-left:1rem;padding-right:1rem}.swagger-ui .ph4-ns{padding-left:2rem;padding-right:2rem}.swagger-ui .ph5-ns{padding-left:4rem;padding-right:4rem}.swagger-ui .ph6-ns{padding-left:8rem;padding-right:8rem}.swagger-ui .ph7-ns{padding-left:16rem;padding-right:16rem}.swagger-ui .ma0-ns{margin:0}.swagger-ui .ma1-ns{margin:.25rem}.swagger-ui .ma2-ns{margin:.5rem}.swagger-ui .ma3-ns{margin:1rem}.swagger-ui .ma4-ns{margin:2rem}.swagger-ui .ma5-ns{margin:4rem}.swagger-ui .ma6-ns{margin:8rem}.swagger-ui .ma7-ns{margin:16rem}.swagger-ui .ml0-ns{margin-left:0}.swagger-ui .ml1-ns{margin-left:.25rem}.swagger-ui .ml2-ns{margin-left:.5rem}.swagger-ui .ml3-ns{margin-left:1rem}.swagger-ui .ml4-ns{margin-left:2rem}.swagger-ui .ml5-ns{margin-left:4rem}.swagger-ui .ml6-ns{margin-left:8rem}.swagger-ui .ml7-ns{margin-left:16rem}.swagger-ui .mr0-ns{margin-right:0}.swagger-ui .mr1-ns{margin-right:.25rem}.swagger-ui .mr2-ns{margin-right:.5rem}.swagger-ui .mr3-ns{margin-right:1rem}.swagger-ui .mr4-ns{margin-right:2rem}.swagger-ui .mr5-ns{margin-right:4rem}.swagger-ui .mr6-ns{margin-right:8rem}.swagger-ui .mr7-ns{margin-right:16rem}.swagger-ui .mb0-ns{margin-bottom:0}.swagger-ui .mb1-ns{margin-bottom:.25rem}.swagger-ui .mb2-ns{margin-bottom:.5rem}.swagger-ui .mb3-ns{margin-bottom:1rem}.swagger-ui .mb4-ns{margin-bottom:2rem}.swagger-ui .mb5-ns{margin-bottom:4rem}.swagger-ui .mb6-ns{margin-bottom:8rem}.swagger-ui .mb7-ns{margin-bottom:16rem}.swagger-ui .mt0-ns{margin-top:0}.swagger-ui .mt1-ns{margin-top:.25rem}.swagger-ui .mt2-ns{margin-top:.5rem}.swagger-ui .mt3-ns{margin-top:1rem}.swagger-ui .mt4-ns{margin-top:2rem}.swagger-ui .mt5-ns{margin-top:4rem}.swagger-ui .mt6-ns{margin-top:8rem}.swagger-ui .mt7-ns{margin-top:16rem}.swagger-ui .mv0-ns{margin-bottom:0;margin-top:0}.swagger-ui .mv1-ns{margin-bottom:.25rem;margin-top:.25rem}.swagger-ui .mv2-ns{margin-bottom:.5rem;margin-top:.5rem}.swagger-ui .mv3-ns{margin-bottom:1rem;margin-top:1rem}.swagger-ui .mv4-ns{margin-bottom:2rem;margin-top:2rem}.swagger-ui .mv5-ns{margin-bottom:4rem;margin-top:4rem}.swagger-ui .mv6-ns{margin-bottom:8rem;margin-top:8rem}.swagger-ui .mv7-ns{margin-bottom:16rem;margin-top:16rem}.swagger-ui .mh0-ns{margin-left:0;margin-right:0}.swagger-ui .mh1-ns{margin-left:.25rem;margin-right:.25rem}.swagger-ui .mh2-ns{margin-left:.5rem;margin-right:.5rem}.swagger-ui .mh3-ns{margin-left:1rem;margin-right:1rem}.swagger-ui .mh4-ns{margin-left:2rem;margin-right:2rem}.swagger-ui .mh5-ns{margin-left:4rem;margin-right:4rem}.swagger-ui .mh6-ns{margin-left:8rem;margin-right:8rem}.swagger-ui .mh7-ns{margin-left:16rem;margin-right:16rem}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .pa0-m{padding:0}.swagger-ui .pa1-m{padding:.25rem}.swagger-ui .pa2-m{padding:.5rem}.swagger-ui .pa3-m{padding:1rem}.swagger-ui .pa4-m{padding:2rem}.swagger-ui .pa5-m{padding:4rem}.swagger-ui .pa6-m{padding:8rem}.swagger-ui .pa7-m{padding:16rem}.swagger-ui .pl0-m{padding-left:0}.swagger-ui .pl1-m{padding-left:.25rem}.swagger-ui .pl2-m{padding-left:.5rem}.swagger-ui .pl3-m{padding-left:1rem}.swagger-ui .pl4-m{padding-left:2rem}.swagger-ui .pl5-m{padding-left:4rem}.swagger-ui .pl6-m{padding-left:8rem}.swagger-ui .pl7-m{padding-left:16rem}.swagger-ui .pr0-m{padding-right:0}.swagger-ui .pr1-m{padding-right:.25rem}.swagger-ui .pr2-m{padding-right:.5rem}.swagger-ui .pr3-m{padding-right:1rem}.swagger-ui .pr4-m{padding-right:2rem}.swagger-ui .pr5-m{padding-right:4rem}.swagger-ui .pr6-m{padding-right:8rem}.swagger-ui .pr7-m{padding-right:16rem}.swagger-ui .pb0-m{padding-bottom:0}.swagger-ui .pb1-m{padding-bottom:.25rem}.swagger-ui .pb2-m{padding-bottom:.5rem}.swagger-ui .pb3-m{padding-bottom:1rem}.swagger-ui .pb4-m{padding-bottom:2rem}.swagger-ui .pb5-m{padding-bottom:4rem}.swagger-ui .pb6-m{padding-bottom:8rem}.swagger-ui .pb7-m{padding-bottom:16rem}.swagger-ui .pt0-m{padding-top:0}.swagger-ui .pt1-m{padding-top:.25rem}.swagger-ui .pt2-m{padding-top:.5rem}.swagger-ui .pt3-m{padding-top:1rem}.swagger-ui .pt4-m{padding-top:2rem}.swagger-ui .pt5-m{padding-top:4rem}.swagger-ui .pt6-m{padding-top:8rem}.swagger-ui .pt7-m{padding-top:16rem}.swagger-ui .pv0-m{padding-bottom:0;padding-top:0}.swagger-ui .pv1-m{padding-bottom:.25rem;padding-top:.25rem}.swagger-ui .pv2-m{padding-bottom:.5rem;padding-top:.5rem}.swagger-ui .pv3-m{padding-bottom:1rem;padding-top:1rem}.swagger-ui .pv4-m{padding-bottom:2rem;padding-top:2rem}.swagger-ui .pv5-m{padding-bottom:4rem;padding-top:4rem}.swagger-ui .pv6-m{padding-bottom:8rem;padding-top:8rem}.swagger-ui .pv7-m{padding-bottom:16rem;padding-top:16rem}.swagger-ui .ph0-m{padding-left:0;padding-right:0}.swagger-ui .ph1-m{padding-left:.25rem;padding-right:.25rem}.swagger-ui .ph2-m{padding-left:.5rem;padding-right:.5rem}.swagger-ui .ph3-m{padding-left:1rem;padding-right:1rem}.swagger-ui .ph4-m{padding-left:2rem;padding-right:2rem}.swagger-ui .ph5-m{padding-left:4rem;padding-right:4rem}.swagger-ui .ph6-m{padding-left:8rem;padding-right:8rem}.swagger-ui .ph7-m{padding-left:16rem;padding-right:16rem}.swagger-ui .ma0-m{margin:0}.swagger-ui .ma1-m{margin:.25rem}.swagger-ui .ma2-m{margin:.5rem}.swagger-ui .ma3-m{margin:1rem}.swagger-ui .ma4-m{margin:2rem}.swagger-ui .ma5-m{margin:4rem}.swagger-ui .ma6-m{margin:8rem}.swagger-ui .ma7-m{margin:16rem}.swagger-ui .ml0-m{margin-left:0}.swagger-ui .ml1-m{margin-left:.25rem}.swagger-ui .ml2-m{margin-left:.5rem}.swagger-ui .ml3-m{margin-left:1rem}.swagger-ui .ml4-m{margin-left:2rem}.swagger-ui .ml5-m{margin-left:4rem}.swagger-ui .ml6-m{margin-left:8rem}.swagger-ui .ml7-m{margin-left:16rem}.swagger-ui .mr0-m{margin-right:0}.swagger-ui .mr1-m{margin-right:.25rem}.swagger-ui .mr2-m{margin-right:.5rem}.swagger-ui .mr3-m{margin-right:1rem}.swagger-ui .mr4-m{margin-right:2rem}.swagger-ui .mr5-m{margin-right:4rem}.swagger-ui .mr6-m{margin-right:8rem}.swagger-ui .mr7-m{margin-right:16rem}.swagger-ui .mb0-m{margin-bottom:0}.swagger-ui .mb1-m{margin-bottom:.25rem}.swagger-ui .mb2-m{margin-bottom:.5rem}.swagger-ui .mb3-m{margin-bottom:1rem}.swagger-ui .mb4-m{margin-bottom:2rem}.swagger-ui .mb5-m{margin-bottom:4rem}.swagger-ui .mb6-m{margin-bottom:8rem}.swagger-ui .mb7-m{margin-bottom:16rem}.swagger-ui .mt0-m{margin-top:0}.swagger-ui .mt1-m{margin-top:.25rem}.swagger-ui .mt2-m{margin-top:.5rem}.swagger-ui .mt3-m{margin-top:1rem}.swagger-ui .mt4-m{margin-top:2rem}.swagger-ui .mt5-m{margin-top:4rem}.swagger-ui .mt6-m{margin-top:8rem}.swagger-ui .mt7-m{margin-top:16rem}.swagger-ui .mv0-m{margin-bottom:0;margin-top:0}.swagger-ui .mv1-m{margin-bottom:.25rem;margin-top:.25rem}.swagger-ui .mv2-m{margin-bottom:.5rem;margin-top:.5rem}.swagger-ui .mv3-m{margin-bottom:1rem;margin-top:1rem}.swagger-ui .mv4-m{margin-bottom:2rem;margin-top:2rem}.swagger-ui .mv5-m{margin-bottom:4rem;margin-top:4rem}.swagger-ui .mv6-m{margin-bottom:8rem;margin-top:8rem}.swagger-ui .mv7-m{margin-bottom:16rem;margin-top:16rem}.swagger-ui .mh0-m{margin-left:0;margin-right:0}.swagger-ui .mh1-m{margin-left:.25rem;margin-right:.25rem}.swagger-ui .mh2-m{margin-left:.5rem;margin-right:.5rem}.swagger-ui .mh3-m{margin-left:1rem;margin-right:1rem}.swagger-ui .mh4-m{margin-left:2rem;margin-right:2rem}.swagger-ui .mh5-m{margin-left:4rem;margin-right:4rem}.swagger-ui .mh6-m{margin-left:8rem;margin-right:8rem}.swagger-ui .mh7-m{margin-left:16rem;margin-right:16rem}}@media screen and (min-width:60em){.swagger-ui .pa0-l{padding:0}.swagger-ui .pa1-l{padding:.25rem}.swagger-ui .pa2-l{padding:.5rem}.swagger-ui .pa3-l{padding:1rem}.swagger-ui .pa4-l{padding:2rem}.swagger-ui .pa5-l{padding:4rem}.swagger-ui .pa6-l{padding:8rem}.swagger-ui .pa7-l{padding:16rem}.swagger-ui .pl0-l{padding-left:0}.swagger-ui .pl1-l{padding-left:.25rem}.swagger-ui .pl2-l{padding-left:.5rem}.swagger-ui .pl3-l{padding-left:1rem}.swagger-ui .pl4-l{padding-left:2rem}.swagger-ui .pl5-l{padding-left:4rem}.swagger-ui .pl6-l{padding-left:8rem}.swagger-ui .pl7-l{padding-left:16rem}.swagger-ui .pr0-l{padding-right:0}.swagger-ui .pr1-l{padding-right:.25rem}.swagger-ui .pr2-l{padding-right:.5rem}.swagger-ui .pr3-l{padding-right:1rem}.swagger-ui .pr4-l{padding-right:2rem}.swagger-ui .pr5-l{padding-right:4rem}.swagger-ui .pr6-l{padding-right:8rem}.swagger-ui .pr7-l{padding-right:16rem}.swagger-ui .pb0-l{padding-bottom:0}.swagger-ui .pb1-l{padding-bottom:.25rem}.swagger-ui .pb2-l{padding-bottom:.5rem}.swagger-ui .pb3-l{padding-bottom:1rem}.swagger-ui .pb4-l{padding-bottom:2rem}.swagger-ui .pb5-l{padding-bottom:4rem}.swagger-ui .pb6-l{padding-bottom:8rem}.swagger-ui .pb7-l{padding-bottom:16rem}.swagger-ui .pt0-l{padding-top:0}.swagger-ui .pt1-l{padding-top:.25rem}.swagger-ui .pt2-l{padding-top:.5rem}.swagger-ui .pt3-l{padding-top:1rem}.swagger-ui .pt4-l{padding-top:2rem}.swagger-ui .pt5-l{padding-top:4rem}.swagger-ui .pt6-l{padding-top:8rem}.swagger-ui .pt7-l{padding-top:16rem}.swagger-ui .pv0-l{padding-bottom:0;padding-top:0}.swagger-ui .pv1-l{padding-bottom:.25rem;padding-top:.25rem}.swagger-ui .pv2-l{padding-bottom:.5rem;padding-top:.5rem}.swagger-ui .pv3-l{padding-bottom:1rem;padding-top:1rem}.swagger-ui .pv4-l{padding-bottom:2rem;padding-top:2rem}.swagger-ui .pv5-l{padding-bottom:4rem;padding-top:4rem}.swagger-ui .pv6-l{padding-bottom:8rem;padding-top:8rem}.swagger-ui .pv7-l{padding-bottom:16rem;padding-top:16rem}.swagger-ui .ph0-l{padding-left:0;padding-right:0}.swagger-ui .ph1-l{padding-left:.25rem;padding-right:.25rem}.swagger-ui .ph2-l{padding-left:.5rem;padding-right:.5rem}.swagger-ui .ph3-l{padding-left:1rem;padding-right:1rem}.swagger-ui .ph4-l{padding-left:2rem;padding-right:2rem}.swagger-ui .ph5-l{padding-left:4rem;padding-right:4rem}.swagger-ui .ph6-l{padding-left:8rem;padding-right:8rem}.swagger-ui .ph7-l{padding-left:16rem;padding-right:16rem}.swagger-ui .ma0-l{margin:0}.swagger-ui .ma1-l{margin:.25rem}.swagger-ui .ma2-l{margin:.5rem}.swagger-ui .ma3-l{margin:1rem}.swagger-ui .ma4-l{margin:2rem}.swagger-ui .ma5-l{margin:4rem}.swagger-ui .ma6-l{margin:8rem}.swagger-ui .ma7-l{margin:16rem}.swagger-ui .ml0-l{margin-left:0}.swagger-ui .ml1-l{margin-left:.25rem}.swagger-ui .ml2-l{margin-left:.5rem}.swagger-ui .ml3-l{margin-left:1rem}.swagger-ui .ml4-l{margin-left:2rem}.swagger-ui .ml5-l{margin-left:4rem}.swagger-ui .ml6-l{margin-left:8rem}.swagger-ui .ml7-l{margin-left:16rem}.swagger-ui .mr0-l{margin-right:0}.swagger-ui .mr1-l{margin-right:.25rem}.swagger-ui .mr2-l{margin-right:.5rem}.swagger-ui .mr3-l{margin-right:1rem}.swagger-ui .mr4-l{margin-right:2rem}.swagger-ui .mr5-l{margin-right:4rem}.swagger-ui .mr6-l{margin-right:8rem}.swagger-ui .mr7-l{margin-right:16rem}.swagger-ui .mb0-l{margin-bottom:0}.swagger-ui .mb1-l{margin-bottom:.25rem}.swagger-ui .mb2-l{margin-bottom:.5rem}.swagger-ui .mb3-l{margin-bottom:1rem}.swagger-ui .mb4-l{margin-bottom:2rem}.swagger-ui .mb5-l{margin-bottom:4rem}.swagger-ui .mb6-l{margin-bottom:8rem}.swagger-ui .mb7-l{margin-bottom:16rem}.swagger-ui .mt0-l{margin-top:0}.swagger-ui .mt1-l{margin-top:.25rem}.swagger-ui .mt2-l{margin-top:.5rem}.swagger-ui .mt3-l{margin-top:1rem}.swagger-ui .mt4-l{margin-top:2rem}.swagger-ui .mt5-l{margin-top:4rem}.swagger-ui .mt6-l{margin-top:8rem}.swagger-ui .mt7-l{margin-top:16rem}.swagger-ui .mv0-l{margin-bottom:0;margin-top:0}.swagger-ui .mv1-l{margin-bottom:.25rem;margin-top:.25rem}.swagger-ui .mv2-l{margin-bottom:.5rem;margin-top:.5rem}.swagger-ui .mv3-l{margin-bottom:1rem;margin-top:1rem}.swagger-ui .mv4-l{margin-bottom:2rem;margin-top:2rem}.swagger-ui .mv5-l{margin-bottom:4rem;margin-top:4rem}.swagger-ui .mv6-l{margin-bottom:8rem;margin-top:8rem}.swagger-ui .mv7-l{margin-bottom:16rem;margin-top:16rem}.swagger-ui .mh0-l{margin-left:0;margin-right:0}.swagger-ui .mh1-l{margin-left:.25rem;margin-right:.25rem}.swagger-ui .mh2-l{margin-left:.5rem;margin-right:.5rem}.swagger-ui .mh3-l{margin-left:1rem;margin-right:1rem}.swagger-ui .mh4-l{margin-left:2rem;margin-right:2rem}.swagger-ui .mh5-l{margin-left:4rem;margin-right:4rem}.swagger-ui .mh6-l{margin-left:8rem;margin-right:8rem}.swagger-ui .mh7-l{margin-left:16rem;margin-right:16rem}}.swagger-ui .na1{margin:-.25rem}.swagger-ui .na2{margin:-.5rem}.swagger-ui .na3{margin:-1rem}.swagger-ui .na4{margin:-2rem}.swagger-ui .na5{margin:-4rem}.swagger-ui .na6{margin:-8rem}.swagger-ui .na7{margin:-16rem}.swagger-ui .nl1{margin-left:-.25rem}.swagger-ui .nl2{margin-left:-.5rem}.swagger-ui .nl3{margin-left:-1rem}.swagger-ui .nl4{margin-left:-2rem}.swagger-ui .nl5{margin-left:-4rem}.swagger-ui .nl6{margin-left:-8rem}.swagger-ui .nl7{margin-left:-16rem}.swagger-ui .nr1{margin-right:-.25rem}.swagger-ui .nr2{margin-right:-.5rem}.swagger-ui .nr3{margin-right:-1rem}.swagger-ui .nr4{margin-right:-2rem}.swagger-ui .nr5{margin-right:-4rem}.swagger-ui .nr6{margin-right:-8rem}.swagger-ui .nr7{margin-right:-16rem}.swagger-ui .nb1{margin-bottom:-.25rem}.swagger-ui .nb2{margin-bottom:-.5rem}.swagger-ui .nb3{margin-bottom:-1rem}.swagger-ui .nb4{margin-bottom:-2rem}.swagger-ui .nb5{margin-bottom:-4rem}.swagger-ui .nb6{margin-bottom:-8rem}.swagger-ui .nb7{margin-bottom:-16rem}.swagger-ui .nt1{margin-top:-.25rem}.swagger-ui .nt2{margin-top:-.5rem}.swagger-ui .nt3{margin-top:-1rem}.swagger-ui .nt4{margin-top:-2rem}.swagger-ui .nt5{margin-top:-4rem}.swagger-ui .nt6{margin-top:-8rem}.swagger-ui .nt7{margin-top:-16rem}@media screen and (min-width:30em){.swagger-ui .na1-ns{margin:-.25rem}.swagger-ui .na2-ns{margin:-.5rem}.swagger-ui .na3-ns{margin:-1rem}.swagger-ui .na4-ns{margin:-2rem}.swagger-ui .na5-ns{margin:-4rem}.swagger-ui .na6-ns{margin:-8rem}.swagger-ui .na7-ns{margin:-16rem}.swagger-ui .nl1-ns{margin-left:-.25rem}.swagger-ui .nl2-ns{margin-left:-.5rem}.swagger-ui .nl3-ns{margin-left:-1rem}.swagger-ui .nl4-ns{margin-left:-2rem}.swagger-ui .nl5-ns{margin-left:-4rem}.swagger-ui .nl6-ns{margin-left:-8rem}.swagger-ui .nl7-ns{margin-left:-16rem}.swagger-ui .nr1-ns{margin-right:-.25rem}.swagger-ui .nr2-ns{margin-right:-.5rem}.swagger-ui .nr3-ns{margin-right:-1rem}.swagger-ui .nr4-ns{margin-right:-2rem}.swagger-ui .nr5-ns{margin-right:-4rem}.swagger-ui .nr6-ns{margin-right:-8rem}.swagger-ui .nr7-ns{margin-right:-16rem}.swagger-ui .nb1-ns{margin-bottom:-.25rem}.swagger-ui .nb2-ns{margin-bottom:-.5rem}.swagger-ui .nb3-ns{margin-bottom:-1rem}.swagger-ui .nb4-ns{margin-bottom:-2rem}.swagger-ui .nb5-ns{margin-bottom:-4rem}.swagger-ui .nb6-ns{margin-bottom:-8rem}.swagger-ui .nb7-ns{margin-bottom:-16rem}.swagger-ui .nt1-ns{margin-top:-.25rem}.swagger-ui .nt2-ns{margin-top:-.5rem}.swagger-ui .nt3-ns{margin-top:-1rem}.swagger-ui .nt4-ns{margin-top:-2rem}.swagger-ui .nt5-ns{margin-top:-4rem}.swagger-ui .nt6-ns{margin-top:-8rem}.swagger-ui .nt7-ns{margin-top:-16rem}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .na1-m{margin:-.25rem}.swagger-ui .na2-m{margin:-.5rem}.swagger-ui .na3-m{margin:-1rem}.swagger-ui .na4-m{margin:-2rem}.swagger-ui .na5-m{margin:-4rem}.swagger-ui .na6-m{margin:-8rem}.swagger-ui .na7-m{margin:-16rem}.swagger-ui .nl1-m{margin-left:-.25rem}.swagger-ui .nl2-m{margin-left:-.5rem}.swagger-ui .nl3-m{margin-left:-1rem}.swagger-ui .nl4-m{margin-left:-2rem}.swagger-ui .nl5-m{margin-left:-4rem}.swagger-ui .nl6-m{margin-left:-8rem}.swagger-ui .nl7-m{margin-left:-16rem}.swagger-ui .nr1-m{margin-right:-.25rem}.swagger-ui .nr2-m{margin-right:-.5rem}.swagger-ui .nr3-m{margin-right:-1rem}.swagger-ui .nr4-m{margin-right:-2rem}.swagger-ui .nr5-m{margin-right:-4rem}.swagger-ui .nr6-m{margin-right:-8rem}.swagger-ui .nr7-m{margin-right:-16rem}.swagger-ui .nb1-m{margin-bottom:-.25rem}.swagger-ui .nb2-m{margin-bottom:-.5rem}.swagger-ui .nb3-m{margin-bottom:-1rem}.swagger-ui .nb4-m{margin-bottom:-2rem}.swagger-ui .nb5-m{margin-bottom:-4rem}.swagger-ui .nb6-m{margin-bottom:-8rem}.swagger-ui .nb7-m{margin-bottom:-16rem}.swagger-ui .nt1-m{margin-top:-.25rem}.swagger-ui .nt2-m{margin-top:-.5rem}.swagger-ui .nt3-m{margin-top:-1rem}.swagger-ui .nt4-m{margin-top:-2rem}.swagger-ui .nt5-m{margin-top:-4rem}.swagger-ui .nt6-m{margin-top:-8rem}.swagger-ui .nt7-m{margin-top:-16rem}}@media screen and (min-width:60em){.swagger-ui .na1-l{margin:-.25rem}.swagger-ui .na2-l{margin:-.5rem}.swagger-ui .na3-l{margin:-1rem}.swagger-ui .na4-l{margin:-2rem}.swagger-ui .na5-l{margin:-4rem}.swagger-ui .na6-l{margin:-8rem}.swagger-ui .na7-l{margin:-16rem}.swagger-ui .nl1-l{margin-left:-.25rem}.swagger-ui .nl2-l{margin-left:-.5rem}.swagger-ui .nl3-l{margin-left:-1rem}.swagger-ui .nl4-l{margin-left:-2rem}.swagger-ui .nl5-l{margin-left:-4rem}.swagger-ui .nl6-l{margin-left:-8rem}.swagger-ui .nl7-l{margin-left:-16rem}.swagger-ui .nr1-l{margin-right:-.25rem}.swagger-ui .nr2-l{margin-right:-.5rem}.swagger-ui .nr3-l{margin-right:-1rem}.swagger-ui .nr4-l{margin-right:-2rem}.swagger-ui .nr5-l{margin-right:-4rem}.swagger-ui .nr6-l{margin-right:-8rem}.swagger-ui .nr7-l{margin-right:-16rem}.swagger-ui .nb1-l{margin-bottom:-.25rem}.swagger-ui .nb2-l{margin-bottom:-.5rem}.swagger-ui .nb3-l{margin-bottom:-1rem}.swagger-ui .nb4-l{margin-bottom:-2rem}.swagger-ui .nb5-l{margin-bottom:-4rem}.swagger-ui .nb6-l{margin-bottom:-8rem}.swagger-ui .nb7-l{margin-bottom:-16rem}.swagger-ui .nt1-l{margin-top:-.25rem}.swagger-ui .nt2-l{margin-top:-.5rem}.swagger-ui .nt3-l{margin-top:-1rem}.swagger-ui .nt4-l{margin-top:-2rem}.swagger-ui .nt5-l{margin-top:-4rem}.swagger-ui .nt6-l{margin-top:-8rem}.swagger-ui .nt7-l{margin-top:-16rem}}.swagger-ui .collapse{border-collapse:collapse;border-spacing:0}.swagger-ui .striped--light-silver:nth-child(odd){background-color:#aaa}.swagger-ui .striped--moon-gray:nth-child(odd){background-color:#ccc}.swagger-ui .striped--light-gray:nth-child(odd){background-color:#eee}.swagger-ui .striped--near-white:nth-child(odd){background-color:#f4f4f4}.swagger-ui .stripe-light:nth-child(odd){background-color:hsla(0,0%,100%,.1)}.swagger-ui .stripe-dark:nth-child(odd){background-color:rgba(0,0,0,.1)}.swagger-ui .strike{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .underline{-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .no-underline{-webkit-text-decoration:none;text-decoration:none}@media screen and (min-width:30em){.swagger-ui .strike-ns{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .underline-ns{-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .no-underline-ns{-webkit-text-decoration:none;text-decoration:none}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .strike-m{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .underline-m{-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .no-underline-m{-webkit-text-decoration:none;text-decoration:none}}@media screen and (min-width:60em){.swagger-ui .strike-l{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .underline-l{-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .no-underline-l{-webkit-text-decoration:none;text-decoration:none}}.swagger-ui .tl{text-align:left}.swagger-ui .tr{text-align:right}.swagger-ui .tc{text-align:center}.swagger-ui .tj{text-align:justify}@media screen and (min-width:30em){.swagger-ui .tl-ns{text-align:left}.swagger-ui .tr-ns{text-align:right}.swagger-ui .tc-ns{text-align:center}.swagger-ui .tj-ns{text-align:justify}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .tl-m{text-align:left}.swagger-ui .tr-m{text-align:right}.swagger-ui .tc-m{text-align:center}.swagger-ui .tj-m{text-align:justify}}@media screen and (min-width:60em){.swagger-ui .tl-l{text-align:left}.swagger-ui .tr-l{text-align:right}.swagger-ui .tc-l{text-align:center}.swagger-ui .tj-l{text-align:justify}}.swagger-ui .ttc{text-transform:capitalize}.swagger-ui .ttl{text-transform:lowercase}.swagger-ui .ttu{text-transform:uppercase}.swagger-ui .ttn{text-transform:none}@media screen and (min-width:30em){.swagger-ui .ttc-ns{text-transform:capitalize}.swagger-ui .ttl-ns{text-transform:lowercase}.swagger-ui .ttu-ns{text-transform:uppercase}.swagger-ui .ttn-ns{text-transform:none}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .ttc-m{text-transform:capitalize}.swagger-ui .ttl-m{text-transform:lowercase}.swagger-ui .ttu-m{text-transform:uppercase}.swagger-ui .ttn-m{text-transform:none}}@media screen and (min-width:60em){.swagger-ui .ttc-l{text-transform:capitalize}.swagger-ui .ttl-l{text-transform:lowercase}.swagger-ui .ttu-l{text-transform:uppercase}.swagger-ui .ttn-l{text-transform:none}}.swagger-ui .f-6,.swagger-ui .f-headline{font-size:6rem}.swagger-ui .f-5,.swagger-ui .f-subheadline{font-size:5rem}.swagger-ui .f1{font-size:3rem}.swagger-ui .f2{font-size:2.25rem}.swagger-ui .f3{font-size:1.5rem}.swagger-ui .f4{font-size:1.25rem}.swagger-ui .f5{font-size:1rem}.swagger-ui .f6{font-size:.875rem}.swagger-ui .f7{font-size:.75rem}@media screen and (min-width:30em){.swagger-ui .f-6-ns,.swagger-ui .f-headline-ns{font-size:6rem}.swagger-ui .f-5-ns,.swagger-ui .f-subheadline-ns{font-size:5rem}.swagger-ui .f1-ns{font-size:3rem}.swagger-ui .f2-ns{font-size:2.25rem}.swagger-ui .f3-ns{font-size:1.5rem}.swagger-ui .f4-ns{font-size:1.25rem}.swagger-ui .f5-ns{font-size:1rem}.swagger-ui .f6-ns{font-size:.875rem}.swagger-ui .f7-ns{font-size:.75rem}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .f-6-m,.swagger-ui .f-headline-m{font-size:6rem}.swagger-ui .f-5-m,.swagger-ui .f-subheadline-m{font-size:5rem}.swagger-ui .f1-m{font-size:3rem}.swagger-ui .f2-m{font-size:2.25rem}.swagger-ui .f3-m{font-size:1.5rem}.swagger-ui .f4-m{font-size:1.25rem}.swagger-ui .f5-m{font-size:1rem}.swagger-ui .f6-m{font-size:.875rem}.swagger-ui .f7-m{font-size:.75rem}}@media screen and (min-width:60em){.swagger-ui .f-6-l,.swagger-ui .f-headline-l{font-size:6rem}.swagger-ui .f-5-l,.swagger-ui .f-subheadline-l{font-size:5rem}.swagger-ui .f1-l{font-size:3rem}.swagger-ui .f2-l{font-size:2.25rem}.swagger-ui .f3-l{font-size:1.5rem}.swagger-ui .f4-l{font-size:1.25rem}.swagger-ui .f5-l{font-size:1rem}.swagger-ui .f6-l{font-size:.875rem}.swagger-ui .f7-l{font-size:.75rem}}.swagger-ui .measure{max-width:30em}.swagger-ui .measure-wide{max-width:34em}.swagger-ui .measure-narrow{max-width:20em}.swagger-ui .indent{margin-bottom:0;margin-top:0;text-indent:1em}.swagger-ui .small-caps{font-feature-settings:"smcp";font-variant:small-caps}.swagger-ui .truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media screen and (min-width:30em){.swagger-ui .measure-ns{max-width:30em}.swagger-ui .measure-wide-ns{max-width:34em}.swagger-ui .measure-narrow-ns{max-width:20em}.swagger-ui .indent-ns{margin-bottom:0;margin-top:0;text-indent:1em}.swagger-ui .small-caps-ns{font-feature-settings:"smcp";font-variant:small-caps}.swagger-ui .truncate-ns{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .measure-m{max-width:30em}.swagger-ui .measure-wide-m{max-width:34em}.swagger-ui .measure-narrow-m{max-width:20em}.swagger-ui .indent-m{margin-bottom:0;margin-top:0;text-indent:1em}.swagger-ui .small-caps-m{font-feature-settings:"smcp";font-variant:small-caps}.swagger-ui .truncate-m{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}@media screen and (min-width:60em){.swagger-ui .measure-l{max-width:30em}.swagger-ui .measure-wide-l{max-width:34em}.swagger-ui .measure-narrow-l{max-width:20em}.swagger-ui .indent-l{margin-bottom:0;margin-top:0;text-indent:1em}.swagger-ui .small-caps-l{font-feature-settings:"smcp";font-variant:small-caps}.swagger-ui .truncate-l{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}.swagger-ui .overflow-container{overflow-y:scroll}.swagger-ui .center{margin-left:auto;margin-right:auto}.swagger-ui .mr-auto{margin-right:auto}.swagger-ui .ml-auto{margin-left:auto}@media screen and (min-width:30em){.swagger-ui .center-ns{margin-left:auto;margin-right:auto}.swagger-ui .mr-auto-ns{margin-right:auto}.swagger-ui .ml-auto-ns{margin-left:auto}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .center-m{margin-left:auto;margin-right:auto}.swagger-ui .mr-auto-m{margin-right:auto}.swagger-ui .ml-auto-m{margin-left:auto}}@media screen and (min-width:60em){.swagger-ui .center-l{margin-left:auto;margin-right:auto}.swagger-ui .mr-auto-l{margin-right:auto}.swagger-ui .ml-auto-l{margin-left:auto}}.swagger-ui .clip{position:fixed!important;_position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}@media screen and (min-width:30em){.swagger-ui .clip-ns{position:fixed!important;_position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .clip-m{position:fixed!important;_position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}}@media screen and (min-width:60em){.swagger-ui .clip-l{position:fixed!important;_position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}}.swagger-ui .ws-normal{white-space:normal}.swagger-ui .nowrap{white-space:nowrap}.swagger-ui .pre{white-space:pre}@media screen and (min-width:30em){.swagger-ui .ws-normal-ns{white-space:normal}.swagger-ui .nowrap-ns{white-space:nowrap}.swagger-ui .pre-ns{white-space:pre}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .ws-normal-m{white-space:normal}.swagger-ui .nowrap-m{white-space:nowrap}.swagger-ui .pre-m{white-space:pre}}@media screen and (min-width:60em){.swagger-ui .ws-normal-l{white-space:normal}.swagger-ui .nowrap-l{white-space:nowrap}.swagger-ui .pre-l{white-space:pre}}.swagger-ui .v-base{vertical-align:baseline}.swagger-ui .v-mid{vertical-align:middle}.swagger-ui .v-top{vertical-align:top}.swagger-ui .v-btm{vertical-align:bottom}@media screen and (min-width:30em){.swagger-ui .v-base-ns{vertical-align:baseline}.swagger-ui .v-mid-ns{vertical-align:middle}.swagger-ui .v-top-ns{vertical-align:top}.swagger-ui .v-btm-ns{vertical-align:bottom}}@media screen and (min-width:30em)and (max-width:60em){.swagger-ui .v-base-m{vertical-align:baseline}.swagger-ui .v-mid-m{vertical-align:middle}.swagger-ui .v-top-m{vertical-align:top}.swagger-ui .v-btm-m{vertical-align:bottom}}@media screen and (min-width:60em){.swagger-ui .v-base-l{vertical-align:baseline}.swagger-ui .v-mid-l{vertical-align:middle}.swagger-ui .v-top-l{vertical-align:top}.swagger-ui .v-btm-l{vertical-align:bottom}}.swagger-ui .dim{opacity:1;transition:opacity .15s ease-in}.swagger-ui .dim:focus,.swagger-ui .dim:hover{opacity:.5;transition:opacity .15s ease-in}.swagger-ui .dim:active{opacity:.8;transition:opacity .15s ease-out}.swagger-ui .glow{transition:opacity .15s ease-in}.swagger-ui .glow:focus,.swagger-ui .glow:hover{opacity:1;transition:opacity .15s ease-in}.swagger-ui .hide-child .child{opacity:0;transition:opacity .15s ease-in}.swagger-ui .hide-child:active .child,.swagger-ui .hide-child:focus .child,.swagger-ui .hide-child:hover .child{opacity:1;transition:opacity .15s ease-in}.swagger-ui .underline-hover:focus,.swagger-ui .underline-hover:hover{-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .grow{-moz-osx-font-smoothing:grayscale;backface-visibility:hidden;transform:translateZ(0);transition:transform .25s ease-out}.swagger-ui .grow:focus,.swagger-ui .grow:hover{transform:scale(1.05)}.swagger-ui .grow:active{transform:scale(.9)}.swagger-ui .grow-large{-moz-osx-font-smoothing:grayscale;backface-visibility:hidden;transform:translateZ(0);transition:transform .25s ease-in-out}.swagger-ui .grow-large:focus,.swagger-ui .grow-large:hover{transform:scale(1.2)}.swagger-ui .grow-large:active{transform:scale(.95)}.swagger-ui .pointer:hover{cursor:pointer}.swagger-ui .shadow-hover{cursor:pointer;position:relative;transition:all .5s cubic-bezier(.165,.84,.44,1)}.swagger-ui .shadow-hover:after{border-radius:inherit;box-shadow:0 0 16px 2px rgba(0,0,0,.2);content:"";height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .5s cubic-bezier(.165,.84,.44,1);width:100%;z-index:-1}.swagger-ui .shadow-hover:focus:after,.swagger-ui .shadow-hover:hover:after{opacity:1}.swagger-ui .bg-animate,.swagger-ui .bg-animate:focus,.swagger-ui .bg-animate:hover{transition:background-color .15s ease-in-out}.swagger-ui .z-0{z-index:0}.swagger-ui .z-1{z-index:1}.swagger-ui .z-2{z-index:2}.swagger-ui .z-3{z-index:3}.swagger-ui .z-4{z-index:4}.swagger-ui .z-5{z-index:5}.swagger-ui .z-999{z-index:999}.swagger-ui .z-9999{z-index:9999}.swagger-ui .z-max{z-index:2147483647}.swagger-ui .z-inherit{z-index:inherit}.swagger-ui .z-initial,.swagger-ui .z-unset{z-index:auto}.swagger-ui .nested-copy-line-height ol,.swagger-ui .nested-copy-line-height p,.swagger-ui .nested-copy-line-height ul{line-height:1.5}.swagger-ui .nested-headline-line-height h1,.swagger-ui .nested-headline-line-height h2,.swagger-ui .nested-headline-line-height h3,.swagger-ui .nested-headline-line-height h4,.swagger-ui .nested-headline-line-height h5,.swagger-ui .nested-headline-line-height h6{line-height:1.25}.swagger-ui .nested-list-reset ol,.swagger-ui .nested-list-reset ul{list-style-type:none;margin-left:0;padding-left:0}.swagger-ui .nested-copy-indent p+p{margin-bottom:0;margin-top:0;text-indent:.1em}.swagger-ui .nested-copy-seperator p+p{margin-top:1.5em}.swagger-ui .nested-img img{display:block;max-width:100%;width:100%}.swagger-ui .nested-links a{color:#357edd;transition:color .15s ease-in}.swagger-ui .nested-links a:focus,.swagger-ui .nested-links a:hover{color:#96ccff;transition:color .15s ease-in}.swagger-ui .wrapper{box-sizing:border-box;margin:0 auto;max-width:1460px;padding:0 20px;width:100%}.swagger-ui .opblock-tag-section{display:flex;flex-direction:column}.swagger-ui .try-out.btn-group{display:flex;flex:.1 2 auto;padding:0}.swagger-ui .try-out__btn{margin-left:1.25rem}.swagger-ui .opblock-tag{align-items:center;border-bottom:1px solid rgba(59,65,81,.3);cursor:pointer;display:flex;padding:10px 20px 10px 10px;transition:all .2s}.swagger-ui .opblock-tag:hover{background:rgba(0,0,0,.02)}.swagger-ui .opblock-tag{color:#3b4151;font-family:sans-serif;font-size:24px;margin:0 0 5px}.swagger-ui .opblock-tag.no-desc span{flex:1}.swagger-ui .opblock-tag svg{transition:all .4s}.swagger-ui .opblock-tag small{color:#3b4151;flex:2;font-family:sans-serif;font-size:14px;font-weight:400;padding:0 10px}.swagger-ui .opblock-tag>div{flex:1 1 150px;font-weight:400;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media(max-width:640px){.swagger-ui .opblock-tag small,.swagger-ui .opblock-tag>div{flex:1}}.swagger-ui .opblock-tag .info__externaldocs{text-align:right}.swagger-ui .parameter__type{color:#3b4151;font-family:monospace;font-size:12px;font-weight:600;padding:5px 0}.swagger-ui .parameter-controls{margin-top:.75em}.swagger-ui .examples__title{display:block;font-size:1.1em;font-weight:700;margin-bottom:.75em}.swagger-ui .examples__section{margin-top:1.5em}.swagger-ui .examples__section-header{font-size:.9rem;font-weight:700;margin-bottom:.5rem}.swagger-ui .examples-select{display:inline-block;margin-bottom:.75em}.swagger-ui .examples-select .examples-select-element{width:100%}.swagger-ui .examples-select__section-label{font-size:.9rem;font-weight:700;margin-right:.5rem}.swagger-ui .example__section{margin-top:1.5em}.swagger-ui .example__section-header{font-size:.9rem;font-weight:700;margin-bottom:.5rem}.swagger-ui .view-line-link{cursor:pointer;margin:0 5px;position:relative;top:3px;transition:all .5s;width:20px}.swagger-ui .opblock{border:1px solid #000;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.19);margin:0 0 15px}.swagger-ui .opblock .tab-header{display:flex;flex:1}.swagger-ui .opblock .tab-header .tab-item{cursor:pointer;padding:0 40px}.swagger-ui .opblock .tab-header .tab-item:first-of-type{padding:0 40px 0 0}.swagger-ui .opblock .tab-header .tab-item.active h4 span{position:relative}.swagger-ui .opblock .tab-header .tab-item.active h4 span:after{background:grey;bottom:-15px;content:"";height:4px;left:50%;position:absolute;transform:translateX(-50%);width:120%}.swagger-ui .opblock.is-open .opblock-summary{border-bottom:1px solid #000}.swagger-ui .opblock .opblock-section-header{align-items:center;background:hsla(0,0%,100%,.8);box-shadow:0 1px 2px rgba(0,0,0,.1);display:flex;min-height:50px;padding:8px 20px}.swagger-ui .opblock .opblock-section-header>label{align-items:center;color:#3b4151;display:flex;font-family:sans-serif;font-size:12px;font-weight:700;margin:0 0 0 auto}.swagger-ui .opblock .opblock-section-header>label>span{padding:0 10px 0 0}.swagger-ui .opblock .opblock-section-header h4{color:#3b4151;flex:1;font-family:sans-serif;font-size:14px;margin:0}.swagger-ui .opblock .opblock-summary-method{background:#000;border-radius:3px;color:#fff;font-family:sans-serif;font-size:14px;font-weight:700;min-width:80px;padding:6px 0;text-align:center;text-shadow:0 1px 0 rgba(0,0,0,.1)}@media(max-width:768px){.swagger-ui .opblock .opblock-summary-method{font-size:12px}}.swagger-ui .opblock .opblock-summary-operation-id,.swagger-ui .opblock .opblock-summary-path,.swagger-ui .opblock .opblock-summary-path__deprecated{align-items:center;color:#3b4151;display:flex;font-family:monospace;font-size:16px;font-weight:600;word-break:break-word}@media(max-width:768px){.swagger-ui .opblock .opblock-summary-operation-id,.swagger-ui .opblock .opblock-summary-path,.swagger-ui .opblock .opblock-summary-path__deprecated{font-size:12px}}.swagger-ui .opblock .opblock-summary-path{flex-shrink:1}@media(max-width:640px){.swagger-ui .opblock .opblock-summary-path{max-width:100%}}.swagger-ui .opblock .opblock-summary-path__deprecated{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .opblock .opblock-summary-operation-id{font-size:14px}.swagger-ui .opblock .opblock-summary-description{color:#3b4151;font-family:sans-serif;font-size:13px;word-break:break-word}.swagger-ui .opblock .opblock-summary-path-description-wrapper{align-items:center;display:flex;flex-direction:row;flex-grow:1;flex-wrap:wrap;gap:0 10px;padding:0 10px}@media(max-width:550px){.swagger-ui .opblock .opblock-summary-path-description-wrapper{align-items:flex-start;flex-direction:column}}.swagger-ui .opblock .opblock-summary{align-items:center;cursor:pointer;display:flex;padding:5px}.swagger-ui .opblock .opblock-summary .view-line-link{cursor:pointer;margin:0;position:relative;top:2px;transition:all .5s;width:0}.swagger-ui .opblock .opblock-summary:hover .view-line-link{margin:0 5px;width:18px}.swagger-ui .opblock .opblock-summary:hover .view-line-link.copy-to-clipboard{width:24px}.swagger-ui .opblock.opblock-post{background:rgba(73,204,144,.1);border-color:#49cc90}.swagger-ui .opblock.opblock-post .opblock-summary-method{background:#49cc90}.swagger-ui .opblock.opblock-post .opblock-summary{border-color:#49cc90}.swagger-ui .opblock.opblock-post .tab-header .tab-item.active h4 span:after{background:#49cc90}.swagger-ui .opblock.opblock-put{background:rgba(252,161,48,.1);border-color:#fca130}.swagger-ui .opblock.opblock-put .opblock-summary-method{background:#fca130}.swagger-ui .opblock.opblock-put .opblock-summary{border-color:#fca130}.swagger-ui .opblock.opblock-put .tab-header .tab-item.active h4 span:after{background:#fca130}.swagger-ui .opblock.opblock-delete{background:rgba(249,62,62,.1);border-color:#f93e3e}.swagger-ui .opblock.opblock-delete .opblock-summary-method{background:#f93e3e}.swagger-ui .opblock.opblock-delete .opblock-summary{border-color:#f93e3e}.swagger-ui .opblock.opblock-delete .tab-header .tab-item.active h4 span:after{background:#f93e3e}.swagger-ui .opblock.opblock-get{background:rgba(97,175,254,.1);border-color:#61affe}.swagger-ui .opblock.opblock-get .opblock-summary-method{background:#61affe}.swagger-ui .opblock.opblock-get .opblock-summary{border-color:#61affe}.swagger-ui .opblock.opblock-get .tab-header .tab-item.active h4 span:after{background:#61affe}.swagger-ui .opblock.opblock-patch{background:rgba(80,227,194,.1);border-color:#50e3c2}.swagger-ui .opblock.opblock-patch .opblock-summary-method{background:#50e3c2}.swagger-ui .opblock.opblock-patch .opblock-summary{border-color:#50e3c2}.swagger-ui .opblock.opblock-patch .tab-header .tab-item.active h4 span:after{background:#50e3c2}.swagger-ui .opblock.opblock-head{background:rgba(144,18,254,.1);border-color:#9012fe}.swagger-ui .opblock.opblock-head .opblock-summary-method{background:#9012fe}.swagger-ui .opblock.opblock-head .opblock-summary{border-color:#9012fe}.swagger-ui .opblock.opblock-head .tab-header .tab-item.active h4 span:after{background:#9012fe}.swagger-ui .opblock.opblock-options{background:rgba(13,90,167,.1);border-color:#0d5aa7}.swagger-ui .opblock.opblock-options .opblock-summary-method{background:#0d5aa7}.swagger-ui .opblock.opblock-options .opblock-summary{border-color:#0d5aa7}.swagger-ui .opblock.opblock-options .tab-header .tab-item.active h4 span:after{background:#0d5aa7}.swagger-ui .opblock.opblock-deprecated{background:hsla(0,0%,92%,.1);border-color:#ebebeb;opacity:.6}.swagger-ui .opblock.opblock-deprecated .opblock-summary-method{background:#ebebeb}.swagger-ui .opblock.opblock-deprecated .opblock-summary{border-color:#ebebeb}.swagger-ui .opblock.opblock-deprecated .tab-header .tab-item.active h4 span:after{background:#ebebeb}.swagger-ui .opblock .opblock-schemes{padding:8px 20px}.swagger-ui .opblock .opblock-schemes .schemes-title{padding:0 10px 0 0}.swagger-ui .filter .operation-filter-input{border:2px solid #d8dde7;margin:20px 0;padding:10px;width:100%}.swagger-ui .download-url-wrapper .failed,.swagger-ui .filter .failed{color:red}.swagger-ui .download-url-wrapper .loading,.swagger-ui .filter .loading{color:#aaa}.swagger-ui .model-example{margin-top:1em}.swagger-ui .model-example .model-container{overflow-x:auto;width:100%}.swagger-ui .model-example .model-container .model-hint:not(.model-hint--embedded){top:-1.15em}.swagger-ui .tab{display:flex;list-style:none;padding:0}.swagger-ui .tab li{color:#3b4151;cursor:pointer;font-family:sans-serif;font-size:12px;min-width:60px;padding:0}.swagger-ui .tab li:first-of-type{padding-left:0;padding-right:12px;position:relative}.swagger-ui .tab li:first-of-type:after{background:rgba(0,0,0,.2);content:"";height:100%;position:absolute;right:6px;top:0;width:1px}.swagger-ui .tab li.active{font-weight:700}.swagger-ui .tab li button.tablinks{background:none;border:0;color:inherit;font-family:inherit;font-weight:inherit;padding:0}.swagger-ui .opblock-description-wrapper,.swagger-ui .opblock-external-docs-wrapper,.swagger-ui .opblock-title_normal{color:#3b4151;font-family:sans-serif;font-size:12px;margin:0 0 5px;padding:15px 20px}.swagger-ui .opblock-description-wrapper h4,.swagger-ui .opblock-external-docs-wrapper h4,.swagger-ui .opblock-title_normal h4{color:#3b4151;font-family:sans-serif;font-size:12px;margin:0 0 5px}.swagger-ui .opblock-description-wrapper p,.swagger-ui .opblock-external-docs-wrapper p,.swagger-ui .opblock-title_normal p{color:#3b4151;font-family:sans-serif;font-size:14px;margin:0}.swagger-ui .opblock-external-docs-wrapper h4{padding-left:0}.swagger-ui .execute-wrapper{padding:20px;text-align:right}.swagger-ui .execute-wrapper .btn{padding:8px 40px;width:100%}.swagger-ui .body-param-options{display:flex;flex-direction:column}.swagger-ui .body-param-options .body-param-edit{padding:10px 0}.swagger-ui .body-param-options label{padding:8px 0}.swagger-ui .body-param-options label select{margin:3px 0 0}.swagger-ui .responses-inner{padding:20px}.swagger-ui .responses-inner h4,.swagger-ui .responses-inner h5{color:#3b4151;font-family:sans-serif;font-size:12px;margin:10px 0 5px}.swagger-ui .responses-inner .curl{max-height:400px;min-height:6em;overflow-y:auto}.swagger-ui .response-col_status{color:#3b4151;font-family:sans-serif;font-size:14px}.swagger-ui .response-col_status .response-undocumented{color:#909090;font-family:monospace;font-size:11px;font-weight:600}.swagger-ui .response-col_links{color:#3b4151;font-family:sans-serif;font-size:14px;max-width:40em;padding-left:2em}.swagger-ui .response-col_links .response-undocumented{color:#909090;font-family:monospace;font-size:11px;font-weight:600}.swagger-ui .response-col_links .operation-link{margin-bottom:1.5em}.swagger-ui .response-col_links .operation-link .description{margin-bottom:.5em}.swagger-ui .opblock-body .opblock-loading-animation{display:block;margin:3em auto}.swagger-ui .opblock-body pre.microlight{background:#333;border-radius:4px;font-size:12px;hyphens:auto;margin:0;padding:10px;white-space:pre-wrap;word-break:break-all;word-break:break-word;word-wrap:break-word;color:#fff;font-family:monospace;font-weight:600}.swagger-ui .opblock-body pre.microlight .headerline{display:block}.swagger-ui .highlight-code{position:relative}.swagger-ui .highlight-code>.microlight{max-height:400px;min-height:6em;overflow-y:auto}.swagger-ui .highlight-code>.microlight code{white-space:pre-wrap!important;word-break:break-all}.swagger-ui .curl-command{position:relative}.swagger-ui .download-contents{align-items:center;background:#7d8293;border:none;border-radius:4px;bottom:10px;color:#fff;display:flex;font-family:sans-serif;font-size:14px;font-weight:600;height:30px;justify-content:center;padding:5px;position:absolute;right:10px;text-align:center}.swagger-ui .scheme-container{background:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.15);margin:0 0 20px;padding:30px 0}.swagger-ui .scheme-container .schemes{align-items:flex-end;display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between}.swagger-ui .scheme-container .schemes>.schemes-server-container{display:flex;flex-wrap:wrap;gap:10px}.swagger-ui .scheme-container .schemes>.schemes-server-container>label{color:#3b4151;display:flex;flex-direction:column;font-family:sans-serif;font-size:12px;font-weight:700;margin:-20px 15px 0 0}.swagger-ui .scheme-container .schemes>.schemes-server-container>label select{min-width:130px;text-transform:uppercase}.swagger-ui .scheme-container .schemes:not(:has(.schemes-server-container)){justify-content:flex-end}.swagger-ui .scheme-container .schemes .auth-wrapper{flex:none;justify-content:start}.swagger-ui .scheme-container .schemes .auth-wrapper .authorize{display:flex;flex-wrap:nowrap;margin:0;padding-right:20px}.swagger-ui .loading-container{align-items:center;display:flex;flex-direction:column;justify-content:center;margin-top:1em;min-height:1px;padding:40px 0 60px}.swagger-ui .loading-container .loading{position:relative}.swagger-ui .loading-container .loading:after{color:#3b4151;content:"loading";font-family:sans-serif;font-size:10px;font-weight:700;left:50%;position:absolute;text-transform:uppercase;top:50%;transform:translate(-50%,-50%)}.swagger-ui .loading-container .loading:before{animation:rotation 1s linear infinite,opacity .5s;backface-visibility:hidden;border:2px solid rgba(85,85,85,.1);border-radius:100%;border-top-color:rgba(0,0,0,.6);content:"";display:block;height:60px;left:50%;margin:-30px;opacity:1;position:absolute;top:50%;width:60px}@keyframes rotation{to{transform:rotate(1turn)}}.swagger-ui .response-controls{display:flex;padding-top:1em}.swagger-ui .response-control-media-type{margin-right:1em}.swagger-ui .response-control-media-type--accept-controller select{border-color:green}.swagger-ui .response-control-media-type__accept-message{color:green;font-size:.7em}.swagger-ui .response-control-examples__title,.swagger-ui .response-control-media-type__title{display:block;font-size:.7em;margin-bottom:.2em}@keyframes blinker{50%{opacity:0}}.swagger-ui .hidden{display:none}.swagger-ui .no-margin{border:none;height:auto;margin:0;padding:0}.swagger-ui .float-right{float:right}.swagger-ui .svg-assets{height:0;position:absolute;width:0}.swagger-ui section h3{color:#3b4151;font-family:sans-serif}.swagger-ui a.nostyle{display:inline}.swagger-ui a.nostyle,.swagger-ui a.nostyle:visited{color:inherit;cursor:pointer;text-decoration:inherit}.swagger-ui .fallback{color:#aaa;padding:1em}.swagger-ui .version-pragma{height:100%;padding:5em 0}.swagger-ui .version-pragma__message{display:flex;font-size:1.2em;height:100%;justify-content:center;line-height:1.5em;padding:0 .6em;text-align:center}.swagger-ui .version-pragma__message>div{flex:1;max-width:55ch}.swagger-ui .version-pragma__message code{background-color:#dedede;padding:4px 4px 2px;white-space:pre}.swagger-ui .opblock-link{font-weight:400}.swagger-ui .opblock-link.shown{font-weight:700}.swagger-ui span.token-string{color:#555}.swagger-ui span.token-not-formatted{color:#555;font-weight:700}.swagger-ui .btn{background:transparent;border:2px solid grey;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.1);color:#3b4151;font-family:sans-serif;font-size:14px;font-weight:700;padding:5px 23px;transition:all .3s}.swagger-ui .btn.btn-sm{font-size:12px;padding:4px 23px}.swagger-ui .btn[disabled]{cursor:not-allowed;opacity:.3}.swagger-ui .btn:hover{box-shadow:0 0 5px rgba(0,0,0,.3)}.swagger-ui .btn.cancel{background-color:transparent;border-color:#ff6060;color:#ff6060;font-family:sans-serif}.swagger-ui .btn.authorize{background-color:transparent;border-color:#49cc90;color:#49cc90;display:inline;line-height:1}.swagger-ui .btn.authorize span{float:left;padding:4px 20px 0 0}.swagger-ui .btn.authorize svg{fill:#49cc90}.swagger-ui .btn.execute{background-color:#4990e2;border-color:#4990e2;color:#fff}.swagger-ui .btn-group{display:flex;padding:30px}.swagger-ui .btn-group .btn{flex:1}.swagger-ui .btn-group .btn:first-child{border-radius:4px 0 0 4px}.swagger-ui .btn-group .btn:last-child{border-radius:0 4px 4px 0}.swagger-ui .authorization__btn{background:none;border:none;padding:0 0 0 10px}.swagger-ui .authorization__btn .locked{opacity:1}.swagger-ui .authorization__btn .unlocked{opacity:.4}.swagger-ui .model-box-control,.swagger-ui .models-control,.swagger-ui .opblock-summary-control{all:inherit;border-bottom:0;cursor:pointer;flex:1;padding:0}.swagger-ui .model-box-control:focus,.swagger-ui .models-control:focus,.swagger-ui .opblock-summary-control:focus{outline:auto}.swagger-ui .expand-methods,.swagger-ui .expand-operation{background:none;border:none}.swagger-ui .expand-methods svg,.swagger-ui .expand-operation svg{height:20px;width:20px}.swagger-ui .expand-methods{padding:0 10px}.swagger-ui .expand-methods:hover svg{fill:#404040}.swagger-ui .expand-methods svg{transition:all .3s;fill:#707070}.swagger-ui button{cursor:pointer}.swagger-ui button.invalid{animation:shake .4s 1;background:#feebeb;border-color:#f93e3e}.swagger-ui .copy-to-clipboard{align-items:center;background:#7d8293;border:none;border-radius:4px;bottom:10px;display:flex;height:30px;justify-content:center;position:absolute;right:100px;width:30px}.swagger-ui .copy-to-clipboard button{background:url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"15\" aria-hidden=\"true\"><path fill=\"%23fff\" fill-rule=\"evenodd\" d=\"M4 12h4v1H4zm5-6H4v1h5zm2 3V7l-3 3 3 3v-2h5V9zM6.5 8H4v1h2.5zM4 11h2.5v-1H4zm9 1h1v2c-.02.28-.11.52-.3.7s-.42.28-.7.3H3c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h3c0-1.11.89-2 2-2s2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V5H3v9h10zM4 4h8c0-.55-.45-1-1-1h-1c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H5c-.55 0-1 .45-1 1\"/></svg>") 50% no-repeat;border:none;flex-grow:1;flex-shrink:1;height:25px}.swagger-ui .copy-to-clipboard:active{background:#5e626f}.swagger-ui .opblock-control-arrow{background:none;border:none;text-align:center}.swagger-ui .curl-command .copy-to-clipboard{bottom:5px;height:20px;right:10px;width:20px}.swagger-ui .curl-command .copy-to-clipboard button{height:18px}.swagger-ui .opblock .opblock-summary .view-line-link.copy-to-clipboard{height:26px;position:static}.swagger-ui select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f7f7f7 url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M13.418 7.859a.695.695 0 0 1 .978 0 .68.68 0 0 1 0 .969l-3.908 3.83a.697.697 0 0 1-.979 0l-3.908-3.83a.68.68 0 0 1 0-.969.695.695 0 0 1 .978 0L10 11z\"/></svg>") right 10px center no-repeat;background-size:20px;border:2px solid #41444e;border-radius:4px;box-shadow:0 1px 2px 0 rgba(0,0,0,.25);color:#3b4151;font-family:sans-serif;font-size:14px;font-weight:700;padding:5px 40px 5px 10px}.swagger-ui select[multiple]{background:#f7f7f7;margin:5px 0;padding:5px}.swagger-ui select.invalid{animation:shake .4s 1;background:#feebeb;border-color:#f93e3e}.swagger-ui .opblock-body select{min-width:230px}@media(max-width:768px){.swagger-ui .opblock-body select{min-width:180px}}@media(max-width:640px){.swagger-ui .opblock-body select{min-width:100%;width:100%}}.swagger-ui label{color:#3b4151;font-family:sans-serif;font-size:12px;font-weight:700;margin:0 0 5px}.swagger-ui input[type=email],.swagger-ui input[type=file],.swagger-ui input[type=password],.swagger-ui input[type=search],.swagger-ui input[type=text]{line-height:1}@media(max-width:768px){.swagger-ui input[type=email],.swagger-ui input[type=file],.swagger-ui input[type=password],.swagger-ui input[type=search],.swagger-ui input[type=text]{max-width:175px}}.swagger-ui input[type=email],.swagger-ui input[type=file],.swagger-ui input[type=password],.swagger-ui input[type=search],.swagger-ui input[type=text],.swagger-ui textarea{background:#fff;border:1px solid #d9d9d9;border-radius:4px;margin:5px 0;min-width:100px;padding:8px 10px}.swagger-ui input[type=email].invalid,.swagger-ui input[type=file].invalid,.swagger-ui input[type=password].invalid,.swagger-ui input[type=search].invalid,.swagger-ui input[type=text].invalid,.swagger-ui textarea.invalid{animation:shake .4s 1;background:#feebeb;border-color:#f93e3e}.swagger-ui input[disabled],.swagger-ui select[disabled],.swagger-ui textarea[disabled]{background-color:#fafafa;color:#888;cursor:not-allowed}.swagger-ui select[disabled]{border-color:#888}.swagger-ui textarea[disabled]{background-color:#41444e;color:#fff}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.swagger-ui textarea{background:hsla(0,0%,100%,.8);border:none;border-radius:4px;color:#3b4151;font-family:monospace;font-size:12px;font-weight:600;min-height:280px;outline:none;padding:10px;width:100%}.swagger-ui textarea:focus{border:2px solid #61affe}.swagger-ui textarea.curl{background:#41444e;border-radius:4px;color:#fff;font-family:monospace;font-size:12px;font-weight:600;margin:0;min-height:100px;padding:10px;resize:none}.swagger-ui .checkbox{color:#303030;padding:5px 0 10px;transition:opacity .5s}.swagger-ui .checkbox label{display:flex}.swagger-ui .checkbox p{color:#3b4151;font-family:monospace;font-style:italic;font-weight:400!important;font-weight:600;margin:0!important}.swagger-ui .checkbox input[type=checkbox]{display:none}.swagger-ui .checkbox input[type=checkbox]+label>.item{background:#e8e8e8;border-radius:1px;box-shadow:0 0 0 2px #e8e8e8;cursor:pointer;display:inline-block;flex:none;height:16px;margin:0 8px 0 0;padding:5px;position:relative;top:3px;width:16px}.swagger-ui .checkbox input[type=checkbox]+label>.item:active{transform:scale(.9)}.swagger-ui .checkbox input[type=checkbox]:checked+label>.item{background:#e8e8e8 url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"8\" viewBox=\"3 7 10 8\"><path fill=\"%2341474E\" fill-rule=\"evenodd\" d=\"M6.333 15 3 11.667l1.333-1.334 2 2L11.667 7 13 8.333z\"/></svg>") 50% no-repeat}.swagger-ui .dialog-ux{bottom:0;left:0;position:fixed;right:0;top:0;z-index:9999}.swagger-ui .dialog-ux .backdrop-ux{background:rgba(0,0,0,.8);bottom:0;left:0;position:fixed;right:0;top:0}.swagger-ui .dialog-ux .modal-ux{background:#fff;border:1px solid #ebebeb;border-radius:4px;box-shadow:0 10px 30px 0 rgba(0,0,0,.2);left:50%;max-width:650px;min-width:300px;position:absolute;top:50%;transform:translate(-50%,-50%);width:100%;z-index:9999}.swagger-ui .dialog-ux .modal-ux-content{max-height:540px;overflow-y:auto;padding:20px}.swagger-ui .dialog-ux .modal-ux-content p{color:#41444e;color:#3b4151;font-family:sans-serif;font-size:12px;margin:0 0 5px}.swagger-ui .dialog-ux .modal-ux-content h4{color:#3b4151;font-family:sans-serif;font-size:18px;font-weight:600;margin:15px 0 0}.swagger-ui .dialog-ux .modal-ux-header{align-items:center;border-bottom:1px solid #ebebeb;display:flex;padding:12px 0}.swagger-ui .dialog-ux .modal-ux-header .close-modal{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;padding:0 10px}.swagger-ui .dialog-ux .modal-ux-header h3{color:#3b4151;flex:1;font-family:sans-serif;font-size:20px;font-weight:600;margin:0;padding:0 20px}.swagger-ui .model{color:#3b4151;font-family:monospace;font-size:12px;font-weight:300;font-weight:600}.swagger-ui .model .deprecated span,.swagger-ui .model .deprecated td{color:#a0a0a0!important}.swagger-ui .model .deprecated>td:first-of-type{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .model-toggle{cursor:pointer;display:inline-block;font-size:10px;margin:auto .3em;position:relative;top:6px;transform:rotate(90deg);transform-origin:50% 50%;transition:transform .15s ease-in}.swagger-ui .model-toggle.collapsed{transform:rotate(0deg)}.swagger-ui .model-toggle:after{background:url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>") 50% no-repeat;background-size:100%;content:"";display:block;height:20px;width:20px}.swagger-ui .model-jump-to-path{cursor:pointer;position:relative}.swagger-ui .model-jump-to-path .view-line-link{cursor:pointer;position:absolute;top:-.4em}.swagger-ui .model-title{position:relative}.swagger-ui .model-title:hover .model-hint{display:block}.swagger-ui .model-hint{background:rgba(0,0,0,.7);border-radius:4px;color:#ebebeb;display:none;padding:.1em .5em;position:absolute;top:-1.8em;white-space:nowrap}.swagger-ui .model p{margin:0 0 1em}.swagger-ui .model .property{color:#999;font-style:italic}.swagger-ui .model .property.primitive{color:#6b6b6b}.swagger-ui .model .property.primitive.extension{display:block}.swagger-ui .model .property.primitive.extension>td:first-child{padding-left:0;padding-right:0;width:auto}.swagger-ui .model .property.primitive.extension>td:first-child:after{content:":Â "}.swagger-ui .model .external-docs,.swagger-ui table.model tr.description{color:#666;font-weight:400}.swagger-ui table.model tr.description td:first-child,.swagger-ui table.model tr.property-row.required td:first-child{font-weight:700}.swagger-ui table.model tr.property-row td{vertical-align:top}.swagger-ui table.model tr.property-row td:first-child{padding-right:.2em}.swagger-ui table.model tr.property-row .star{color:red}.swagger-ui table.model tr.extension{color:#777}.swagger-ui table.model tr.extension td:last-child{vertical-align:top}.swagger-ui table.model tr.external-docs td:first-child{font-weight:700}.swagger-ui table.model tr .renderedMarkdown p:first-child{margin-top:0}.swagger-ui section.models{border:1px solid rgba(59,65,81,.3);border-radius:4px;margin:30px 0}.swagger-ui section.models .pointer{cursor:pointer}.swagger-ui section.models.is-open{padding:0 0 20px}.swagger-ui section.models.is-open h4{border-bottom:1px solid rgba(59,65,81,.3);margin:0 0 5px}.swagger-ui section.models h4{align-items:center;color:#606060;cursor:pointer;display:flex;font-family:sans-serif;font-size:16px;margin:0;padding:10px 20px 10px 10px;transition:all .2s}.swagger-ui section.models h4 svg{transition:all .4s}.swagger-ui section.models h4 span{flex:1}.swagger-ui section.models h4:hover{background:rgba(0,0,0,.02)}.swagger-ui section.models h5{color:#707070;font-family:sans-serif;font-size:16px;margin:0 0 10px}.swagger-ui section.models .model-jump-to-path{position:relative;top:5px}.swagger-ui section.models .model-container{background:rgba(0,0,0,.05);border-radius:4px;margin:0 20px 15px;position:relative;transition:all .5s}.swagger-ui section.models .model-container:hover{background:rgba(0,0,0,.07)}.swagger-ui section.models .model-container:first-of-type{margin:20px}.swagger-ui section.models .model-container:last-of-type{margin:0 20px}.swagger-ui section.models .model-container .models-jump-to-path{opacity:.65;position:absolute;right:5px;top:8px}.swagger-ui section.models .model-box{background:none}.swagger-ui section.models .model-box:has(.model-box){overflow-x:auto;width:100%}.swagger-ui .model-box{background:rgba(0,0,0,.1);border-radius:4px;display:inline-block;padding:10px}.swagger-ui .model-box .model-jump-to-path{position:relative;top:4px}.swagger-ui .model-box.deprecated{opacity:.5}.swagger-ui .model-title{color:#505050;font-family:sans-serif;font-size:16px}.swagger-ui .model-title img{bottom:0;margin-left:1em;position:relative}.swagger-ui .model-deprecated-warning{color:#f93e3e;font-family:sans-serif;font-size:16px;font-weight:600;margin-right:1em}.swagger-ui span>span.model .brace-close{padding:0 0 0 10px}.swagger-ui .prop-name{display:inline-block;margin-right:1em}.swagger-ui .prop-type{color:#55a}.swagger-ui .prop-enum{display:block}.swagger-ui .prop-format{color:#606060}.swagger-ui .servers>label{color:#3b4151;font-family:sans-serif;font-size:12px;margin:-20px 15px 0 0}.swagger-ui .servers>label select{max-width:100%;min-width:130px;width:100%}.swagger-ui .servers h4.message{padding-bottom:2em}.swagger-ui .servers table tr{width:30em}.swagger-ui .servers table td{display:inline-block;max-width:15em;padding-bottom:10px;padding-top:10px;vertical-align:middle}.swagger-ui .servers table td:first-of-type{padding-right:1em}.swagger-ui .servers table td input{height:100%;width:100%}.swagger-ui .servers .computed-url{margin:2em 0}.swagger-ui .servers .computed-url code{display:inline-block;font-size:16px;margin:0 1em;padding:4px}.swagger-ui .servers-title{font-size:12px;font-weight:700}.swagger-ui .operation-servers h4.message{margin-bottom:2em}.swagger-ui table{border-collapse:collapse;padding:0 10px;width:100%}.swagger-ui table.model tbody tr td{padding:0 0 0 1em;vertical-align:top}.swagger-ui table.model tbody tr td:first-of-type{padding:0 0 0 2em;width:174px}.swagger-ui table.headers td{color:#3b4151;font-family:monospace;font-size:12px;font-weight:300;font-weight:600;vertical-align:middle}.swagger-ui table.headers .header-example{color:#999;font-style:italic}.swagger-ui table tbody tr td{padding:10px 0 0;vertical-align:top}.swagger-ui table tbody tr td:first-of-type{min-width:6em;padding:10px 0}.swagger-ui table tbody tr td:has(.model-box){max-width:1px}.swagger-ui table thead tr td,.swagger-ui table thead tr th{border-bottom:1px solid rgba(59,65,81,.2);color:#3b4151;font-family:sans-serif;font-size:12px;font-weight:700;padding:12px 0;text-align:left}.swagger-ui .parameters-col_description{margin-bottom:2em;width:99%}.swagger-ui .parameters-col_description input{max-width:340px;width:100%}.swagger-ui .parameters-col_description select{border-width:1px}.swagger-ui .parameters-col_description .markdown:first-child p:first-child,.swagger-ui .parameters-col_description .renderedMarkdown:first-child p:first-child{margin:0}.swagger-ui .parameter__name{color:#3b4151;font-family:sans-serif;font-size:16px;font-weight:400;margin-right:.75em}.swagger-ui .parameter__name.required{font-weight:700}.swagger-ui .parameter__name.required span{color:red}.swagger-ui .parameter__name.required:after{color:rgba(255,0,0,.6);content:"required";font-size:10px;padding:5px;position:relative;top:-6px}.swagger-ui .parameter__extension,.swagger-ui .parameter__in{color:grey;font-family:monospace;font-size:12px;font-style:italic;font-weight:600}.swagger-ui .parameter__deprecated{color:red;font-family:monospace;font-size:12px;font-style:italic;font-weight:600}.swagger-ui .parameter__empty_value_toggle{display:block;font-size:13px;padding-bottom:12px;padding-top:5px}.swagger-ui .parameter__empty_value_toggle input{margin-right:7px;width:auto}.swagger-ui .parameter__empty_value_toggle.disabled{opacity:.7}.swagger-ui .table-container{padding:20px}.swagger-ui .response-col_description{width:99%}.swagger-ui .response-col_description .markdown p:first-child,.swagger-ui .response-col_description .renderedMarkdown p:first-child{margin:0}.swagger-ui .response-col_description .markdown p:last-child,.swagger-ui .response-col_description .renderedMarkdown p:last-child{margin-bottom:0}.swagger-ui .response-col_links{min-width:6em}.swagger-ui .response__extension{color:grey;font-family:monospace;font-size:12px;font-style:italic;font-weight:600}.swagger-ui .topbar{background-color:#1b1b1b;padding:10px 0}.swagger-ui .topbar .topbar-wrapper{align-items:center;display:flex;flex-wrap:wrap;gap:10px}@media(max-width:550px){.swagger-ui .topbar .topbar-wrapper{align-items:start;flex-direction:column}}.swagger-ui .topbar a{align-items:center;color:#fff;display:flex;flex:1;font-family:sans-serif;font-size:1.5em;font-weight:700;max-width:300px;-webkit-text-decoration:none;text-decoration:none}.swagger-ui .topbar a span{margin:0;padding:0 10px}.swagger-ui .topbar .download-url-wrapper{display:flex;flex:3;justify-content:flex-end;margin-left:auto;max-width:600px}.swagger-ui .topbar .download-url-wrapper input[type=text]{border:2px solid #62a03f;border-radius:4px 0 0 4px;margin:0;max-width:100%;outline:none;width:100%}.swagger-ui .topbar .download-url-wrapper .select-label{align-items:center;color:#f0f0f0;display:flex;margin:0;max-width:600px;width:100%}.swagger-ui .topbar .download-url-wrapper .select-label span{flex:1;font-size:16px;padding:0 10px 0 0;text-align:right}.swagger-ui .topbar .download-url-wrapper .select-label select{border:2px solid #62a03f;box-shadow:none;flex:2;outline:none;width:100%}.swagger-ui .topbar .download-url-wrapper .download-url-button{background:#62a03f;border:none;border-radius:0 4px 4px 0;color:#fff;font-family:sans-serif;font-size:16px;font-weight:700;padding:4px 30px}@media(max-width:550px){.swagger-ui .topbar .download-url-wrapper{width:100%}}.swagger-ui .topbar .dark-mode-toggle{cursor:pointer;margin-left:10px;opacity:.8;transition:all .2s}.swagger-ui .topbar .dark-mode-toggle button{background:none;border:none;padding:0}.swagger-ui .topbar .dark-mode-toggle button svg{fill:#e4e6e6}.swagger-ui .topbar .dark-mode-toggle:hover{opacity:1}.swagger-ui .info{margin:50px 0}.swagger-ui .info.failed-config{margin-left:auto;margin-right:auto;max-width:880px;text-align:center}.swagger-ui .info hgroup.main{margin:0 0 20px}.swagger-ui .info hgroup.main a{font-size:12px}.swagger-ui .info li,.swagger-ui .info p,.swagger-ui .info pre,.swagger-ui .info table{font-size:14px}.swagger-ui .info h1,.swagger-ui .info h2,.swagger-ui .info h3,.swagger-ui .info h4,.swagger-ui .info h5,.swagger-ui .info li,.swagger-ui .info p,.swagger-ui .info table{color:#3b4151;font-family:sans-serif}.swagger-ui .info a{color:#4990e2;font-family:sans-serif;font-size:14px;transition:all .4s}.swagger-ui .info a:hover{color:#1f69c0}.swagger-ui .info>div{margin:0 0 5px}.swagger-ui .info .base-url{color:#3b4151;font-family:monospace;font-size:12px;font-weight:300!important;font-weight:600;margin:0}.swagger-ui .info .title{color:#3b4151;font-family:sans-serif;font-size:36px;margin:0}.swagger-ui .info .title small{background:#7d8492;border-radius:57px;display:inline-block;font-size:10px;margin:0 0 0 5px;padding:2px 4px;position:relative;top:-5px;vertical-align:super}.swagger-ui .info .title small.version-stamp{background-color:#89bf04}.swagger-ui .info .title small pre{color:#fff;font-family:sans-serif;margin:0;padding:0}.swagger-ui .auth-btn-wrapper{display:flex;justify-content:center;padding:10px 0}.swagger-ui .auth-btn-wrapper .btn-done{margin-right:1em}.swagger-ui .auth-wrapper{display:flex;flex:1;justify-content:flex-end}.swagger-ui .auth-wrapper .authorize{margin-left:10px;margin-right:10px;padding-right:20px}.swagger-ui .auth-container{border-bottom:1px solid #ebebeb;margin:0 0 10px;padding:10px 20px}.swagger-ui .auth-container:last-of-type{border:0;margin:0;padding:10px 20px}.swagger-ui .auth-container h4{margin:5px 0 15px!important}.swagger-ui .auth-container .wrapper{margin:0;padding:0}.swagger-ui .auth-container input[type=password],.swagger-ui .auth-container input[type=text]{min-width:230px}.swagger-ui .auth-container .errors{background-color:#fee;border-radius:4px;color:red;color:#3b4151;font-family:monospace;font-size:12px;font-weight:600;margin:1em;padding:10px}.swagger-ui .auth-container .errors b{margin-right:1em;text-transform:capitalize}.swagger-ui .scopes h2{color:#3b4151;font-family:sans-serif;font-size:14px}.swagger-ui .scopes h2 a{color:#4990e2;cursor:pointer;font-size:12px;padding-left:10px;-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .scope-def{padding:0 0 20px}.swagger-ui .errors-wrapper{animation:scaleUp .5s;background:rgba(249,62,62,.1);border:2px solid #f93e3e;border-radius:4px;margin:20px;padding:10px 20px}.swagger-ui .errors-wrapper .error-wrapper{margin:0 0 10px}.swagger-ui .errors-wrapper .errors h4{color:#3b4151;font-family:monospace;font-size:14px;font-weight:600;margin:0}.swagger-ui .errors-wrapper .errors small{color:#606060}.swagger-ui .errors-wrapper .errors .message{white-space:pre-line}.swagger-ui .errors-wrapper .errors .message.thrown{max-width:100%}.swagger-ui .errors-wrapper .errors .error-line{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.swagger-ui .errors-wrapper hgroup{align-items:center;display:flex}.swagger-ui .errors-wrapper hgroup h4{color:#3b4151;flex:1;font-family:sans-serif;font-size:20px;margin:0}@keyframes scaleUp{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.swagger-ui .Resizer.vertical.disabled{display:none}.swagger-ui .markdown p,.swagger-ui .markdown pre,.swagger-ui .renderedMarkdown p,.swagger-ui .renderedMarkdown pre{margin:1em auto;word-break:break-all;word-break:break-word}.swagger-ui .markdown pre,.swagger-ui .renderedMarkdown pre{background:none;color:#000;font-weight:400;padding:0;white-space:pre-wrap}.swagger-ui .markdown code,.swagger-ui .renderedMarkdown code{background:rgba(0,0,0,.05);border-radius:4px;color:#9012fe;font-family:monospace;font-size:14px;font-weight:600;padding:5px 7px}.swagger-ui .markdown pre>code,.swagger-ui .renderedMarkdown pre>code{display:block}.swagger-ui .json-schema-2020-12-keyword--\$vocabulary ul{border-left:1px dashed rgba(0,0,0,.1);margin:0 0 0 20px}.swagger-ui .json-schema-2020-12-\$vocabulary-uri{margin-left:35px}.swagger-ui .json-schema-2020-12-\$vocabulary-uri--disabled{-webkit-text-decoration:line-through;text-decoration:line-through}.swagger-ui .json-schema-2020-12-keyword--const .json-schema-2020-12-json-viewer__name,.swagger-ui .json-schema-2020-12-keyword--const .json-schema-2020-12-json-viewer__value{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12__constraint{background-color:#805ad5;border-radius:4px;color:#3b4151;color:#fff;font-family:monospace;font-weight:600;line-height:1.5;margin-left:10px;padding:1px 3px}.swagger-ui .json-schema-2020-12__constraint--string{background-color:#d69e2e;color:#fff}.swagger-ui .json-schema-2020-12-keyword--default .json-schema-2020-12-json-viewer__name,.swagger-ui .json-schema-2020-12-keyword--default .json-schema-2020-12-json-viewer__value{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12-keyword--dependentRequired>ul{display:inline-block;margin:0;padding:0}.swagger-ui .json-schema-2020-12-keyword--dependentRequired>ul li{display:inline;list-style-type:none}.swagger-ui .json-schema-2020-12-keyword--description{color:#6b6b6b;font-size:12px;margin-left:20px}.swagger-ui .json-schema-2020-12-keyword--description p{margin:0}.swagger-ui .json-schema-2020-12-keyword--enum .json-schema-2020-12-json-viewer__name,.swagger-ui .json-schema-2020-12-keyword--enum .json-schema-2020-12-json-viewer__value,.swagger-ui .json-schema-2020-12-keyword--examples .json-schema-2020-12-json-viewer__name,.swagger-ui .json-schema-2020-12-keyword--examples .json-schema-2020-12-json-viewer__value{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12-json-viewer-extension-keyword .json-schema-2020-12-json-viewer__name,.swagger-ui .json-schema-2020-12-json-viewer-extension-keyword .json-schema-2020-12-json-viewer__value{color:#929292;font-style:italic}.swagger-ui .json-schema-2020-12-keyword--patternProperties ul{border:none;margin:0;padding:0}.swagger-ui .json-schema-2020-12-keyword--patternProperties .json-schema-2020-12__title:first-of-type:after,.swagger-ui .json-schema-2020-12-keyword--patternProperties .json-schema-2020-12__title:first-of-type:before{color:#55a;content:"/"}.swagger-ui .json-schema-2020-12-keyword--properties>ul{border:none;margin:0;padding:0}.swagger-ui .json-schema-2020-12-property{list-style-type:none}.swagger-ui .json-schema-2020-12-property--required>.json-schema-2020-12:first-of-type>.json-schema-2020-12-head .json-schema-2020-12__title:after{color:red;content:"*";font-weight:700}.swagger-ui .json-schema-2020-12__title{color:#505050;display:inline-block;font-family:sans-serif;font-size:12px;font-weight:700;line-height:normal}.swagger-ui .json-schema-2020-12__title .json-schema-2020-12-keyword__name{margin:0}.swagger-ui .json-schema-2020-12-property{margin:7px 0}.swagger-ui .json-schema-2020-12-property .json-schema-2020-12__title{color:#3b4151;font-family:monospace;font-size:12px;font-weight:600;vertical-align:middle}.swagger-ui .json-schema-2020-12-keyword{margin:5px 0}.swagger-ui .json-schema-2020-12-keyword__children{border-left:1px dashed rgba(0,0,0,.1);margin:0 0 0 20px;padding:0}.swagger-ui .json-schema-2020-12-keyword__children--collapsed{display:none}.swagger-ui .json-schema-2020-12-keyword__name{font-size:12px;font-weight:700;margin-left:20px}.swagger-ui .json-schema-2020-12-keyword__name--primary{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12-keyword__name--secondary{color:#6b6b6b;font-style:italic}.swagger-ui .json-schema-2020-12-keyword__name--extension{color:#929292;font-style:italic}.swagger-ui .json-schema-2020-12-keyword__value{color:#6b6b6b;font-size:12px;font-style:italic;font-weight:400}.swagger-ui .json-schema-2020-12-keyword__value--primary{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12-keyword__value--secondary{color:#6b6b6b;font-style:italic}.swagger-ui .json-schema-2020-12-keyword__value--extension{color:#929292;font-style:italic}.swagger-ui .json-schema-2020-12-keyword__value--warning{border:1px dashed red;border-radius:4px;color:#3b4151;color:red;display:inline-block;font-family:monospace;font-style:normal;font-weight:600;line-height:1.5;margin-left:10px;padding:1px 4px}.swagger-ui .json-schema-2020-12-keyword__name--secondary+.json-schema-2020-12-keyword__value--secondary:before{content:"="}.swagger-ui .json-schema-2020-12__attribute{color:#3b4151;font-family:monospace;font-size:12px;padding-left:10px;text-transform:lowercase}.swagger-ui .json-schema-2020-12__attribute--primary{color:#55a}.swagger-ui .json-schema-2020-12__attribute--muted{color:gray}.swagger-ui .json-schema-2020-12__attribute--warning{color:red}.swagger-ui .json-schema-2020-12-json-viewer{margin:5px 0}.swagger-ui .json-schema-2020-12-json-viewer__children{border-left:1px dashed rgba(0,0,0,.1);margin:0 0 0 20px;padding:0}.swagger-ui .json-schema-2020-12-json-viewer__children--collapsed{display:none}.swagger-ui .json-schema-2020-12-json-viewer__name{font-size:12px;font-weight:700;margin-left:20px}.swagger-ui .json-schema-2020-12-json-viewer__name--primary{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12-json-viewer__name--secondary{color:#6b6b6b;font-style:italic}.swagger-ui .json-schema-2020-12-json-viewer__name--extension{color:#929292;font-style:italic}.swagger-ui .json-schema-2020-12-json-viewer__value{color:#6b6b6b;font-size:12px;font-style:italic;font-weight:400}.swagger-ui .json-schema-2020-12-json-viewer__value--primary{color:#3b4151;font-style:normal}.swagger-ui .json-schema-2020-12-json-viewer__value--secondary{color:#6b6b6b;font-style:italic}.swagger-ui .json-schema-2020-12-json-viewer__value--extension{color:#929292;font-style:italic}.swagger-ui .json-schema-2020-12-json-viewer__value--warning{border:1px dashed red;border-radius:4px;color:#3b4151;color:red;display:inline-block;font-family:monospace;font-style:normal;font-weight:600;line-height:1.5;margin-left:10px;padding:1px 4px}.swagger-ui .json-schema-2020-12-json-viewer__name--secondary+.json-schema-2020-12-json-viewer__value--secondary:before{content:"="}.swagger-ui .json-schema-2020-12{background-color:rgba(0,0,0,.05);border-radius:4px;margin:0 20px 15px;padding:12px 0 12px 20px}.swagger-ui .json-schema-2020-12:first-of-type{margin:20px}.swagger-ui .json-schema-2020-12:last-of-type{margin:0 20px}.swagger-ui .json-schema-2020-12--embedded{background-color:inherit;padding-bottom:0;padding-left:inherit;padding-right:inherit;padding-top:0}.swagger-ui .json-schema-2020-12-body{border-left:1px dashed rgba(0,0,0,.1);margin:2px 0}.swagger-ui .json-schema-2020-12-body--collapsed{display:none}.swagger-ui .json-schema-2020-12-accordion{border:none;outline:none;padding-left:0}.swagger-ui .json-schema-2020-12-accordion__children{display:inline-block}.swagger-ui .json-schema-2020-12-accordion__icon{display:inline-block;height:18px;vertical-align:bottom;width:18px}.swagger-ui .json-schema-2020-12-accordion__icon--expanded{transform:rotate(-90deg);transform-origin:50% 50%;transition:transform .15s ease-in}.swagger-ui .json-schema-2020-12-accordion__icon--collapsed{transform:rotate(0deg);transform-origin:50% 50%;transition:transform .15s ease-in}.swagger-ui .json-schema-2020-12-accordion__icon svg{height:20px;width:20px}.swagger-ui .json-schema-2020-12-expand-deep-button{border:none;color:#505050;color:#afaeae;font-family:sans-serif;font-size:12px;padding-right:0}.swagger-ui .model-box .json-schema-2020-12:not(.json-schema-2020-12--embedded)>.json-schema-2020-12-head .json-schema-2020-12__title:first-of-type{font-size:16px}.swagger-ui .model-box>.json-schema-2020-12{margin:0}.swagger-ui .model-box .json-schema-2020-12{background-color:transparent;padding:0}.swagger-ui .model-box .json-schema-2020-12-accordion,.swagger-ui .model-box .json-schema-2020-12-expand-deep-button{background-color:transparent}.swagger-ui .models .json-schema-2020-12:not(.json-schema-2020-12--embedded)>.json-schema-2020-12-head .json-schema-2020-12__title:first-of-type{font-size:16px}.swagger-ui .models .json-schema-2020-12:not(.json-schema-2020-12--embedded){overflow-x:auto;width:calc(100% - 40px)}html.dark-mode{background:#1c2022}html.dark-mode .swagger-ui{background:#1c2022;color:#e4e6e6}html.dark-mode .swagger-ui .authorization__btn svg,html.dark-mode .swagger-ui .expand-operation svg,html.dark-mode .swagger-ui .opblock-control-arrow svg{fill:#b7bcbf;opacity:1}html.dark-mode .swagger-ui .markdown p,html.dark-mode .swagger-ui .markdown pre,html.dark-mode .swagger-ui .renderedMarkdown p,html.dark-mode .swagger-ui .renderedMarkdown pre,html.dark-mode .swagger-ui section h3,html.dark-mode .swagger-ui table thead tr td,html.dark-mode .swagger-ui table thead tr th{color:#e4e6e6}html.dark-mode .swagger-ui .markdown code,html.dark-mode .swagger-ui .renderedMarkdown code{background:#080a0b;color:#b68ae1}html.dark-mode .swagger-ui input{background:#1c2022;border-color:#b7bcbf;color:#f0f1f1}html.dark-mode .swagger-ui input:focus:not(.download-url-input){border-color:#51a8ff!important;box-shadow:none;outline:none}html.dark-mode .swagger-ui textarea{background:#0d1014;border:1px solid #0d1014;color:#f0f1f1}html.dark-mode .swagger-ui textarea:focus{border-color:#51a8ff}html.dark-mode .swagger-ui textarea[disabled]{background-color:#202225;border-color:#202225;color:#8c969a}html.dark-mode .swagger-ui select{background:#1c2022 url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path fill=\"%23B7BCBF\" d=\"M13.418 7.859a.695.695 0 0 1 .978 0 .68.68 0 0 1 0 .969l-3.908 3.83a.697.697 0 0 1-.979 0l-3.908-3.83a.68.68 0 0 1 0-.969.695.695 0 0 1 .978 0L10 11z\"/></svg>") right 10px center no-repeat;border-color:#b7bcbf;box-shadow:none;color:#f0f1f1;outline:none}html.dark-mode .swagger-ui select[multiple]{background:#1c2022}html.dark-mode .swagger-ui select:focus{border-color:#51a8ff}html.dark-mode .swagger-ui input::-moz-placeholder, html.dark-mode .swagger-ui textarea::-moz-placeholder{color:#f0f1f1;opacity:.5}html.dark-mode .swagger-ui input::placeholder,html.dark-mode .swagger-ui textarea::placeholder{color:#f0f1f1;opacity:.5}html.dark-mode .swagger-ui input.invalid,html.dark-mode .swagger-ui select.invalid,html.dark-mode .swagger-ui textarea.invalid{background:#1c2022;border-color:#ff5f5f}html.dark-mode .swagger-ui .topbar{background:#2a2e30}html.dark-mode .swagger-ui .topbar .download-url-wrapper .download-url-button{background:#1d632e;color:#e4e6e6}html.dark-mode .swagger-ui .topbar .download-url-wrapper .download-url-input{border-color:#1d632e}html.dark-mode .swagger-ui .topbar .download-url-wrapper .download-url-input.failed{color:#ff5f5f}html.dark-mode .swagger-ui .dialog-ux .modal-ux{background-color:#2a2e30;border:none;color:#e4e6e6}html.dark-mode .swagger-ui .dialog-ux .modal-ux-header{border-color:#545d61}html.dark-mode .swagger-ui .dialog-ux .modal-ux-header .close-modal svg{fill:#e4e6e6}html.dark-mode .swagger-ui .dialog-ux .modal-ux h2,html.dark-mode .swagger-ui .dialog-ux .modal-ux h3,html.dark-mode .swagger-ui .dialog-ux .modal-ux h4,html.dark-mode .swagger-ui .dialog-ux .modal-ux h5,html.dark-mode .swagger-ui .dialog-ux .modal-ux label,html.dark-mode .swagger-ui .dialog-ux .modal-ux p{color:#e4e6e6}html.dark-mode .swagger-ui .dialog-ux .modal-ux .scopes a{color:#51a8ff}html.dark-mode .swagger-ui .dialog-ux .modal-ux .btn.modal-btn{border-color:#3ece90;color:#3ece90}html.dark-mode .swagger-ui .dialog-ux .modal-ux .btn.modal-btn.btn-done{border-color:#e4e6e6;color:#e4e6e6}html.dark-mode .swagger-ui .dialog-ux .modal-ux .auth-container{border-color:#545d61}html.dark-mode .swagger-ui .dialog-ux .modal-ux .checkbox input[type=checkbox]+label>.item{background:#545d61;box-shadow:none;color:#f0f1f1!important}html.dark-mode .swagger-ui .dialog-ux .modal-ux .checkbox input[type=checkbox]:checked+label>.item{background:#545d61 url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"8\" viewBox=\"3 7 10 8\"><path fill=\"%23E4E6E6\" fill-rule=\"evenodd\" d=\"M6.333 15 3 11.667l1.333-1.334 2 2L11.667 7 13 8.333z\"/></svg>") 50% no-repeat}html.dark-mode .swagger-ui .loading-container .loading:before{border-color:#e4e6e6 #545d61 #545d61}html.dark-mode .swagger-ui .loading-container .loading:after{color:#e4e6e6}html.dark-mode .swagger-ui .scheme-container{background:#1c2022;box-shadow:0 1px 2px 0 #545d61}html.dark-mode .swagger-ui .scheme-container .schemes>.schemes-server-container>label{color:#e4e6e6}html.dark-mode .swagger-ui .scheme-container .btn.authorize{border-color:#3ece90;color:#3ece90}html.dark-mode .swagger-ui .scheme-container .btn.authorize svg{fill:#3ece90}html.dark-mode .swagger-ui .info .title,html.dark-mode .swagger-ui .info h1,html.dark-mode .swagger-ui .info h2,html.dark-mode .swagger-ui .info h3,html.dark-mode .swagger-ui .info h4,html.dark-mode .swagger-ui .info h5{color:#d2d6d7}html.dark-mode .swagger-ui .info .base-url,html.dark-mode .swagger-ui .info li,html.dark-mode .swagger-ui .info p,html.dark-mode .swagger-ui .info table{color:#e4e6e6}html.dark-mode .swagger-ui .info a{color:#51a8ff}html.dark-mode .swagger-ui .info .title small{background:#434b4f}html.dark-mode .swagger-ui .info .title small.version-stamp{background:#1d632e}html.dark-mode .swagger-ui .info .errors-wrapper{background:#434b4f;border-color:#ff5f5f}html.dark-mode .swagger-ui .info .errors-wrapper h4,html.dark-mode .swagger-ui .info .errors-wrapper span{color:#e4e6e6}html.dark-mode .swagger-ui .info .errors-wrapper .btn.errors__clear-btn{border-color:#e4e6e6;color:#e4e6e6}html.dark-mode .swagger-ui .copy-to-clipboard,html.dark-mode .swagger-ui .download-contents{background:#545d61;color:#e4e6e6}html.dark-mode .swagger-ui .copy-to-clipboard button,html.dark-mode .swagger-ui .download-contents button{background:url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"15\" aria-hidden=\"true\"><path fill=\"%23E4E6E6\" fill-rule=\"evenodd\" d=\"M4 12h4v1H4zm5-6H4v1h5zm2 3V7l-3 3 3 3v-2h5V9zM6.5 8H4v1h2.5zM4 11h2.5v-1H4zm9 1h1v2c-.02.28-.11.52-.3.7s-.42.28-.7.3H3c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h3c0-1.11.89-2 2-2s2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V5H3v9h10zM4 4h8c0-.55-.45-1-1-1h-1c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H5c-.55 0-1 .45-1 1\"/></svg>") 50% no-repeat}html.dark-mode .swagger-ui .opblock-tag{border-bottom-color:#545d61;color:#e4e6e6}html.dark-mode .swagger-ui .opblock-tag small{color:#e4e6e6}html.dark-mode .swagger-ui .opblock-tag a.link{color:#51a8ff}html.dark-mode .swagger-ui .opblock.opblock-post{background:#112929;border-color:#104834}html.dark-mode .swagger-ui .opblock.opblock-post thead tr td,html.dark-mode .swagger-ui .opblock.opblock-post thead tr th{border-color:#104834;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-post .opblock-section-header{background:#14392c;border-bottom:1px solid #104834;border-top:1px solid #104834}html.dark-mode .swagger-ui .opblock.opblock-post .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#00b572}html.dark-mode .swagger-ui .opblock.opblock-post .opblock-summary{border-bottom:none;border-color:#104834}html.dark-mode .swagger-ui .opblock.opblock-post .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-post .opblock-summary-method{background:#00b572;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-post .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-post .opblock-body>.opblock-title_normal{border-top:1px solid #104834}html.dark-mode .swagger-ui .opblock.opblock-deprecated{background:#272c34;border-color:#495361}html.dark-mode .swagger-ui .opblock.opblock-deprecated thead tr td,html.dark-mode .swagger-ui .opblock.opblock-deprecated thead tr th{border-color:#495361;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-section-header{background:#262e36;border-bottom:1px solid #495361;border-top:1px solid #495361}html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#6a6a6a}html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-summary{border-bottom:none;border-color:#495361}html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-summary-method{background:#6a6a6a;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-deprecated .opblock-body>.opblock-title_normal{border-top:1px solid #495361}html.dark-mode .swagger-ui .opblock.opblock-put{background:#27201e;border-color:#523524}html.dark-mode .swagger-ui .opblock.opblock-put thead tr td,html.dark-mode .swagger-ui .opblock.opblock-put thead tr th{border-color:#523524;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-put .opblock-section-header{background:#9a5b3e;border-bottom:1px solid #523524;border-top:1px solid #523524}html.dark-mode .swagger-ui .opblock.opblock-put .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#ff7d35}html.dark-mode .swagger-ui .opblock.opblock-put .opblock-summary{border-bottom:none;border-color:#523524}html.dark-mode .swagger-ui .opblock.opblock-put .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-put .opblock-summary-method{background:#ff7d35;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-put .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-put .opblock-body>.opblock-title_normal{border-top:1px solid #523524}html.dark-mode .swagger-ui .opblock.opblock-get{background:#182536;border-color:#294262}html.dark-mode .swagger-ui .opblock.opblock-get thead tr td,html.dark-mode .swagger-ui .opblock.opblock-get thead tr th{border-color:#294262;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-get .opblock-section-header{background:#1c3043;border-bottom:1px solid #294262;border-top:1px solid #294262}html.dark-mode .swagger-ui .opblock.opblock-get .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#55a1ff}html.dark-mode .swagger-ui .opblock.opblock-get .opblock-summary{border-bottom:none;border-color:#294262}html.dark-mode .swagger-ui .opblock.opblock-get .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-get .opblock-summary-method{background:#55a1ff;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-get .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-get .opblock-body>.opblock-title_normal{border-top:1px solid #294262}html.dark-mode .swagger-ui .opblock.opblock-delete{background:#241a20;border-color:#4b2420}html.dark-mode .swagger-ui .opblock.opblock-delete thead tr td,html.dark-mode .swagger-ui .opblock.opblock-delete thead tr th{border-color:#4b2420;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-section-header{background:#2f2020;border-bottom:1px solid #4b2420;border-top:1px solid #4b2420}html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#eb6156}html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-summary{border-bottom:none;border-color:#4b2420}html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-summary-method{background:#eb6156;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-delete .opblock-body>.opblock-title_normal{border-top:1px solid #4b2420}html.dark-mode .swagger-ui .opblock.opblock-patch{background:#11282f;border-color:#16494b}html.dark-mode .swagger-ui .opblock.opblock-patch thead tr td,html.dark-mode .swagger-ui .opblock.opblock-patch thead tr th{border-color:#16494b;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-section-header{background:#113239;border-bottom:1px solid #16494b;border-top:1px solid #16494b}html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#03b7bf}html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-summary{border-bottom:none;border-color:#16494b}html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-summary-method{background:#03b7bf;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-patch .opblock-body>.opblock-title_normal{border-top:1px solid #16494b}html.dark-mode .swagger-ui .opblock.opblock-head{background:#282231;border-color:#44336a}html.dark-mode .swagger-ui .opblock.opblock-head thead tr td,html.dark-mode .swagger-ui .opblock.opblock-head thead tr th{border-color:#44336a;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-head .opblock-section-header{background:#352c45;border-bottom:1px solid #44336a;border-top:1px solid #44336a}html.dark-mode .swagger-ui .opblock.opblock-head .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#b889ff}html.dark-mode .swagger-ui .opblock.opblock-head .opblock-summary{border-bottom:none;border-color:#44336a}html.dark-mode .swagger-ui .opblock.opblock-head .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-head .opblock-summary-method{background:#b889ff;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-head .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-head .opblock-body>.opblock-title_normal{border-top:1px solid #44336a}html.dark-mode .swagger-ui .opblock.opblock-options{background:#202c3c;border-color:#33465e}html.dark-mode .swagger-ui .opblock.opblock-options thead tr td,html.dark-mode .swagger-ui .opblock.opblock-options thead tr th{border-color:#33465e;opacity:1}html.dark-mode .swagger-ui .opblock.opblock-options .opblock-section-header{background:#314558;border-bottom:1px solid #33465e;border-top:1px solid #33465e}html.dark-mode .swagger-ui .opblock.opblock-options .opblock-section-header .tab-header .tab-item .opblock-title span:after{background:#6895c8}html.dark-mode .swagger-ui .opblock.opblock-options .opblock-summary{border-bottom:none;border-color:#33465e}html.dark-mode .swagger-ui .opblock.opblock-options .opblock-summary-control:focus{outline:none}html.dark-mode .swagger-ui .opblock.opblock-options .opblock-summary-method{background:#6895c8;color:#080a0b;text-shadow:none}html.dark-mode .swagger-ui .opblock.opblock-options .opblock-body>.opblock-description-wrapper,html.dark-mode .swagger-ui .opblock.opblock-options .opblock-body>.opblock-title_normal{border-top:1px solid #33465e}html.dark-mode .swagger-ui .opblock .opblock-section-header{box-shadow:none}html.dark-mode .swagger-ui .opblock .opblock-section-header h4,html.dark-mode .swagger-ui .opblock .opblock-section-header label{color:#e4e6e6}html.dark-mode .swagger-ui .opblock .opblock-section-header .try-out__btn{border-color:#b7bcbf;box-shadow:none;color:#e4e6e6}html.dark-mode .swagger-ui .opblock .opblock-section-header .try-out__btn.cancel{border-color:#ff5f5f;color:#ff5f5f}html.dark-mode .swagger-ui .opblock .btn.json-schema-form-item-add,html.dark-mode .swagger-ui .opblock .btn.json-schema-form-item-remove{border-color:#e4e6e6;color:#e4e6e6}html.dark-mode .swagger-ui .opblock .validation-errors.errors-wrapper{background:#434b4f;border-color:#ff5f5f;color:#e4e6e6}html.dark-mode .swagger-ui .opblock .body-param-options label span,html.dark-mode .swagger-ui .opblock .opblock-description-wrapper i,html.dark-mode .swagger-ui .opblock .opblock-description-wrapper p,html.dark-mode .swagger-ui .opblock .opblock-external-docs-wrapper,html.dark-mode .swagger-ui .opblock .opblock-summary-description,html.dark-mode .swagger-ui .opblock .opblock-summary-operation-id,html.dark-mode .swagger-ui .opblock .opblock-summary-path,html.dark-mode .swagger-ui .opblock .opblock-summary-path__deprecated,html.dark-mode .swagger-ui .opblock .opblock-title_normal,html.dark-mode .swagger-ui .opblock .parameter__in,html.dark-mode .swagger-ui .opblock .parameter__name,html.dark-mode .swagger-ui .opblock .parameter__type,html.dark-mode .swagger-ui .opblock .parameter__type .prop-format,html.dark-mode .swagger-ui .opblock .response-col_links,html.dark-mode .swagger-ui .opblock .response-col_status,html.dark-mode .swagger-ui .opblock .response-col_undocumented{color:#e4e6e6}html.dark-mode .swagger-ui .opblock .opblock-external-docs a.link{color:#51a8ff}html.dark-mode .swagger-ui .opblock .parameter__name.required span,html.dark-mode .swagger-ui .opblock .parameter__name.required:after{color:#ff5f5f}html.dark-mode .swagger-ui .opblock .parameter__empty_value_toggle{color:#e4e6e6}html.dark-mode .swagger-ui .opblock .btn.execute{background:#51a8ff;border-color:#51a8ff;color:#080a0b}html.dark-mode .swagger-ui .opblock .btn.btn-clear{border-color:#e4e6e6;color:#e4e6e6}html.dark-mode .swagger-ui .opblock .highlight-code pre.microlight{background:#2a2e30!important;color:#f0f1f1}html.dark-mode .swagger-ui .opblock .curl-command .btn{background:#3b424d!important;border-color:#2a2e30!important;color:#ebebeb!important}html.dark-mode .swagger-ui .opblock .curl-command .btn.active{background:#2a2e30!important;color:#e4e6e6!important}html.dark-mode .swagger-ui .opblock pre.microlight{background:#2a2e30!important;color:#f0f1f1}html.dark-mode .swagger-ui .opblock .model-example .tab button{color:#e4e6e6}html.dark-mode .swagger-ui .opblock .model-example .tabitem:after{background:#6b757a}html.dark-mode .swagger-ui .opblock .responses-inner h4,html.dark-mode .swagger-ui .opblock .responses-inner h5{color:#e4e6e6}html.dark-mode .swagger-ui .opblock .response-control-media-type--accept-controller select.content-type{border-color:#4ac966}html.dark-mode .swagger-ui .opblock .response-control-media-type--accept-controller .response-control-media-type__accept-message{color:#4ac966}html.dark-mode .swagger-ui .model-toggle:after{background:url("data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"%23e4e6e6\" d=\"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>") 50% no-repeat;background-size:100%}html.dark-mode .swagger-ui .model .prop-type{color:#b68ae1}html.dark-mode .swagger-ui .model .brace-close,html.dark-mode .swagger-ui .model .brace-open,html.dark-mode .swagger-ui .model .description,html.dark-mode .swagger-ui .model .prop-format,html.dark-mode .swagger-ui .model .property,html.dark-mode .swagger-ui .model .property-row{color:#e4e6e6}html.dark-mode .swagger-ui .model .property-row.required .star{color:#ff5f5f}html.dark-mode .swagger-ui .model-box{background:#2a2e30}html.dark-mode .swagger-ui .model-box .model,html.dark-mode .swagger-ui .model-box .model-title{color:#e4e6e6}html.dark-mode .swagger-ui .model-box-control:focus{outline:none}html.dark-mode .swagger-ui .model-box-control:not(.prop){color:#e4e6e6}html.dark-mode .swagger-ui .json-schema-2020-12,html.dark-mode .swagger-ui .json-schema-2020-12 button{background:#2a2e30}html.dark-mode .swagger-ui .json-schema-2020-12 button svg{fill:#e4e6e6}html.dark-mode .swagger-ui .json-schema-2020-12 a{color:#51a8ff}html.dark-mode .swagger-ui .json-schema-2020-12__title{color:#e4e6e6}html.dark-mode .swagger-ui .json-schema-2020-12-property--required>.json-schema-2020-12:first-of-type>.json-schema-2020-12-head .json-schema-2020-12__title:after{color:#ff5f5f}html.dark-mode .swagger-ui .json-schema-2020-12-expand-deep-button{color:#b7bcbf}html.dark-mode .swagger-ui .json-schema-2020-12-body{border-color:#b7bcbf}html.dark-mode .swagger-ui .json-schema-2020-12-keyword__name--primary{color:#e4e6e6}html.dark-mode .swagger-ui .json-schema-2020-12-keyword__name--secondary,html.dark-mode .swagger-ui .json-schema-2020-12-keyword__value--secondary{color:#b7bcbf}html.dark-mode .swagger-ui .json-schema-2020-12-keyword__value--warning{border-color:#ff5f5f;color:#ff5f5f}html.dark-mode .swagger-ui .json-schema-2020-12-keyword--\$vocabulary ul{border-color:#b7bcbf}html.dark-mode .swagger-ui .json-schema-2020-12-keyword--patternProperties .json-schema-2020-12__title:after,html.dark-mode .swagger-ui .json-schema-2020-12-keyword--patternProperties .json-schema-2020-12__title:before,html.dark-mode .swagger-ui .json-schema-2020-12__attribute--primary{color:#9898ff}html.dark-mode .swagger-ui .json-schema-2020-12__attribute--muted{color:#b7bcbf}html.dark-mode .swagger-ui .json-schema-2020-12__attribute--warning{color:#ff5f5f}html.dark-mode .swagger-ui .json-schema-2020-12-json-viewer__name--secondary,html.dark-mode .swagger-ui .json-schema-2020-12-json-viewer__value--secondary{color:#b7bcbf}html.dark-mode .swagger-ui .json-schema-2020-12__constraint{background:#9898ff;color:#080a0b}html.dark-mode .swagger-ui .json-schema-2020-12__constraint--string{background:#d4aa53}html.dark-mode .swagger-ui section.models,html.dark-mode .swagger-ui section.models h4{border-color:#545d61}html.dark-mode .swagger-ui section.models h4 span{color:#e4e6e6}html.dark-mode .swagger-ui section.models .model-container{background:#2a2e30}html.dark-mode .swagger-ui section.models .models-control:focus{outline:none}html.dark-mode .swagger-ui section.models .models-control svg{fill:#b7bcbf}

/*# sourceMappingURL=swagger-ui.css.map*/
</file>

<file path=".gitignore">
node_modules

# Output
.output
.vercel
.netlify
.wrangler
/.svelte-kit
/build

# OS
.DS_Store
Thumbs.db

# Env
.env
.env.*
!.env.example
!.env.test

# Vite
vite.config.js.timestamp-*
vite.config.ts.timestamp-*
</file>

<file path=".npmrc">
engine-strict=true
</file>

<file path=".prettierignore">
# Package Managers
package-lock.json
pnpm-lock.yaml
yarn.lock
bun.lock
bun.lockb

# Miscellaneous
/static/
</file>

<file path=".prettierrc">
{
	"useTabs": true,
	"singleQuote": true,
	"trailingComma": "none",
	"printWidth": 100,
	"plugins": ["prettier-plugin-svelte"],
	"overrides": [
		{
			"files": "*.svelte",
			"options": {
				"parser": "svelte"
			}
		}
	]
}
</file>

<file path="eslint.config.js">
import prettier from 'eslint-config-prettier';
import { fileURLToPath } from 'node:url';
import { includeIgnoreFile } from '@eslint/compat';
import js from '@eslint/js';
import svelte from 'eslint-plugin-svelte';
import { defineConfig } from 'eslint/config';
import globals from 'globals';
import ts from 'typescript-eslint';
import svelteConfig from './svelte.config.js';

const gitignorePath = fileURLToPath(new URL('./.gitignore', import.meta.url));

export default defineConfig(
	includeIgnoreFile(gitignorePath),
	js.configs.recommended,
	...ts.configs.recommended,
	...svelte.configs.recommended,
	prettier,
	...svelte.configs.prettier,
	{
		languageOptions: { globals: { ...globals.browser, ...globals.node } },

		rules: {
			// typescript-eslint strongly recommend that you do not use the no-undef lint rule on TypeScript projects.
			// see: https://typescript-eslint.io/troubleshooting/faqs/eslint/#i-get-errors-from-the-no-undef-rule-about-global-variables-not-being-defined-even-though-there-are-no-typescript-errors
			'no-undef': 'off'
		}
	},
	{
		files: ['**/*.svelte', '**/*.svelte.ts', '**/*.svelte.js'],

		languageOptions: {
			parserOptions: {
				projectService: true,
				extraFileExtensions: ['.svelte'],
				parser: ts.parser,
				svelteConfig
			}
		}
	}
);
</file>

<file path="svelte.config.js">
import adapter from '@sveltejs/adapter-auto';
import { vitePreprocess } from '@sveltejs/vite-plugin-svelte';

/** @type {import('@sveltejs/kit').Config} */
const config = {
	// Consult https://svelte.dev/docs/kit/integrations
	// for more information about preprocessors
	preprocess: vitePreprocess(),

	kit: {
		// adapter-auto only supports some environments, see https://svelte.dev/docs/kit/adapter-auto for a list.
		// If your environment is not supported, or you settled on a specific environment, switch out the adapter.
		// See https://svelte.dev/docs/kit/adapters for more information about adapters.
		adapter: adapter()
	}
};

export default config;
</file>

<file path="tsconfig.json">
{
	"extends": "./.svelte-kit/tsconfig.json",
	"compilerOptions": {
		"rewriteRelativeImportExtensions": true,
		"allowJs": true,
		"checkJs": true,
		"esModuleInterop": true,
		"forceConsistentCasingInFileNames": true,
		"resolveJsonModule": true,
		"skipLibCheck": true,
		"sourceMap": true,
		"strict": true,
		"moduleResolution": "bundler"
	}
	// Path aliases are handled by https://svelte.dev/docs/kit/configuration#alias
	// except $lib which is handled by https://svelte.dev/docs/kit/configuration#files
	//
	// To make changes to top-level options such as include and exclude, we recommend extending
	// the generated config; see https://svelte.dev/docs/kit/configuration#typescript
}
</file>

<file path=".agent/workflows/publish.md">
---
description: GitHubã¸ã‚¯ãƒªãƒ¼ãƒ³ãªã‚³ãƒŸãƒƒãƒˆã‚’å…¬é–‹ã™ã‚‹ï¼ˆdocsé™¤å¤–ï¼‰
---

# GitHubå…¬é–‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒã®å¤‰æ›´ã‚’GitHubã¸å…¬é–‹ã—ã¾ã™ã€‚**docsãƒ•ã‚©ãƒ«ãƒ€ã¯è‡ªå‹•çš„ã«é™¤å¤–ã•ã‚Œã¾ã™ã€‚**

## æ‰‹é †

// turbo
1. `git stash` ã§æœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ã‚’é€€é¿
// turbo
2. `git checkout -b public-clean` ã§ä¸€æ™‚ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
// turbo
3. `git rm -r --cached docs/ .agent/` ã§docsã¨.agentã‚’Gitè¿½è·¡ã‹ã‚‰é™¤å¤–
// turbo
4. `git commit -m "chore: Remove private docs for public release"` ã§ã‚³ãƒŸãƒƒãƒˆ
5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ—ãƒƒã‚·ãƒ¥å†…å®¹ã‚’ç¢ºèªã™ã‚‹
// turbo
6. `git push public public-clean:main --force` ã§GitHubã¸ãƒ—ãƒƒã‚·ãƒ¥
// turbo
7. `git checkout main --force` ã§mainãƒ–ãƒ©ãƒ³ãƒã«æˆ»ã‚‹
// turbo
8. `git branch -D public-clean` ã§ä¸€æ™‚ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤
// turbo
9. `git stash pop` ã§é€€é¿ã—ãŸå¤‰æ›´ã‚’å¾©å…ƒ
10. å®Œäº†ã‚’å ±å‘Šã™ã‚‹

## é™¤å¤–ã•ã‚Œã‚‹ãƒ•ã‚©ãƒ«ãƒ€

- `docs/` - å†…éƒ¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `.agent/` - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š
</file>

<file path="src/lib/components/ui/Button.svelte">
<!--
  Button Component
  SFé¢¨ã®ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
-->
<script lang="ts">
	import type { Snippet } from 'svelte';
	import type { HTMLButtonAttributes } from 'svelte/elements';

	interface Props extends HTMLButtonAttributes {
		variant?: 'primary' | 'secondary' | 'ghost' | 'danger' | 'accent';
		size?: 'sm' | 'md' | 'lg';
		loading?: boolean;
		children?: Snippet;
	}

	let {
		variant = 'primary',
		size = 'md',
		loading = false,
		disabled,
		children,
		...restProps
	}: Props = $props();
</script>

<button
	class="btn btn--{variant} btn--{size}"
	class:btn--loading={loading}
	disabled={disabled || loading}
	{...restProps}
>
	{#if loading}
		<span class="btn__spinner"></span>
	{/if}
	<span class="btn__content" class:btn__content--hidden={loading}>
		{#if children}
			{@render children()}
		{/if}
	</span>
</button>

<style>
	.btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: var(--space-2);
		font-family: var(--font-sans);
		font-weight: 500;
		border: 1px solid transparent;
		border-radius: var(--radius-md);
		cursor: pointer;
		transition: all var(--transition-fast);
		position: relative;
		overflow: hidden;
	}

	.btn:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}

	/* Sizes */
	.btn--sm {
		padding: var(--space-1) var(--space-3);
		font-size: var(--font-size-xs);
	}

	.btn--md {
		padding: var(--space-2) var(--space-4);
		font-size: var(--font-size-sm);
	}

	.btn--lg {
		padding: var(--space-3) var(--space-6);
		font-size: var(--font-size-base);
	}

	/* Variants */
	.btn--primary {
		background: var(--gradient-primary);
		color: white;
		border-color: var(--color-accent-primary);
	}

	.btn--primary:hover:not(:disabled) {
		box-shadow: var(--shadow-glow);
		transform: translateY(-1px);
	}

	.btn--secondary {
		background: var(--color-bg-tertiary);
		color: var(--color-text-primary);
		border-color: var(--color-border-primary);
	}

	.btn--secondary:hover:not(:disabled) {
		background: var(--color-bg-hover);
		border-color: var(--color-accent-primary);
	}

	.btn--ghost {
		background: transparent;
		color: var(--color-text-secondary);
		border-color: transparent;
	}

	.btn--ghost:hover:not(:disabled) {
		background: var(--color-bg-hover);
		color: var(--color-text-primary);
	}

	.btn--danger {
		background: var(--color-accent-error);
		color: white;
		border-color: var(--color-accent-error);
	}

	.btn--danger:hover:not(:disabled) {
		background: #dc2626;
		box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
	}

	.btn--accent {
		background: linear-gradient(135deg, var(--color-accent-secondary), var(--color-accent-primary));
		color: white;
		border-color: var(--color-accent-secondary);
	}

	.btn--accent:hover:not(:disabled) {
		box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
		transform: translateY(-1px);
	}

	/* Loading */
	.btn__spinner {
		position: absolute;
		width: 16px;
		height: 16px;
		border: 2px solid transparent;
		border-top-color: currentColor;
		border-radius: 50%;
		animation: spin 0.8s linear infinite;
	}

	.btn__content--hidden {
		visibility: hidden;
	}

	@keyframes spin {
		to {
			transform: rotate(360deg);
		}
	}
</style>
</file>

<file path="src/lib/components/ui/index.ts">
// UI Components
export { default as Panel } from './Panel.svelte';
export { default as Button } from './Button.svelte';
export { default as StatusIndicator } from './StatusIndicator.svelte';
export { default as VirtualList } from './VirtualList.svelte';
</file>

<file path="src/lib/components/MermaidDiagram.svelte">
<!--
  Mermaid Diagram Component
  Mermaidå›³ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
-->
<script lang="ts">
	import { onMount } from 'svelte';

	interface Props {
		code: string;
		id?: string;
	}

	let { code, id = 'mermaid-diagram' }: Props = $props();
	let container: HTMLDivElement;
	let svg = $state('');
	let error = $state<string | null>(null);

	onMount(async () => {
		try {
			// Mermaidã‚’å‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
			const mermaid = await import('mermaid');
			mermaid.default.initialize({
				startOnLoad: false,
				theme: 'dark',
				themeVariables: {
					primaryColor: '#0ea5e9',
					primaryTextColor: '#f8fafc',
					primaryBorderColor: '#334155',
					lineColor: '#64748b',
					secondaryColor: '#1e293b',
					tertiaryColor: '#0f172a'
				}
			});

			const { svg: renderedSvg } = await mermaid.default.render(id, code);
			svg = renderedSvg;
			error = null;
		} catch (e) {
			console.error('Mermaid render error:', e);
			error = e instanceof Error ? e.message : 'Mermaid rendering failed';
		}
	});

	// codeãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹ä»˜ãï¼‰
	let debounceTimer: ReturnType<typeof setTimeout> | null = null;

	$effect(() => {
		if (code && container) {
			// å‰å›ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢
			if (debounceTimer) {
				clearTimeout(debounceTimer);
			}

			// 300msã®ãƒ‡ãƒã‚¦ãƒ³ã‚¹
			debounceTimer = setTimeout(async () => {
				try {
					const mermaid = await import('mermaid');
					const uniqueId = `${id}-${Date.now()}`;
					const { svg: renderedSvg } = await mermaid.default.render(uniqueId, code);
					svg = renderedSvg;
					error = null;
				} catch (e) {
					error = e instanceof Error ? e.message : 'Mermaid rendering failed';
				}
			}, 300);
		}
	});
</script>

<div class="mermaid-container" bind:this={container}>
	{#if error}
		<div class="mermaid-error">
			<span class="error-icon">âš ï¸</span>
			<span class="error-text">{error}</span>
		</div>
	{:else if svg}
		{@html svg}
	{:else}
		<div class="mermaid-loading">Loading diagram...</div>
	{/if}
</div>

<style>
	.mermaid-container {
		display: flex;
		justify-content: center;
		align-items: center;
		min-height: 100px;
		padding: var(--space-4);
		background: var(--color-bg-tertiary);
		border-radius: var(--radius-md);
		overflow: auto;
	}

	.mermaid-container :global(svg) {
		max-width: 100%;
		height: auto;
	}

	.mermaid-error {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		color: var(--color-accent-warning);
		font-size: var(--font-size-sm);
	}

	.mermaid-loading {
		color: var(--color-text-muted);
		font-size: var(--font-size-sm);
	}
</style>
</file>

<file path="src/lib/components/Sidebar.svelte">
<!--
  Sidebar Component
  ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚µã‚¤ãƒ‰ãƒãƒ¼
-->
<script lang="ts">
	import { page } from '$app/stores';

	const navItems = [
		{ href: '/', label: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', icon: 'â—ˆ' },
		{ href: '/editor', label: 'ã‚¨ãƒ‡ã‚£ã‚¿', icon: 'âœ' },
		{ href: '/viewer', label: 'ãƒ“ãƒ¥ãƒ¼ã‚¢', icon: 'â—' },
		{ href: '/history', label: 'å±¥æ­´', icon: 'â§–' },
		{ href: '/api-docs', label: 'API Docs', icon: 'ğŸ“š' },
		{ href: '/settings', label: 'è¨­å®š', icon: 'âš™' }
	];
</script>

<aside class="sidebar">
	<div class="sidebar__logo">
		<span class="sidebar__logo-icon">â—‡</span>
		<span class="sidebar__logo-text">Spec-Flow</span>
	</div>

	<nav class="sidebar__nav">
		{#each navItems as item}
			<a
				href={item.href}
				class="sidebar__link"
				class:sidebar__link--active={$page.url.pathname === item.href}
			>
				<span class="sidebar__link-icon">{item.icon}</span>
				<span class="sidebar__link-label">{item.label}</span>
			</a>
		{/each}
	</nav>

	<div class="sidebar__footer">
		<span class="sidebar__version">v0.1.0</span>
	</div>
</aside>

<style>
	.sidebar {
		position: fixed;
		top: 0;
		left: 0;
		width: var(--sidebar-width);
		height: 100vh;
		background: var(--gradient-panel);
		border-right: 1px solid var(--color-border-primary);
		display: flex;
		flex-direction: column;
		z-index: 100;
	}

	.sidebar__logo {
		padding: var(--space-5);
		display: flex;
		align-items: center;
		gap: var(--space-3);
		border-bottom: 1px solid var(--color-border-secondary);
	}

	.sidebar__logo-icon {
		font-size: var(--font-size-2xl);
		color: var(--color-accent-primary);
		animation: pulse-glow 3s ease-in-out infinite;
	}

	.sidebar__logo-text {
		font-size: var(--font-size-lg);
		font-weight: 600;
		color: var(--color-text-primary);
	}

	.sidebar__nav {
		flex: 1;
		padding: var(--space-4);
		display: flex;
		flex-direction: column;
		gap: var(--space-1);
	}

	.sidebar__link {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		padding: var(--space-3) var(--space-4);
		border-radius: var(--radius-md);
		color: var(--color-text-secondary);
		text-decoration: none;
		transition: all var(--transition-fast);
	}

	.sidebar__link:hover {
		background: var(--color-bg-hover);
		color: var(--color-text-primary);
	}

	.sidebar__link--active {
		background: rgba(0, 212, 255, 0.1);
		color: var(--color-accent-primary);
		border-left: 2px solid var(--color-accent-primary);
	}

	.sidebar__link-icon {
		font-size: var(--font-size-lg);
		width: 24px;
		text-align: center;
	}

	.sidebar__link-label {
		font-size: var(--font-size-sm);
		font-weight: 500;
	}

	.sidebar__footer {
		padding: var(--space-4);
		border-top: 1px solid var(--color-border-secondary);
		text-align: center;
	}

	.sidebar__version {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		font-family: var(--font-mono);
	}

	@keyframes pulse-glow {
		0%,
		100% {
			text-shadow: 0 0 5px var(--color-accent-primary);
		}
		50% {
			text-shadow: 0 0 15px var(--color-accent-primary);
		}
	}
</style>
</file>

<file path="src/lib/components/StatusBar.svelte">
<!--
  StatusBar Component
  ç”»é¢ä¸‹éƒ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ï¼ˆWebSocketæ¥ç¶šçŠ¶æ…‹ã‚’å«ã‚€ï¼‰
-->
<script lang="ts">
	import { StatusIndicator } from '$lib/components/ui';
	import { connectionStatus } from '$lib/stores/integration-store';
	import { specCount } from '$lib/stores/spec-store';
	import { artifacts } from '$lib/stores/artifact-store';
	import { wsStatus } from '$lib/services/websocket';

	// æ¥ç¶šçŠ¶æ…‹ã‚’StatusIndicatorã®statuså½¢å¼ã«å¤‰æ›
	const statusMap = {
		disconnected: 'offline',
		connecting: 'warning',
		connected: 'success',
		error: 'error'
	} as const;

	// æ¥ç¶šçŠ¶æ…‹ãƒ©ãƒ™ãƒ«
	const statusLabelMap = {
		disconnected: 'Disconnected',
		connecting: 'Connecting...',
		connected: 'Connected',
		error: 'Error'
	} as const;

	let currentStatus = $derived(statusMap[$connectionStatus]);
	let statusLabel = $derived(statusLabelMap[$wsStatus]);
	let artifactCount = $derived($artifacts.length);
	
	// æ™‚åˆ»æ›´æ–°
	let currentTime = $state(new Date());
	$effect(() => {
		const interval = setInterval(() => {
			currentTime = new Date();
		}, 1000);
		return () => clearInterval(interval);
	});
</script>

<footer class="statusbar">
	<div class="statusbar__left">
		<div class="statusbar__connection">
			<StatusIndicator status={currentStatus} size="sm" pulse={$wsStatus === 'connected'} />
			<span class="statusbar__connection-label" class:connected={$wsStatus === 'connected'}>
				{statusLabel}
			</span>
		</div>
	</div>

	<div class="statusbar__center">
		<span class="statusbar__info">
			<span class="statusbar__label">Specs:</span>
			<span class="statusbar__value">{$specCount}</span>
		</span>
		<span class="statusbar__divider">|</span>
		<span class="statusbar__info">
			<span class="statusbar__label">Artifacts:</span>
			<span class="statusbar__value">{artifactCount}</span>
		</span>
	</div>

	<div class="statusbar__right">
		<span class="statusbar__time font-mono">
			{currentTime.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit', second: '2-digit' })}
		</span>
	</div>
</footer>

<style>
	.statusbar {
		position: fixed;
		bottom: 0;
		left: var(--sidebar-width);
		right: 0;
		height: var(--statusbar-height);
		background: var(--color-bg-secondary);
		border-top: 1px solid var(--color-border-primary);
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0 var(--space-4);
		z-index: 100;
	}

	.statusbar__left,
	.statusbar__right {
		display: flex;
		align-items: center;
		gap: var(--space-3);
	}

	.statusbar__connection {
		display: flex;
		align-items: center;
		gap: var(--space-2);
	}

	.statusbar__connection-label {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		transition: color var(--transition-fast);
	}

	.statusbar__connection-label.connected {
		color: var(--color-accent-success);
	}

	.statusbar__center {
		display: flex;
		align-items: center;
		gap: var(--space-3);
	}

	.statusbar__info {
		display: flex;
		align-items: center;
		gap: var(--space-1);
		font-size: var(--font-size-xs);
	}

	.statusbar__label {
		color: var(--color-text-muted);
	}

	.statusbar__value {
		color: var(--color-text-primary);
		font-family: var(--font-mono);
	}

	.statusbar__divider {
		color: var(--color-text-muted);
	}

	.statusbar__time {
		font-size: var(--font-size-xs);
		color: var(--color-text-secondary);
	}
</style>
</file>

<file path="src/lib/stores/artifact-store.ts">
/**
 * Artifact Store
 *
 * AIç”Ÿæˆç‰©ã‚’ç®¡ç†ã™ã‚‹ã‚¹ãƒˆã‚¢ï¼ˆlocalStorageæ°¸ç¶šåŒ–å¯¾å¿œï¼‰
 */
import { writable, derived } from 'svelte/store';
import type { Artifact, ArtifactType } from '$lib/types';
import { saveToStorage, loadFromStorage, isBrowser } from '$lib/utils/storage-utils';

const STORAGE_KEY = 'spec-flow-studio:artifacts';

// åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’localStorageã‹ã‚‰èª­ã¿è¾¼ã¿
function loadInitialArtifacts(): Artifact[] {
    if (!isBrowser) return [];
    const stored = loadFromStorage<Artifact[]>(STORAGE_KEY, []);
    return stored;
}

// å…¨ã¦ã®ç”Ÿæˆç‰©
export const artifacts = writable<Artifact[]>(loadInitialArtifacts());

// localStorageã¸ã®æ°¸ç¶šåŒ–ï¼ˆå¤‰æ›´æ™‚ã«è‡ªå‹•ä¿å­˜ï¼‰
if (isBrowser) {
    artifacts.subscribe((value) => {
        saveToStorage(STORAGE_KEY, value);
    });
}

// ç”Ÿæˆç‰©ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹
export const hasArtifacts = derived(artifacts, ($artifacts) => $artifacts.length > 0);

// ç¨®é¡åˆ¥ã®ç”Ÿæˆç‰©æ•°
export const artifactCounts = derived(artifacts, ($artifacts) => {
    const counts: Record<ArtifactType, number> = {
        'ui-mock': 0,
        'api-spec': 0,
        'test-case': 0,
        'use-case-diagram': 0
    };
    $artifacts.forEach((a) => {
        counts[a.type]++;
    });
    return counts;
});

// æœ€æ–°ã®ç”Ÿæˆç‰©
export const latestArtifacts = derived(artifacts, ($artifacts) =>
    [...$artifacts].sort((a, b) => new Date(b.generatedAt).getTime() - new Date(a.generatedAt).getTime()).slice(0, 5)
);

/**
 * ç”Ÿæˆç‰©ã‚’è¿½åŠ 
 */
export function addArtifact(artifact: Artifact) {
    artifacts.update((current) => [...current, artifact]);
}

/**
 * ç”Ÿæˆç‰©ã‚’å‰Šé™¤
 */
export function removeArtifact(id: string) {
    artifacts.update((current) => current.filter((a) => a.id !== id));
}

/**
 * å…¨ã¦ã®ç”Ÿæˆç‰©ã‚’ã‚¯ãƒªã‚¢
 */
export function clearArtifacts() {
    artifacts.set([]);
}

/**
 * ç¨®é¡ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
 */
export function getArtifactsByType(type: ArtifactType): Artifact[] {
    let result: Artifact[] = [];
    artifacts.subscribe((a) => {
        result = a.filter((artifact) => artifact.type === type);
    })();
    return result;
}
</file>

<file path="src/lib/stores/history-store.ts">
import { writable, derived, get } from 'svelte/store';
import type { SpecPatch, AgentSpec } from '$lib/types';
import { saveToStorage, loadFromStorage } from '$lib/utils/storage-utils';
import { generateSpecPatch, applySpecPatch, revertSpecPatch, isPatchEmpty } from '$lib/utils/diff-utils';

const STORAGE_KEY = 'spec-flow-studio:history';
const CHECKPOINT_INTERVAL = 10; // 10ãƒ‘ãƒƒãƒã”ã¨ã«ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆ

interface Checkpoint {
    patchIndex: number; // ã“ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒæœ‰åŠ¹ãªãƒ‘ãƒƒãƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    specs: AgentSpec[]; // ãã®æ™‚ç‚¹ã®SpecsçŠ¶æ…‹
}

interface HistoryState {
    patches: SpecPatch[];
    currentIndex: number; // ç¾åœ¨é©ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒãƒã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (-1 = åˆæœŸçŠ¶æ…‹)
    baseSpecs: AgentSpec[]; // å±¥æ­´ã®èµ·ç‚¹ã¨ãªã‚‹Specs
    checkpoints: Checkpoint[]; // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ç”¨ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ
}

const DEFAULT_STATE: HistoryState = {
    patches: [],
    currentIndex: -1,
    baseSpecs: [],
    checkpoints: []
};

function createHistoryStore() {
    const stored = loadFromStorage<HistoryState>(STORAGE_KEY, DEFAULT_STATE);
    const { subscribe, set, update } = writable<HistoryState>(stored);

    // çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«æ°¸ç¶šåŒ–
    subscribe((state) => {
        saveToStorage(STORAGE_KEY, state);
    });

    return {
        subscribe,

        /**
         * å±¥æ­´ã®åˆæœŸåŒ–ï¼ˆã‚¨ãƒ‡ã‚£ã‚¿åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«å‘¼ã¶ï¼‰
         */
        initialize: (specs: AgentSpec[]) => {
            update((state) => {
                if (state.patches.length === 0) {
                    return { ...state, baseSpecs: specs };
                }
                return state;
            });
        },

        /**
         * æ–°ã—ã„ãƒ‘ãƒƒãƒã‚’è¨˜éŒ²
         */
        commit: (beforeSpecs: AgentSpec[], afterSpecs: AgentSpec[], name?: string): SpecPatch | null => {
            const patch = generateSpecPatch(beforeSpecs, afterSpecs, { name, author: 'human' });

            if (isPatchEmpty(patch)) {
                return null; // å¤‰æ›´ãªã—
            }

            update((state) => {
                // ç¾åœ¨ä½ç½®ã‚ˆã‚Šå¾Œã®ãƒ‘ãƒƒãƒã‚’ç ´æ£„ï¼ˆãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚‰ãªã„ï¼‰
                const newPatches = state.patches.slice(0, state.currentIndex + 1);
                newPatches.push(patch);
                const newIndex = newPatches.length - 1;

                // ç ´æ£„ã•ã‚ŒãŸãƒ‘ãƒƒãƒã«é–¢é€£ã™ã‚‹ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚‚å‰Šé™¤
                let newCheckpoints = state.checkpoints.filter(cp => cp.patchIndex <= state.currentIndex);

                // ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆä½œæˆï¼ˆCHECKPOINT_INTERVALã”ã¨ï¼‰
                if (newIndex > 0 && newIndex % CHECKPOINT_INTERVAL === 0) {
                    newCheckpoints = [...newCheckpoints, {
                        patchIndex: newIndex,
                        specs: afterSpecs
                    }];
                }

                return {
                    ...state,
                    patches: newPatches,
                    currentIndex: newIndex,
                    checkpoints: newCheckpoints
                };
            });

            return patch;
        },

        /**
         * Undo: 1ã¤å‰ã®çŠ¶æ…‹ã«æˆ»ã‚‹
         */
        undo: (): AgentSpec[] | null => {
            const state = get({ subscribe });
            if (state.currentIndex < 0) return null; // ã“ã‚Œä»¥ä¸Šæˆ»ã‚Œãªã„

            const targetIndex = state.currentIndex - 1;
            const specs = rebuildSpecs(state.baseSpecs, state.patches, targetIndex, state.checkpoints);

            update((s) => ({ ...s, currentIndex: targetIndex }));
            return specs;
        },

        /**
         * Redo: 1ã¤å…ˆã®çŠ¶æ…‹ã«é€²ã‚€
         */
        redo: (): AgentSpec[] | null => {
            const state = get({ subscribe });
            if (state.currentIndex >= state.patches.length - 1) return null; // ã“ã‚Œä»¥ä¸Šé€²ã‚ãªã„

            const targetIndex = state.currentIndex + 1;
            const specs = rebuildSpecs(state.baseSpecs, state.patches, targetIndex, state.checkpoints);

            update((s) => ({ ...s, currentIndex: targetIndex }));
            return specs;
        },

        /**
         * ç‰¹å®šã®ãƒ‘ãƒƒãƒã¾ã§å·»ãæˆ»ã™
         */
        revertTo: (patchId: string): AgentSpec[] | null => {
            const state = get({ subscribe });
            const targetIndex = state.patches.findIndex((p) => p.metadata.id === patchId);
            if (targetIndex === -1) return null;

            const specs = rebuildSpecs(state.baseSpecs, state.patches, targetIndex, state.checkpoints);
            update((s) => ({ ...s, currentIndex: targetIndex }));
            return specs;
        },

        /**
         * ç¾åœ¨ã®çŠ¶æ…‹ã‚’å–å¾—
         */
        getCurrentSpecs: (): AgentSpec[] => {
            const state = get({ subscribe });
            return rebuildSpecs(state.baseSpecs, state.patches, state.currentIndex, state.checkpoints);
        },

        /**
         * å±¥æ­´ã‚’ã‚¯ãƒªã‚¢
         */
        clear: () => {
            set(DEFAULT_STATE);
        }
    };
}

/**
 * baseSpecsã«ãƒ‘ãƒƒãƒã‚’é †ç•ªã«é©ç”¨ã—ã¦targetIndexã¾ã§ã®çŠ¶æ…‹ã‚’å†æ§‹ç¯‰
 * ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚Œã°æœ€ã‚‚è¿‘ã„ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰é–‹å§‹
 */
function rebuildSpecs(
    baseSpecs: AgentSpec[],
    patches: SpecPatch[],
    targetIndex: number,
    checkpoints: Checkpoint[] = []
): AgentSpec[] {
    // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚ˆã‚Šæ‰‹å‰ã§æœ€ã‚‚è¿‘ã„ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’æ¢ã™
    let startSpecs = [...baseSpecs];
    let startIndex = 0;

    for (const cp of checkpoints) {
        if (cp.patchIndex <= targetIndex && cp.patchIndex >= startIndex) {
            startSpecs = [...cp.specs];
            startIndex = cp.patchIndex + 1;
        }
    }

    // ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¾ã§ãƒ‘ãƒƒãƒã‚’é©ç”¨
    let specs = startSpecs;
    for (let i = startIndex; i <= targetIndex && i < patches.length; i++) {
        specs = applySpecPatch(specs, patches[i]);
    }
    return specs;
}

export const historyStore = createHistoryStore();

// æ´¾ç”Ÿã‚¹ãƒˆã‚¢: Undoå¯èƒ½ã‹ã©ã†ã‹
export const canUndo = derived(historyStore, ($history) => $history.currentIndex >= 0);

// æ´¾ç”Ÿã‚¹ãƒˆã‚¢: Redoå¯èƒ½ã‹ã©ã†ã‹
export const canRedo = derived(
    historyStore,
    ($history) => $history.currentIndex < $history.patches.length - 1
);

// æ´¾ç”Ÿã‚¹ãƒˆã‚¢: ãƒ‘ãƒƒãƒä¸€è¦§
export const patches = derived(historyStore, ($history) => $history.patches);

// æ´¾ç”Ÿã‚¹ãƒˆã‚¢: ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
export const currentPatchIndex = derived(historyStore, ($history) => $history.currentIndex);
</file>

<file path="src/lib/utils/prompt-utils.ts">
/**
 * Prompt Utils
 * 
 * Spec-Kitã‹ã‚‰å„ç¨®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
 */
import type { AgentSpec } from '$lib/types';
import { stringifyYaml } from '$lib/utils/yaml-utils';

/**
 * UI Mockç”Ÿæˆç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
 */
export function buildUiPrompt(spec: AgentSpec): string {
    return `Generate a high-quality, modern UI mockup in a single HTML file using Tailwind CSS based on the following agent specification.

# Agent Specification
Role: ${spec.role}
Constraints:
${spec.constraints.map(c => `- ${c}`).join('\n')}

# Requirements for the Output
1. **Single HTML File**: Return ONLY the HTML code. Do not wrap it in markdown block.
2. **Tailwind CSS**: Use CDN <script src="https://cdn.tailwindcss.com"></script>.
3. **Design**: Modern, clean, and responsive design. Use Lucide Icons or similar via CDN if needed.
4. **Content**: The UI should reflect the agent's role and capabilities. Include form inputs if inputs are specified (or inferred from role).
5. **No Explanations**: Output pure HTML code only.

# Capability Context
${spec.capabilities.join(', ')}
`;
}

/**
 * API Spec (OpenAPI) ç”Ÿæˆç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
 */
export function buildApiPrompt(spec: AgentSpec): string {
    return `Generate an OpenAPI 3.0 (YAML) specification based on the following agent specification.

# Agent Specification
Name: ${spec.name}
Role: ${spec.role}
Inputs: (Inferred from role)
Outputs: (Inferred from role)

# Requirements for the Output
1. **YAML Only**: Return ONLY the YAML code. Do not wrap it in markdown block.
2. **OpenAPI 3.0**: Use standard OpenAPI 3.0 format.
3. **Paths**: Define endpoints that correspond to the agent's capabilities.
4. **Schemas**: Define request/response schemas based on the inputs/outputs.
5. **No Explanations**: Output pure YAML code only.

# Input YAML
${stringifyYaml(spec)}
`;
}

/**
 * ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”Ÿæˆç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
 */
export function buildTestCasePrompt(spec: AgentSpec): string {
    return `Generate comprehensive test cases for the following AI agent specification.

# Agent Specification
Name: ${spec.name}
Display Name: ${spec.displayName}
Role: ${spec.role}
Capabilities: ${spec.capabilities.join(', ')}
Constraints: ${spec.constraints.join(', ')}

# Requirements for the Output
1. **Markdown Format**: Return test cases in Markdown format with tables.
2. **Categories**: Include positive tests, negative tests, edge cases, and constraint validation tests.
3. **Structure**: Each test case should have: ID, Category, Description, Input, Expected Output, Priority.
4. **Constraint Tests**: Specifically test that each constraint is enforced.
5. **No Explanations**: Start directly with the test case table.

# Example Format
| ID | Category | Description | Input | Expected Output | Priority |
|----|----------|-------------|-------|-----------------|----------|
| TC-001 | Positive | ... | ... | ... | High |
`;
}

/**
 * ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³(Mermaid)ç”Ÿæˆç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
 */
export function buildUseCasePrompt(specs: AgentSpec[]): string {
    const agentList = specs.map(s => `- ${s.displayName}: ${s.role}`).join('\n');

    return `Generate a Mermaid use case diagram based on the following multi-agent system specification.

# Agents
${agentList}

# Communication
${specs.map(s => `${s.name} can send to: ${s.communication.canSendTo.join(', ') || 'none'}`).join('\n')}

# Requirements for the Output
1. **Mermaid Only**: Return ONLY the Mermaid diagram code. Do not wrap it in markdown code block.
2. **Use Case Diagram**: Use Mermaid's flowchart syntax to represent actors and use cases.
3. **Show Relationships**: Show which agents interact with which use cases.
4. **Clean Layout**: Use subgraphs to group related elements.
5. **No Explanations**: Output pure Mermaid code only.

Start with: graph TB
`;
}

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡å›³(Mermaid)ç”Ÿæˆ
 * â€» ã“ã‚Œã¯AIç”Ÿæˆã§ã¯ãªãã€Specã‹ã‚‰ç›´æ¥ç”Ÿæˆ
 */
export function buildCommunicationDiagram(specs: AgentSpec[]): string {
    if (specs.length === 0) return 'graph LR\n  NoAgents[No agents defined]';

    const lines: string[] = ['graph LR'];

    // ãƒãƒ¼ãƒ‰å®šç¾©
    specs.forEach(spec => {
        const icon = spec.role.includes('è§£æ') || spec.displayName.includes('Analyzer') ? 'ğŸ”' : 'ğŸ¤–';
        lines.push(`  ${spec.name}["${icon} ${spec.displayName}"]`);
    });

    // é€šä¿¡é–¢ä¿‚
    const validNames = new Set(specs.map(s => s.name));
    specs.forEach(spec => {
        spec.communication.canSendTo.forEach(target => {
            if (validNames.has(target)) {
                lines.push(`  ${spec.name} --> ${target}`);
            }
        });
    });

    return lines.join('\n');
}
</file>

<file path="src/lib/utils/storage-utils.ts">
/**
 * Local Storage Utilities
 *
 * Specã€è¨­å®šãªã©ã®ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 */

const STORAGE_KEYS = {
    SPECS: 'spec-flow-studio:specs',
    SPEC_NAME: 'spec-flow-studio:spec-name',
    ARTIFACTS: 'spec-flow-studio:artifacts',
    PATCHES: 'spec-flow-studio:patches',
    SETTINGS: 'spec-flow-studio:settings'
} as const;

/**
 * ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã‹ã©ã†ã‹ã‚’åˆ¤å®š
 */
export const isBrowser = typeof window !== 'undefined';

/**
 * ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
 */
export function saveToStorage<T>(key: string, data: T): void {
    if (!isBrowser) return;
    try {
        localStorage.setItem(key, JSON.stringify(data));
    } catch (error) {
        console.error('Failed to save to localStorage:', error);
    }
}

/**
 * ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿
 */
export function loadFromStorage<T>(key: string, defaultValue: T): T {
    if (!isBrowser) return defaultValue;
    try {
        const item = localStorage.getItem(key);
        if (item === null) {
            return defaultValue;
        }
        return JSON.parse(item) as T;
    } catch (error) {
        console.error('Failed to load from localStorage:', error);
        return defaultValue;
    }
}

/**
 * ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰å‰Šé™¤
 */
export function removeFromStorage(key: string): void {
    if (!isBrowser) return;
    try {
        localStorage.removeItem(key);
    } catch (error) {
        console.error('Failed to remove from localStorage:', error);
    }
}

/**
 * Spec YAMLã‚’ä¿å­˜
 */
export function saveSpecYaml(yaml: string, name?: string): void {
    saveToStorage(STORAGE_KEYS.SPECS, yaml);
    if (name) {
        saveToStorage(STORAGE_KEYS.SPEC_NAME, name);
    }
}

/**
 * Spec YAMLã‚’èª­ã¿è¾¼ã¿
 */
export function loadSpecYaml(): { yaml: string; name: string | null } {
    return {
        yaml: loadFromStorage(STORAGE_KEYS.SPECS, ''),
        name: loadFromStorage<string | null>(STORAGE_KEYS.SPEC_NAME, null)
    };
}

/**
 * å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
 */
export function exportAllData(): string {
    const data = {
        specs: loadFromStorage(STORAGE_KEYS.SPECS, ''),
        specName: loadFromStorage(STORAGE_KEYS.SPEC_NAME, null),
        artifacts: loadFromStorage(STORAGE_KEYS.ARTIFACTS, []),
        patches: loadFromStorage(STORAGE_KEYS.PATCHES, []),
        settings: loadFromStorage(STORAGE_KEYS.SETTINGS, {}),
        exportedAt: new Date().toISOString()
    };
    return JSON.stringify(data, null, 2);
}

/**
 * ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
 */
export function importAllData(jsonString: string): void {
    try {
        const data = JSON.parse(jsonString);
        if (data.specs) saveToStorage(STORAGE_KEYS.SPECS, data.specs);
        if (data.specName) saveToStorage(STORAGE_KEYS.SPEC_NAME, data.specName);
        if (data.artifacts) saveToStorage(STORAGE_KEYS.ARTIFACTS, data.artifacts);
        if (data.patches) saveToStorage(STORAGE_KEYS.PATCHES, data.patches);
        if (data.settings) saveToStorage(STORAGE_KEYS.SETTINGS, data.settings);
    } catch (error) {
        console.error('Failed to import data:', error);
        throw new Error('Invalid JSON format');
    }
}

/**
 * å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
 */
export function clearAllData(): void {
    Object.values(STORAGE_KEYS).forEach((key) => {
        removeFromStorage(key);
    });
}

export { STORAGE_KEYS };
</file>

<file path="src/routes/settings/+page.svelte">
<!--
  Settings Page - è¨­å®š
-->
<script lang="ts">
	import { Panel, Button, StatusIndicator } from '$lib/components/ui';
	import { integrationConfig, updateConfig } from '$lib/stores/integration-store';
	import { settings } from '$lib/stores/settings-store';
	import { session } from '$lib/stores/session-store';
	import { encryptData, decryptData } from '$lib/utils/crypto-utils';
	import { saveToStorage, loadFromStorage, STORAGE_KEYS } from '$lib/utils/storage-utils';

	// Aether Console Settings
	let consoleUrl = $state($integrationConfig.consoleUrl);
	let autoSync = $state($integrationConfig.autoSync);
	let syncInterval = $state($integrationConfig.syncInterval);

	function saveIntegrationSettings() {
		updateConfig({
			consoleUrl,
			autoSync,
			syncInterval
		});
		alert('é€£æºè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
	}

	// AI Settings
	let apiKeyInput = $state('');
	let passwordInput = $state('');
	let isApiKeyLoading = $state(false);
	let isModelRefreshing = $state(false);

	async function saveApiKey() {
		if (!apiKeyInput || !passwordInput) {
			alert('APIã‚­ãƒ¼ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
			return;
		}

		isApiKeyLoading = true;
		try {
			// æš—å·åŒ–ã—ã¦ä¿å­˜
			const encrypted = await encryptData(apiKeyInput, passwordInput);
			saveToStorage('spec-flow-studio:api-key-encrypted', encrypted);

			// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¿æŒ
			session.setPassword(passwordInput);

			// è¨­å®šæ›´æ–°
			settings.updateSettings({ hasApiKey: true });

			// ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã®å–å¾—ã‚’è©¦è¡Œ
			await refreshModels(apiKeyInput);

			// å…¥åŠ›ã‚¯ãƒªã‚¢
			apiKeyInput = '';
			passwordInput = '';

			alert('APIã‚­ãƒ¼ã‚’æš—å·åŒ–ã—ã¦ä¿å­˜ã—ã€ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
		} catch (error) {
			console.error(error);
			alert('APIã‚­ãƒ¼ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
		} finally {
			isApiKeyLoading = false;
		}
	}

	async function refreshModels(apiKeyRaw?: string) {
		let apiKey = apiKeyRaw;

		// å¼•æ•°ãŒãªã„å ´åˆã¯ä¿å­˜ã•ã‚ŒãŸã‚­ãƒ¼ã‚’å¾©å·åŒ–ã—ã¦ä½¿ç”¨
		if (!apiKey && $settings.hasApiKey && $session.encryptionPassword) {
			const encryptedKey = loadFromStorage('spec-flow-studio:api-key-encrypted', '');
			if (encryptedKey) {
				try {
					apiKey = await decryptData(encryptedKey, $session.encryptionPassword);
				} catch (e) {
					console.error('Failed to decrypt API key for model refresh', e);
				}
			}
		}

		if (!apiKey) {
			console.log('Skipping model refresh: No API key available');
			return;
		}

		isModelRefreshing = true;
		try {
			const res = await fetch('/api/models', {
				headers: { 'x-api-key': apiKey }
			});
			if (res.ok) {
				const data = await res.json();
				const models = data.models.map((m: any) => m.name);
				if (models.length > 0) {
					settings.updateSettings({ availableModels: models });
					// ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ãŒãƒªã‚¹ãƒˆã«ãªã‘ã‚Œã°ã€ãƒªã‚¹ãƒˆã®æœ€åˆã‚’é¸æŠ
					if (!$settings.geminiModel || !models.includes($settings.geminiModel)) {
						settings.updateSettings({ geminiModel: models[0] });
					}
				}
			}
		} catch (e) {
			console.error('Failed to refresh models', e);
		} finally {
			isModelRefreshing = false;
		}
	}

	// æ‰‹å‹•æ›´æ–°ãƒœã‚¿ãƒ³ç”¨ãƒãƒ³ãƒ‰ãƒ©
	async function handleRefreshClick() {
		if (!$session.encryptionPassword) {
			alert('ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’æ›´æ–°ã™ã‚‹ã«ã¯ã€ã¾ãšAPIã‚­ãƒ¼ã‚’ä¿å­˜ï¼ˆã¾ãŸã¯å†å…¥åŠ›ï¼‰ã—ã¦ãã ã•ã„');
			return;
		}
		await refreshModels();
		alert('ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
	}

	function handleModelChange(e: Event) {
		const select = e.target as HTMLSelectElement;
		settings.updateSettings({ geminiModel: select.value });
	}
</script>

<div class="page">
	<header class="page__header">
		<h1>è¨­å®š</h1>
		<p class="page__subtitle">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š</p>
	</header>

	<div class="settings-grid">
		<!-- AIè¨­å®š -->
		<Panel title="AI ç”Ÿæˆè¨­å®š (Gemini API)">
			<div class="settings-form">
				<div class="form-group">
					<div class="model-select-header">
						<label for="geminiModel">ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«</label>
						<button
							class="refresh-btn"
							onclick={handleRefreshClick}
							disabled={isModelRefreshing || !$settings.hasApiKey}
							title="ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’æ›´æ–°"
						>
							{#if isModelRefreshing}
								âŸ³ Updating...
							{:else}
								âŸ³ ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’æ›´æ–°
							{/if}
						</button>
					</div>
					<select
						id="geminiModel"
						value={$settings.geminiModel}
						onchange={handleModelChange}
						class="form-select"
					>
						{#each $settings.availableModels as model}
							<option value={model}>{model}</option>
						{/each}
					</select>
				</div>

				<div class="api-key-section">
					<div class="status-row">
						<span class="status-label">APIã‚­ãƒ¼çŠ¶æ…‹:</span>
						<StatusIndicator
							status={$settings.hasApiKey ? 'success' : 'warning'}
							label={$settings.hasApiKey ? 'è¨­å®šæ¸ˆã¿ (æš—å·åŒ–)' : 'æœªè¨­å®š'}
						/>
					</div>

					<div class="form-group">
						<label for="apiKey">Gemini API Key</label>
						<input
							id="apiKey"
							type="password"
							bind:value={apiKeyInput}
							placeholder={$settings.hasApiKey ? 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢' : 'AIza...'}
						/>
					</div>

					<div class="form-group">
						<label for="password">æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
						<input
							id="password"
							type="password"
							bind:value={passwordInput}
							placeholder="APIã‚­ãƒ¼ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
						/>
						<p class="help-text">
							â€» APIã‚­ãƒ¼ã¯ã“ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§æš—å·åŒ–ã•ã‚Œã€ãƒ–ãƒ©ã‚¦ã‚¶ã®LocalStorageã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚<br />
							â€» ã‚µãƒ¼ãƒãƒ¼ã«ã¯æš—å·åŒ–ã•ã‚ŒãŸçŠ¶æ…‹ã§ã‚‚ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚<br />
							â€» ç”Ÿæˆæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ãŸã³ã«ã“ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ã«ãªã‚Šã¾ã™ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã¯ä¿æŒï¼‰ã€‚
						</p>
					</div>

					<div class="form-actions">
						<Button
							variant="primary"
							onclick={saveApiKey}
							disabled={!apiKeyInput || !passwordInput || isApiKeyLoading}
							loading={isApiKeyLoading}
						>
							APIã‚­ãƒ¼ã‚’ä¿å­˜
						</Button>
					</div>
				</div>
			</div>
		</Panel>

		<!-- Aether Console é€£æº -->
		<Panel title="Aether Console é€£æº">
			<form
				class="settings-form"
				onsubmit={(e) => {
					e.preventDefault();
					saveIntegrationSettings();
				}}
			>
				<div class="form-group">
					<label for="consoleUrl">Console URL</label>
					<input
						id="consoleUrl"
						type="text"
						bind:value={consoleUrl}
						placeholder="ws://localhost:5173/api/ws"
					/>
				</div>

				<div class="form-group form-group--inline">
					<input id="autoSync" type="checkbox" bind:checked={autoSync} />
					<label for="autoSync">è‡ªå‹•åŒæœŸã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
				</div>

				<div class="form-group">
					<label for="syncInterval">åŒæœŸé–“éš” (ms)</label>
					<input
						id="syncInterval"
						type="number"
						bind:value={syncInterval}
						min="1000"
						max="60000"
						step="1000"
					/>
				</div>

				<div class="form-actions">
					<Button type="submit" variant="secondary">é€£æºè¨­å®šã‚’ä¿å­˜</Button>
				</div>
			</form>
		</Panel>

		<Panel title="ãƒ‡ãƒ¼ã‚¿ç®¡ç†">
			<div class="data-actions">
				<div class="data-action">
					<div class="data-action__info">
						<h4>ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h4>
						<p>Specã€ç”Ÿæˆç‰©ã€ãƒ‘ãƒƒãƒå±¥æ­´ã‚’JSONã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</p>
					</div>
					<Button variant="secondary" size="sm">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</Button>
				</div>

				<div class="data-action">
					<div class="data-action__info">
						<h4>ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h4>
						<p>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿</p>
					</div>
					<Button variant="secondary" size="sm">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</Button>
				</div>

				<div class="data-action data-action--danger">
					<div class="data-action__info">
						<h4>å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤</h4>
						<p>ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã•ã‚ŒãŸå…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤</p>
					</div>
					<Button variant="danger" size="sm">å‰Šé™¤</Button>
				</div>
			</div>
		</Panel>
	</div>
</div>

<style>
	.page {
		animation: fade-in var(--transition-base) ease-out;
	}

	.page__header {
		margin-bottom: var(--space-8);
	}

	.page__header h1 {
		margin-bottom: var(--space-2);
	}

	.page__subtitle {
		color: var(--color-text-muted);
	}

	.settings-grid {
		display: flex;
		flex-direction: column;
		gap: var(--space-6);
		max-width: 600px;
	}

	/* Form */
	.settings-form {
		display: flex;
		flex-direction: column;
		gap: var(--space-5);
	}

	.form-group {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
	}

	.form-group--inline {
		flex-direction: row;
		align-items: center;
	}

	.model-select-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: var(--space-2);
	}

	.refresh-btn {
		background: none;
		border: none;
		color: var(--color-accent-primary);
		font-size: var(--font-size-xs);
		cursor: pointer;
		padding: 0;
		opacity: 0.8;
		transition: opacity 0.2s;
	}

	.refresh-btn:hover {
		opacity: 1;
		text-decoration: underline;
	}

	.refresh-btn:disabled {
		opacity: 0.5;
		cursor: not-allowed;
		text-decoration: none;
	}

	.form-group label {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
	}

	.form-group input[type='text'],
	.form-group input[type='password'],
	.form-group input[type='number'],
	.form-select {
		padding: var(--space-3);
		background: var(--color-bg-tertiary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-md);
		color: var(--color-text-primary);
		font-family: var(--font-mono);
		font-size: var(--font-size-sm);
		width: 100%;
	}

	.form-group input:focus,
	.form-select:focus {
		outline: none;
		border-color: var(--color-accent-primary);
		box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
	}

	.form-group input[type='checkbox'] {
		accent-color: var(--color-accent-primary);
		width: auto;
	}

	.help-text {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		line-height: 1.4;
		margin-top: var(--space-1);
	}

	.status-row {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		margin-bottom: var(--space-4);
		padding-bottom: var(--space-4);
		border-bottom: 1px solid var(--color-border-secondary);
	}

	.status-label {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
	}

	.form-actions {
		display: flex;
		justify-content: flex-end;
		margin-top: var(--space-2);
	}

	/* Data Actions */
	.data-actions {
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
	}

	.data-action {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: var(--space-4);
		background: var(--color-bg-tertiary);
		border-radius: var(--radius-md);
	}

	.data-action--danger {
		border: 1px solid rgba(239, 68, 68, 0.3);
	}

	.data-action__info h4 {
		font-size: var(--font-size-sm);
		margin-bottom: var(--space-1);
	}

	.data-action__info p {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
	}
</style>
</file>

<file path="src/routes/+layout.svelte">
<script lang="ts">
	import '../app.css';
	import Sidebar from '$lib/components/Sidebar.svelte';
	import StatusBar from '$lib/components/StatusBar.svelte';

	let { children } = $props();
</script>

<svelte:head>
	<title>Spec-Flow Studio</title>
</svelte:head>

<div class="app">
	<Sidebar />
	<main class="main">
		{@render children()}
	</main>
	<StatusBar />
</div>

<style>
	.app {
		min-height: 100vh;
		background: var(--color-bg-primary);
	}

	.main {
		margin-left: var(--sidebar-width);
		min-height: 100vh;
		padding: var(--space-6);
		padding-bottom: calc(var(--statusbar-height) + var(--space-6));
	}

	/* èƒŒæ™¯ã®ã‚°ãƒ­ãƒ¼åŠ¹æœ */
	.app::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: var(--gradient-glow);
		pointer-events: none;
		z-index: -1;
	}
</style>
</file>

<file path="src/routes/+page.svelte">
<!--
  Dashboard Page
  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - ç¾åœ¨ã®Specåã€Artifactä¸€è¦§ã€æ¥ç¶šçŠ¶æ…‹ã‚’è¡¨ç¤º
-->
<script lang="ts">
	import { Panel, Button, StatusIndicator } from '$lib/components/ui';
	import { specs, currentSpecName, hasSpec } from '$lib/stores/spec-store';
	import { latestArtifacts, artifactCounts, hasArtifacts } from '$lib/stores/artifact-store';
	import { connectionStatus, patchCount } from '$lib/stores/integration-store';

	const statusMap = {
		disconnected: 'offline',
		connecting: 'warning',
		connected: 'success',
		error: 'error'
	} as const;

	const artifactTypeLabels = {
		'ui-mock': 'UIãƒ¢ãƒƒã‚¯',
		'api-spec': 'APIä»•æ§˜',
		'test-case': 'ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹',
		'use-case': 'ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹'
	};

	let currentStatus = $derived(statusMap[$connectionStatus]);
</script>

<div class="dashboard">
	<header class="dashboard__header">
		<h1>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
		<p class="dashboard__subtitle">Spec-Flow Studio ã¸ã‚ˆã†ã“ã</p>
	</header>

	<div class="dashboard__grid">
		<!-- ç¾åœ¨ã®Spec -->
		<Panel title="ç¾åœ¨ã®ä»•æ§˜" variant="accent" glow={$hasSpec}>
			{#if $hasSpec}
				<div class="spec-info">
					<div class="spec-info__name">{$currentSpecName || 'Untitled'}</div>
					<div class="spec-info__count">{$specs.length} ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</div>
					<div class="spec-info__agents">
						{#each $specs as agent}
							<span class="spec-info__agent">{agent.displayName}</span>
						{/each}
					</div>
				</div>
			{:else}
				<div class="empty-state">
					<span class="empty-state__icon">â—‡</span>
					<p class="empty-state__text">ä»•æ§˜ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“</p>
					<Button variant="primary" size="sm">
						ã‚¨ãƒ‡ã‚£ã‚¿ã‚’é–‹ã
					</Button>
				</div>
			{/if}
		</Panel>

		<!-- æ¥ç¶šçŠ¶æ…‹ -->
		<Panel title="Aether Console æ¥ç¶š">
			<div class="connection-info">
				<StatusIndicator
					status={currentStatus}
					pulse={$connectionStatus === 'connected'}
					size="lg"
				/>
				<div class="connection-info__details">
					{#if $connectionStatus === 'connected'}
						<p>Aether Console ã¨æ¥ç¶šä¸­</p>
						<span class="connection-info__patches">{$patchCount} ãƒ‘ãƒƒãƒ</span>
					{:else if $connectionStatus === 'connecting'}
						<p>æ¥ç¶šã‚’è©¦è¡Œä¸­...</p>
					{:else if $connectionStatus === 'error'}
						<p class="text-error">æ¥ç¶šã‚¨ãƒ©ãƒ¼</p>
						<Button variant="secondary" size="sm">å†æ¥ç¶š</Button>
					{:else}
						<p>æœªæ¥ç¶š</p>
						<Button variant="primary" size="sm">æ¥ç¶š</Button>
					{/if}
				</div>
			</div>
		</Panel>

		<!-- ç”Ÿæˆç‰©ã‚µãƒãƒªãƒ¼ -->
		<Panel title="ç”Ÿæˆç‰©">
			{#if $hasArtifacts}
				<div class="artifacts-summary">
					<div class="artifacts-summary__counts">
						{#each Object.entries($artifactCounts) as [type, count]}
							<div class="artifacts-summary__item">
								<span class="artifacts-summary__count">{count}</span>
								<span class="artifacts-summary__type">{artifactTypeLabels[type as keyof typeof artifactTypeLabels]}</span>
							</div>
						{/each}
					</div>
				</div>
			{:else}
				<div class="empty-state">
					<span class="empty-state__icon">â—</span>
					<p class="empty-state__text">ç”Ÿæˆç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>
					<p class="empty-state__hint">ã‚¨ãƒ‡ã‚£ã‚¿ã§ä»•æ§˜ã‚’ä½œæˆã—ã€AIã§ç”Ÿæˆã—ã¦ãã ã•ã„</p>
				</div>
			{/if}
		</Panel>

		<!-- æœ€è¿‘ã®ç”Ÿæˆç‰© -->
		<Panel title="æœ€è¿‘ã®ç”Ÿæˆç‰©" class="dashboard__recent">
			{#if $latestArtifacts.length > 0}
				<ul class="recent-list">
					{#each $latestArtifacts as artifact}
						<li class="recent-list__item">
							<span class="recent-list__type">{artifactTypeLabels[artifact.type]}</span>
							<span class="recent-list__name">{artifact.name}</span>
							<span class="recent-list__time font-mono">
								{new Date(artifact.generatedAt).toLocaleDateString('ja-JP')}
							</span>
						</li>
					{/each}
				</ul>
			{:else}
				<p class="text-muted">ã¾ã ç”Ÿæˆç‰©ãŒã‚ã‚Šã¾ã›ã‚“</p>
			{/if}
		</Panel>
	</div>
</div>

<style>
	.dashboard {
		animation: fade-in var(--transition-base) ease-out;
	}

	.dashboard__header {
		margin-bottom: var(--space-8);
	}

	.dashboard__header h1 {
		margin-bottom: var(--space-2);
	}

	.dashboard__subtitle {
		color: var(--color-text-muted);
	}

	.dashboard__grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: var(--space-6);
	}

	.dashboard__recent {
		grid-column: span 2;
	}

	/* Spec Info */
	.spec-info__name {
		font-size: var(--font-size-xl);
		font-weight: 600;
		color: var(--color-accent-primary);
		margin-bottom: var(--space-2);
	}

	.spec-info__count {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
		margin-bottom: var(--space-3);
	}

	.spec-info__agents {
		display: flex;
		flex-wrap: wrap;
		gap: var(--space-2);
	}

	.spec-info__agent {
		padding: var(--space-1) var(--space-2);
		background: var(--color-bg-tertiary);
		border-radius: var(--radius-sm);
		font-size: var(--font-size-xs);
		color: var(--color-text-secondary);
	}

	/* Connection Info */
	.connection-info {
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
	}

	.connection-info__details {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
	}

	.connection-info__patches {
		font-size: var(--font-size-sm);
		color: var(--color-text-muted);
		font-family: var(--font-mono);
	}

	/* Artifacts Summary */
	.artifacts-summary__counts {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: var(--space-4);
	}

	.artifacts-summary__item {
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: var(--space-4);
		background: var(--color-bg-tertiary);
		border-radius: var(--radius-md);
	}

	.artifacts-summary__count {
		font-size: var(--font-size-2xl);
		font-weight: 600;
		color: var(--color-accent-primary);
		font-family: var(--font-mono);
	}

	.artifacts-summary__type {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		margin-top: var(--space-1);
	}

	/* Empty State */
	.empty-state {
		display: flex;
		flex-direction: column;
		align-items: center;
		text-align: center;
		padding: var(--space-6);
		gap: var(--space-3);
	}

	.empty-state__icon {
		font-size: var(--font-size-3xl);
		color: var(--color-text-muted);
	}

	.empty-state__text {
		color: var(--color-text-secondary);
	}

	.empty-state__hint {
		font-size: var(--font-size-sm);
		color: var(--color-text-muted);
	}

	/* Recent List */
	.recent-list {
		list-style: none;
	}

	.recent-list__item {
		display: flex;
		align-items: center;
		gap: var(--space-4);
		padding: var(--space-3) 0;
		border-bottom: 1px solid var(--color-border-secondary);
	}

	.recent-list__item:last-child {
		border-bottom: none;
	}

	.recent-list__type {
		font-size: var(--font-size-xs);
		color: var(--color-accent-primary);
		background: rgba(0, 212, 255, 0.1);
		padding: var(--space-1) var(--space-2);
		border-radius: var(--radius-sm);
		min-width: 80px;
		text-align: center;
	}

	.recent-list__name {
		flex: 1;
		color: var(--color-text-primary);
	}

	.recent-list__time {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
	}

	/* Responsive */
	@media (max-width: 900px) {
		.dashboard__grid {
			grid-template-columns: 1fr;
		}

		.dashboard__recent {
			grid-column: span 1;
		}
	}
</style>
</file>

<file path="src/app.html">
<!doctype html>
<html lang="ja">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#0a0a0f" />
		<meta name="description" content="Spec-Flow Studio - AIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¯è¦–åŒ–ãƒ»åˆ¶å¾¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ " />
		<link rel="icon" href="%sveltekit.assets%/favicon.png" />
		<link rel="manifest" href="%sveltekit.assets%/manifest.json" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
</file>

<file path="src/lib/components/editor/ConstraintPanel.svelte">
<!--
  ConstraintPanel Component
  åˆ¶ç´„äº‹é …ï¼ˆConstraintsï¼‰ã‚’å¯è¦–åŒ–ãƒ»å¼·èª¿è¡¨ç¤ºã™ã‚‹ãƒ‘ãƒãƒ«
  â€» AIãŒå¾“ã†ã¹ãã€Œçµ¶å¯¾æ¡ä»¶ã€ã¨ã—ã¦è¦–è¦šçš„ã«å¼·èª¿
  â€» ã‚¯ãƒªãƒƒã‚¯ã§ã‚¨ãƒ‡ã‚£ã‚¿ã®è©²å½“è¡Œã«ã‚¸ãƒ£ãƒ³ãƒ—
-->
<script lang="ts">
	import { Panel } from '$lib/components/ui';
	import type { AgentSpec } from '$lib/types';

	interface ConstraintItem {
		agentName: string;
		content: string;
		index: number; // constraintsé…åˆ—å†…ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
	}

	interface Props {
		specs: AgentSpec[];
		onConstraintClick?: (agentName: string, constraintText: string) => void;
	}

	let { specs, onConstraintClick }: Props = $props();

	// å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®åˆ¶ç´„ã‚’åé›†ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä»˜ãï¼‰
	let allConstraints = $derived(
		specs.flatMap((agent) =>
			agent.constraints.map((constraint, index) => ({
				agentName: agent.displayName,
				content: constraint,
				index
			}))
		)
	);

	function handleClick(item: ConstraintItem) {
		if (onConstraintClick) {
			onConstraintClick(item.agentName, item.content);
		}
	}
</script>

<Panel
	title="âš ï¸ åˆ¶ç´„äº‹é … (Constraints)"
	variant="error"
	glow={allConstraints.length > 0}
	class="constraint-panel"
>
	{#if allConstraints.length > 0}
		<div class="constraint-warning">
			<span class="warning-icon">ğŸš«</span>
			<span class="warning-text">ã“ã‚Œã‚‰ã®åˆ¶ç´„ã‚’ç ´ã‚‹ç”Ÿæˆã¯ç ´æ£„ã•ã‚Œã¾ã™</span>
		</div>
		<div class="constraints-list">
			{#each allConstraints as item}
				<button
					class="constraint-item"
					onclick={() => handleClick(item)}
					title="ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¨ãƒ‡ã‚£ã‚¿ã®è©²å½“è¡Œã«ã‚¸ãƒ£ãƒ³ãƒ—"
				>
					<span class="constraint-agent">{item.agentName}</span>
					<span class="constraint-content">{item.content}</span>
					<span class="constraint-jump-icon">â†—</span>
				</button>
			{/each}
		</div>
		<p class="constraint-hint">ã‚¯ãƒªãƒƒã‚¯ã§è©²å½“è¡Œã«ã‚¸ãƒ£ãƒ³ãƒ—</p>
	{:else}
		<div class="empty-constraints">
			<span class="empty-icon">âœ“</span>
			<p>åˆ¶ç´„äº‹é …ã¯å®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
		</div>
	{/if}
</Panel>

<style>
	.constraint-panel {
		height: 100%;
		overflow: hidden;
		display: flex;
		flex-direction: column;
	}

	.constraint-warning {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		padding: var(--space-2) var(--space-3);
		background: rgba(239, 68, 68, 0.2);
		border: 1px solid var(--color-accent-error);
		border-radius: var(--radius-sm);
		margin-bottom: var(--space-3);
		animation: pulse-warning 2s infinite;
	}

	@keyframes pulse-warning {
		0%,
		100% {
			opacity: 1;
		}
		50% {
			opacity: 0.7;
		}
	}

	.warning-icon {
		font-size: var(--font-size-lg);
	}

	.warning-text {
		font-size: var(--font-size-xs);
		font-weight: 600;
		color: var(--color-accent-error);
	}

	.constraints-list {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
		overflow-y: auto;
		max-height: 200px;
	}

	.constraint-item {
		display: flex;
		align-items: flex-start;
		gap: var(--space-3);
		padding: var(--space-2) var(--space-3);
		background: rgba(239, 68, 68, 0.1);
		border: none;
		border-left: 3px solid var(--color-accent-error);
		border-radius: var(--radius-sm);
		cursor: pointer;
		text-align: left;
		transition: all var(--transition-fast);
		width: 100%;
	}

	.constraint-item:hover {
		background: rgba(239, 68, 68, 0.25);
		transform: translateX(2px);
	}

	.constraint-item:active {
		transform: translateX(4px);
	}

	.constraint-agent {
		font-size: var(--font-size-xs);
		font-weight: 600;
		color: var(--color-accent-error);
		background: rgba(0, 0, 0, 0.3);
		padding: 2px 6px;
		border-radius: var(--radius-sm);
		white-space: nowrap;
		flex-shrink: 0;
	}

	.constraint-content {
		font-size: var(--font-size-sm);
		color: var(--color-text-primary);
		line-height: 1.4;
		flex: 1;
	}

	.constraint-jump-icon {
		font-size: var(--font-size-sm);
		color: var(--color-text-muted);
		opacity: 0;
		transition: opacity var(--transition-fast);
	}

	.constraint-item:hover .constraint-jump-icon {
		opacity: 1;
	}

	.constraint-hint {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		text-align: center;
		margin-top: var(--space-2);
	}

	.empty-constraints {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		padding: var(--space-4);
		color: var(--color-text-muted);
		gap: var(--space-2);
	}

	.empty-icon {
		font-size: var(--font-size-xl);
		color: var(--color-accent-success);
	}
</style>
</file>

<file path="src/lib/stores/integration-store.ts">
/**
 * Integration Store
 *
 * Aether Consoleã¨ã®é€£æºçŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ã‚¹ãƒˆã‚¢
 * 
 * è²¬å‹™åˆ†é›¢ã«ã‚ˆã‚Šä»¥ä¸‹ã®ã‚¹ãƒˆã‚¢ã«åˆ†å‰²:
 * - connection-store: æ¥ç¶šçŠ¶æ…‹ç®¡ç†
 * - config-store: è¨­å®šç®¡ç†
 * - sync-patch-store: å¤–éƒ¨ãƒ‘ãƒƒãƒç®¡ç†
 * 
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ã€ã™ã¹ã¦ã‚’å†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
 */

// Connection (æ¥ç¶šçŠ¶æ…‹)
export {
    connectionStatus,
    isConnected,
    isConnecting,
    hasError,
    setConnectionStatus,
    updateStatus
} from './connection-store';

// Config (è¨­å®š)
export {
    integrationConfig,
    updateConfig,
    resetConfig
} from './config-store';

// Sync Patches (å¤–éƒ¨ãƒ‘ãƒƒãƒ)
export {
    syncPatches as patches,
    syncPatchCount as patchCount,
    appliedSyncPatches as appliedPatches,
    addSyncPatch as addPatch,
    applySyncPatch as applyPatch,
    removeSyncPatch as removePatch,
    clearSyncPatches as clearPatches
} from './sync-patch-store';
</file>

<file path="src/lib/types/index.ts">
/**
 * Spec-Flow Studio Type Definitions
 *
 * Aether Consoleã¨Spec-Flow Studioã®é€£æºç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©
 * ãŠã‚ˆã³ Spec-Flow Studio å›ºæœ‰ã®å‹å®šç¾©
 */

// ========================================
// Spec-Kitå½¢å¼ï¼ˆå…±é€šãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼‰
// ========================================

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜
 */
export interface AgentSpec {
    name: string;
    displayName: string;
    role: string;
    capabilities: string[];
    constraints: string[];
    communication: {
        canSendTo: string[];
        canReceiveFrom: string[];
    };
}

/**
 * Specå·®åˆ†ï¼ˆä»•æ§˜å¤‰æ›´ï¼‰
 */
export interface SpecDiff {
    id: string;
    agentName: string;
    operation: 'add' | 'remove' | 'modify';
    path: string;
    before?: unknown;
    after?: unknown;
    impact: 'low' | 'medium' | 'high';
}

/**
 * ãƒ‘ãƒƒãƒï¼ˆå·®åˆ†ã®é›†åˆï¼‰- ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å½¢å¼
 */
export interface SpecPatch {
    kind: 'SpecPatch';
    version: 'v1';
    metadata: {
        id: string;
        name: string;
        createdAt: string; // ISO8601
        author: 'human' | 'ai' | 'system';
    };
    spec: {
        diffs: SpecDiff[];
        summary: string;
        rationale?: string;
        appliedAt?: string; // ISO8601
    };
}

// ========================================
// é€£æºã‚¤ãƒ™ãƒ³ãƒˆ
// ========================================

/**
 * ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œçµæœã®æ¦‚è¦
 */
export interface AgentResultSummary {
    agentName: string;
    displayName: string;
    status: 'completed' | 'error';
    responseSummary: string;
}

/**
 * ã‚·ãƒŠãƒªã‚ªã®æ¦‚è¦
 */
export interface ScenarioSummary {
    id: string;
    name: string;
    description: string;
    messageCount: number;
}

/**
 * Aether Console â†’ Spec-Flow Studio
 * ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã‚¹ã‚¿ã‚¸ã‚ªã¸é€ä¿¡ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
 */
export type ConsoleToStudioEvent =
    | { type: 'PATCH_APPLIED'; patch: SpecPatch }
    | { type: 'PATCH_REVERTED'; patchId: string }
    | { type: 'AGENT_EXECUTED'; agentName: string; input: string; output: string }
    | { type: 'PROPOSAL_GENERATED'; proposal: string; agentResults: AgentResultSummary[] }
    | { type: 'SYNC_REQUEST' };

/**
 * Spec-Flow Studio â†’ Aether Console
 * ã‚¹ã‚¿ã‚¸ã‚ªã‹ã‚‰ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸é€ä¿¡ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
 */
export type StudioToConsoleEvent =
    | { type: 'SPEC_UPDATED'; agents: AgentSpec[] }
    | { type: 'PATCH_CREATED'; patch: SpecPatch }
    | { type: 'SCENARIO_CREATED'; scenario: ScenarioSummary }
    | { type: 'SYNC_RESPONSE'; agents: AgentSpec[]; patches: SpecPatch[] };

// ========================================
// é€£æºè¨­å®š
// ========================================

/**
 * é€£æºæ¥ç¶šè¨­å®š
 */
export interface IntegrationConfig {
    /** Aether Consoleã®WebSocket URL */
    consoleUrl: string;
    /** è‡ªå‹•åŒæœŸã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ */
    autoSync: boolean;
    /** åŒæœŸé–“éš”ï¼ˆãƒŸãƒªç§’ï¼‰ */
    syncInterval: number;
}

/**
 * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é€£æºè¨­å®š
 */
export const DEFAULT_INTEGRATION_CONFIG: IntegrationConfig = {
    consoleUrl: 'ws://localhost:5173/api/ws',
    autoSync: false,
    syncInterval: 5000
};

// ========================================
// ç”Ÿæˆç‰©ï¼ˆArtifactsï¼‰
// ========================================

/**
 * ç”Ÿæˆç‰©ã®ç¨®é¡
 */
export type ArtifactType = 'ui-mock' | 'api-spec' | 'test-case' | 'use-case-diagram';

/**
 * ç”Ÿæˆç‰©
 */
export interface Artifact {
    id: string;
    type: ArtifactType;
    name: string;
    content: string;
    generatedAt: string; // ISO8601
    sourceSpec: string; // ç”Ÿæˆå…ƒã®Specå
    rationale?: string; // AIã®ç”Ÿæˆç†ç”±
    consideredConstraints?: string[]; // ç”Ÿæˆæ™‚ã«è€ƒæ…®ã—ãŸåˆ¶ç´„
}

// ========================================
// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
// ========================================

/**
 * æ¥ç¶šçŠ¶æ…‹
 */
export type ConnectionStatus = 'disconnected' | 'connecting' | 'connected' | 'error';

/**
 * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®çŠ¶æ…‹
 */
export interface AppState {
    currentSpec: AgentSpec[] | null;
    currentSpecName: string | null;
    artifacts: Artifact[];
    patches: SpecPatch[];
    connectionStatus: ConnectionStatus;
}
</file>

<file path="src/lib/utils/index.ts">
// Utilities
export * from './yaml-utils';
export * from './storage-utils';
export * from './crypto-utils';
export * from './diff-utils';
</file>

<file path="src/lib/utils/yaml-utils.ts">
/**
 * YAML Utilities
 *
 * Spec-Kit YAML ã®ãƒ‘ãƒ¼ã‚¹ãƒ»ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 */
import yaml from 'js-yaml';
import type { AgentSpec } from '$lib/types';

// ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®re-export
export {
  validateSpecKit,
  validateSpecKitFully,
  validateAgent,
  detectForbiddenFields,
  type ValidationResult,
  type ValidationWarning
} from './spec-kit-schema';

/**
 * YAMLæ–‡å­—åˆ—ã‚’AgentSpecã®é…åˆ—ã«ãƒ‘ãƒ¼ã‚¹
 */
export function parseSpecYaml(content: string): AgentSpec[] {
  try {
    const docs = yaml.loadAll(content) as Record<string, unknown>[];
    return docs
      .filter((doc) => doc && doc.kind === 'Agent')
      .map((doc) => convertToAgentSpec(doc));
  } catch (error) {
    console.error('YAML parse error:', error);
    throw new YamlParseError(error instanceof Error ? error.message : 'Unknown parse error');
  }
}

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ã®æ§‹é€ 
interface ParseCache {
  contentHash: string;
  specs: AgentSpec[];
}

let parseCache: ParseCache | null = null;

/**
 * æ–‡å­—åˆ—ã®ãƒãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
 */
function simpleHash(str: string): string {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash; // Convert to 32bit integer
  }
  return hash.toString(36);
}

/**
 * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ãYAMLãƒ‘ãƒ¼ã‚¹ï¼ˆåŠ¹ç‡åŒ–ç‰ˆï¼‰
 * åŒã˜å†…å®¹ã®å ´åˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”ã™
 */
export function parseSpecYamlCached(content: string): AgentSpec[] {
  const contentHash = simpleHash(content);

  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚Šã€ãƒãƒƒã‚·ãƒ¥ãŒä¸€è‡´ã™ã‚Œã°ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”ã™
  if (parseCache && parseCache.contentHash === contentHash) {
    return parseCache.specs;
  }

  // æ–°ã—ããƒ‘ãƒ¼ã‚¹
  const specs = parseSpecYaml(content);

  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°
  parseCache = {
    contentHash,
    specs
  };

  return specs;
}

/**
 * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
 */
export function clearParseCache(): void {
  parseCache = null;
}

/**
 * å˜ä¸€ã®YAMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ‘ãƒ¼ã‚¹
 */
export function parseYaml<T>(content: string): T {
  try {
    return yaml.load(content) as T;
  } catch (error) {
    console.error('YAML parse error:', error);
    throw new YamlParseError(error instanceof Error ? error.message : 'Unknown parse error');
  }
}

/**
 * ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’YAMLæ–‡å­—åˆ—ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
 */
export function stringifyYaml(obj: unknown): string {
  return yaml.dump(obj, {
    indent: 2,
    lineWidth: 120,
    noRefs: true,
    sortKeys: false
  });
}

/**
 * AgentSpecé…åˆ—ã‚’YAMLæ–‡å­—åˆ—ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆè¤‡æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
 */
export function stringifySpecs(specs: AgentSpec[]): string {
  return specs.map((spec) => stringifyYaml(convertFromAgentSpec(spec))).join('---\n');
}

/**
 * YAMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’AgentSpecã«å¤‰æ›
 */
function convertToAgentSpec(doc: Record<string, unknown>): AgentSpec {
  const metadata = doc.metadata as Record<string, unknown> || {};
  const spec = doc.spec as Record<string, unknown> || {};
  const communication = spec.communication as Record<string, string[]> || {};

  return {
    name: String(metadata.name || ''),
    displayName: String(metadata.displayName || metadata.name || ''),
    role: String(spec.role || ''),
    capabilities: Array.isArray(spec.capabilities) ? spec.capabilities : [],
    constraints: Array.isArray(spec.constraints) ? spec.constraints : [],
    communication: {
      canSendTo: Array.isArray(communication.canSendTo) ? communication.canSendTo : [],
      canReceiveFrom: Array.isArray(communication.canReceiveFrom) ? communication.canReceiveFrom : []
    }
  };
}

/**
 * AgentSpecã‚’YAMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå½¢å¼ã«å¤‰æ›
 */
function convertFromAgentSpec(spec: AgentSpec): Record<string, unknown> {
  return {
    kind: 'Agent',
    version: 'v1',
    metadata: {
      name: spec.name,
      displayName: spec.displayName
    },
    spec: {
      role: spec.role,
      capabilities: spec.capabilities,
      constraints: spec.constraints,
      communication: spec.communication
    }
  };
}

/**
 * YAMLãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼
 */
export class YamlParseError extends Error {
  constructor(message: string) {
    super(message);
    this.name = 'YamlParseError';
  }
}

/**
 * YAMLã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’å–å¾—
 */
export function getYamlErrors(content: string): YamlError[] {
  const errors: YamlError[] = [];

  try {
    yaml.loadAll(content);
  } catch (error) {
    if (error instanceof yaml.YAMLException) {
      errors.push({
        line: error.mark?.line ?? 0,
        column: error.mark?.column ?? 0,
        message: error.reason || error.message
      });
    }
  }

  return errors;
}

export interface YamlError {
  line: number;
  column: number;
  message: string;
}

/**
 * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
 */
export const AGENT_TEMPLATE = `kind: Agent
version: v1
metadata:
  name: new-agent
  displayName: "New Agent"
  description: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èª¬æ˜"
  icon: "ğŸ¤–"

spec:
  role: |
    ã“ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½¹å‰²ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

  capabilities:
    - capability-1
    - capability-2

  constraints:
    - "åˆ¶ç´„1: ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨"
    - "åˆ¶ç´„2: éµå®ˆã™ã¹ããƒ«ãƒ¼ãƒ«"

  inputs:
    - type: text
      description: "å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®èª¬æ˜"

  outputs:
    - type: result
      schema:
        summary: string
        confidence: number

  communication:
    canSendTo:
      - other-agent
    canReceiveFrom:
      - other-agent
`;

/**
 * Analyzerã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
 */
export const ANALYZER_TEMPLATE = `kind: Agent
version: v1
metadata:
  name: analyzer
  displayName: "Analyzer"
  description: "æƒ…å ±è§£æã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"
  icon: "ğŸ”"

spec:
  role: |
    å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ã€‚
    ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ç•°å¸¸ã‚’æ¤œå‡ºã—ã€ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å ±å‘Šã™ã‚‹ã€‚

  capabilities:
    - data-analysis
    - pattern-recognition
    - anomaly-detection

  constraints:
    - "æ¨æ¸¬ã§æƒ…å ±ã‚’è£œå®Œã—ãªã„"
    - "ç¢ºä¿¡åº¦ãŒä½ã„å ´åˆã¯æ˜ç¤ºã™ã‚‹"
    - "å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’æ¨æ¸¬ã§è£œå®Œã—ãªã„"

  communication:
    canSendTo:
      - predictor
      - planner
      - monitor
    canReceiveFrom:
      - planner
      - monitor
`;
</file>

<file path="src/routes/api/generate/+server.ts">
import { json } from '@sveltejs/kit';
import type { RequestHandler } from './$types';
import { generateContent } from '$lib/server/gemini';
import { getServerApiKey, loadProxyConfig } from '$lib/server/gemini-proxy';
import { buildUiPrompt, buildApiPrompt, buildTestCasePrompt, buildUseCasePrompt } from '$lib/utils/prompt-utils';
import type { AgentSpec } from '$lib/types';

export const POST: RequestHandler = async ({ request }) => {
    // ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰: ã‚µãƒ¼ãƒãƒ¼è¨­å®šã®APIã‚­ãƒ¼ã‚’å„ªå…ˆ
    const serverApiKey = getServerApiKey();
    const clientApiKey = request.headers.get('x-api-key');
    const apiKey = serverApiKey || clientApiKey;

    if (!apiKey) {
        return json({ error: 'API Key is required' }, { status: 401 });
    }

    // ã‚ªãƒªã‚¸ãƒ³æ¤œè¨¼ï¼ˆãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰æ™‚ï¼‰
    if (serverApiKey) {
        const config = loadProxyConfig();
        const origin = request.headers.get('origin');
        if (origin && !config.allowedOrigins.includes(origin)) {
            return json({ error: 'Origin not allowed' }, { status: 403 });
        }
    }

    try {
        const { spec, specs, artifactType, model } = await request.json();
        const agentSpec = spec as AgentSpec;
        const agentSpecs = specs as AgentSpec[] | undefined;

        let prompt = '';

        switch (artifactType) {
            case 'ui-mock':
                prompt = buildUiPrompt(agentSpec);
                break;
            case 'api-spec':
                prompt = buildApiPrompt(agentSpec);
                break;
            case 'test-case':
                prompt = buildTestCasePrompt(agentSpec);
                break;
            case 'use-case-diagram':
                if (!agentSpecs || agentSpecs.length === 0) {
                    return json({ error: 'Multiple specs required for use-case diagram' }, { status: 400 });
                }
                prompt = buildUseCasePrompt(agentSpecs);
                break;
            default:
                return json({ error: 'Invalid artifact type' }, { status: 400 });
        }

        const result = await generateContent({
            apiKey,
            modelName: model || 'gemini-2.0-flash-exp',
            prompt
        });

        // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®é™¤å» (```html ... ``` -> ...)
        let content = result;
        // Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯é™¤å»ã®ç°¡æ˜“æ­£è¦è¡¨ç¾
        const codeBlockRegex = /^```(?:html|yaml|json|markdown|mermaid)?\s*([\s\S]*?)```$/;
        const match = content.match(codeBlockRegex);
        if (match) {
            content = match[1].trim();
        }

        return json({ content });

    } catch (error) {
        console.error('API Error:', error);
        return json({ error: 'Generation failed', details: error instanceof Error ? error.message : String(error) }, { status: 500 });
    }
};
</file>

<file path="src/routes/history/+page.svelte">
<!--
  History Page
  ãƒ‘ãƒƒãƒå±¥æ­´ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºã¨ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«
-->
<script lang="ts">
	import { Panel, Button } from '$lib/components/ui';
	import {
		historyStore,
		patches,
		currentPatchIndex,
		canUndo,
		canRedo
	} from '$lib/stores/history-store';
	import { specs, setSpecs } from '$lib/stores/spec-store';
	import type { SpecPatch } from '$lib/types';

	// Undo
	function handleUndo() {
		const newSpecs = historyStore.undo();
		if (newSpecs) {
			setSpecs(newSpecs, 'draft-spec');
		}
	}

	// Redo
	function handleRedo() {
		const newSpecs = historyStore.redo();
		if (newSpecs) {
			setSpecs(newSpecs, 'draft-spec');
		}
	}

	// ç‰¹å®šã®ãƒ‘ãƒƒãƒã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
	function handleRevertTo(patchId: string) {
		if (confirm('ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿç¾åœ¨ã®å¤‰æ›´ã¯å¤±ã‚ã‚Œã¾ã™ã€‚')) {
			const newSpecs = historyStore.revertTo(patchId);
			if (newSpecs) {
				setSpecs(newSpecs, 'draft-spec');
			}
		}
	}

	// å½±éŸ¿åº¦ã«å¿œã˜ãŸè‰²
	function getImpactColor(impact: 'low' | 'medium' | 'high'): string {
		switch (impact) {
			case 'high':
				return 'var(--color-accent-error)';
			case 'medium':
				return 'var(--color-accent-warning)';
			default:
				return 'var(--color-accent-success)';
		}
	}

	// æ“ä½œã«å¿œã˜ãŸã‚¢ã‚¤ã‚³ãƒ³
	function getOperationIcon(op: 'add' | 'remove' | 'modify'): string {
		switch (op) {
			case 'add':
				return '+';
			case 'remove':
				return 'âˆ’';
			default:
				return '~';
		}
	}

	// Side-by-Side Diff ãƒ¢ãƒ¼ãƒ€ãƒ«
	let showDiffModal = $state(false);
	let selectedPatch = $state<SpecPatch | null>(null);

	function openDiffModal(patch: SpecPatch) {
		selectedPatch = patch;
		showDiffModal = true;
	}

	function closeDiffModal() {
		showDiffModal = false;
		selectedPatch = null;
	}

	// ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
	let selectedAgent = $state<string>('all');

	// ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåã‚’æŠ½å‡º
	const allAgents = $derived.by(() => {
		const agents = new Set<string>();
		for (const patch of $patches) {
			for (const diff of patch.spec.diffs) {
				agents.add(diff.agentName);
			}
		}
		return Array.from(agents).sort();
	});

	// ãƒ•ã‚£ãƒ«ã‚¿æ¸ˆã¿ãƒ‘ãƒƒãƒ
	const filteredPatches = $derived.by(() => {
		if (selectedAgent === 'all') {
			return $patches;
		}
		return $patches.filter((patch) =>
			patch.spec.diffs.some((diff) => diff.agentName === selectedAgent)
		);
	});
</script>

<div class="history-page">
	<header class="page-header">
		<div class="header-left">
			<h1>å±¥æ­´</h1>
			<span class="patch-count">{$patches.length} ãƒ‘ãƒƒãƒ</span>
		</div>
		<div class="header-right">
			<!-- ãƒ•ã‚£ãƒ«ã‚¿ UI -->
			{#if allAgents.length > 0}
				<select class="agent-filter" bind:value={selectedAgent}>
					<option value="all">ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</option>
					{#each allAgents as agent}
						<option value={agent}>{agent}</option>
					{/each}
				</select>
			{/if}
			<Button variant="secondary" size="sm" onclick={handleUndo} disabled={!$canUndo}>
				â†¶ å…ƒã«æˆ»ã™
			</Button>
			<Button variant="secondary" size="sm" onclick={handleRedo} disabled={!$canRedo}>
				ã‚„ã‚Šç›´ã™ â†·
			</Button>
		</div>
	</header>

	<div class="history-content">
		{#if $patches.length === 0}
			<Panel>
				<div class="empty-state">
					<p>å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>
					<p class="text-muted">
						ã‚¨ãƒ‡ã‚£ã‚¿ã§å¤‰æ›´ã‚’åŠ ãˆã¦ã€Œã‚³ãƒŸãƒƒãƒˆã€ã™ã‚‹ã¨ã€ã“ã“ã«å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
					</p>
				</div>
			</Panel>
		{:else}
			<div class="timeline">
				{#each filteredPatches as patch, index (patch.metadata.id)}
					<div class="timeline-item" class:current={$patches.indexOf(patch) === $currentPatchIndex}>
						<div class="timeline-marker">
							<div class="marker-dot"></div>
							{#if index < filteredPatches.length - 1}
								<div class="marker-line"></div>
							{/if}
						</div>
						<div class="timeline-content">
							<Panel>
								<div class="patch-header">
									<div class="patch-info">
										<span class="patch-name">{patch.metadata.name}</span>
										<span class="patch-meta">
											{new Date(patch.metadata.createdAt).toLocaleString()} ãƒ» {patch.metadata
												.author}
										</span>
									</div>
									{#if index !== $currentPatchIndex}
										<Button
											variant="ghost"
											size="sm"
											onclick={() => handleRevertTo(patch.metadata.id)}
										>
											æˆ»ã™
										</Button>
									{:else}
										<span class="current-badge">ç¾åœ¨</span>
									{/if}
								</div>

								<p class="patch-summary">{patch.spec.summary}</p>

								{#if patch.spec.rationale}
									<p class="patch-rationale">ç†ç”±: {patch.spec.rationale}</p>
								{/if}

								<div class="diff-list">
									{#each patch.spec.diffs as diff}
										<div class="diff-item">
											<span class="diff-op" style="color: {getImpactColor(diff.impact)}">
												{getOperationIcon(diff.operation)}
											</span>
											<span class="diff-agent">{diff.agentName}</span>
											<span class="diff-path">{diff.path}</span>
											{#if diff.operation === 'add' && diff.after}
												<span class="diff-value add">"{diff.after}"</span>
											{:else if diff.operation === 'remove' && diff.before}
												<span class="diff-value remove">"{diff.before}"</span>
											{:else if diff.operation === 'modify'}
												<span class="diff-value remove">"{diff.before}"</span>
												â†’
												<span class="diff-value add">"{diff.after}"</span>
											{/if}
										</div>
									{/each}
								</div>

								<button class="view-diff-btn" onclick={() => openDiffModal(patch)}>
									ğŸ” è©³ç´°æ¯”è¼ƒ
								</button>
							</Panel>
						</div>
					</div>
				{/each}
			</div>
		{/if}
	</div>
</div>

<!-- Side-by-Side Diff ãƒ¢ãƒ¼ãƒ€ãƒ« -->
{#if showDiffModal && selectedPatch}
	<div
		class="modal-backdrop"
		onclick={closeDiffModal}
		onkeydown={(e) => e.key === 'Escape' && closeDiffModal()}
		role="presentation"
		tabindex="-1"
	>
		<div class="diff-modal" onclick={(e) => e.stopPropagation()} role="dialog" tabindex="0">
			<div class="modal-header">
				<h2>ğŸ” Side-by-Side æ¯”è¼ƒ</h2>
				<span class="modal-subtitle">{selectedPatch.metadata.name}</span>
				<button class="close-btn" onclick={closeDiffModal}>âœ•</button>
			</div>

			<div class="diff-container">
				{#each selectedPatch.spec.diffs as diff}
					<div class="diff-row">
						<div class="diff-header">
							<span class="diff-op-badge" style="background: {getImpactColor(diff.impact)}">
								{getOperationIcon(diff.operation)}
							</span>
							<span class="diff-agent">{diff.agentName}</span>
							<span class="diff-path">{diff.path}</span>
						</div>
						<div class="side-by-side">
							<div class="diff-pane before">
								<div class="pane-label">å¤‰æ›´å‰</div>
								<pre class="pane-content">{diff.before ?? '(ãªã—)'}</pre>
							</div>
							<div class="diff-arrow">â†’</div>
							<div class="diff-pane after">
								<div class="pane-label">å¤‰æ›´å¾Œ</div>
								<pre class="pane-content">{diff.after ?? '(ãªã—)'}</pre>
							</div>
						</div>
					</div>
				{/each}
			</div>

			<div class="modal-footer">
				<Button variant="secondary" onclick={closeDiffModal}>é–‰ã˜ã‚‹</Button>
			</div>
		</div>
	</div>
{/if}

<style>
	.history-page {
		animation: fade-in var(--transition-base) ease-out;
	}

	.page-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: var(--space-6);
	}

	.header-left {
		display: flex;
		align-items: baseline;
		gap: var(--space-3);
	}

	.patch-count {
		font-size: var(--font-size-sm);
		color: var(--color-text-muted);
	}

	.header-right {
		display: flex;
		gap: var(--space-2);
		align-items: center;
	}

	.agent-filter {
		padding: var(--space-2) var(--space-3);
		background: var(--color-bg-tertiary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-md);
		color: var(--color-text-primary);
		font-size: var(--font-size-sm);
		cursor: pointer;
	}

	.agent-filter:hover {
		border-color: var(--color-accent-primary);
	}

	.agent-filter:focus {
		outline: none;
		border-color: var(--color-accent-primary);
		box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
	}

	.empty-state {
		text-align: center;
		padding: var(--space-8);
		color: var(--color-text-secondary);
	}

	.text-muted {
		color: var(--color-text-muted);
		font-size: var(--font-size-sm);
		margin-top: var(--space-2);
	}

	/* Timeline */
	.timeline {
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
	}

	.timeline-item {
		display: flex;
		gap: var(--space-4);
	}

	.timeline-item.current .marker-dot {
		background: var(--color-accent-primary);
		box-shadow: 0 0 8px var(--color-accent-primary);
	}

	.timeline-marker {
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 20px;
		flex-shrink: 0;
	}

	.marker-dot {
		width: 12px;
		height: 12px;
		border-radius: 50%;
		background: var(--color-border-primary);
		border: 2px solid var(--color-bg-secondary);
	}

	.marker-line {
		flex: 1;
		width: 2px;
		background: var(--color-border-secondary);
		margin-top: var(--space-2);
	}

	.timeline-content {
		flex: 1;
		max-width: 600px;
	}

	/* Patch Card */
	.patch-header {
		display: flex;
		justify-content: space-between;
		align-items: flex-start;
		margin-bottom: var(--space-3);
	}

	.patch-info {
		display: flex;
		flex-direction: column;
		gap: var(--space-1);
	}

	.patch-name {
		font-weight: 600;
		color: var(--color-text-primary);
	}

	.patch-meta {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
	}

	.current-badge {
		font-size: var(--font-size-xs);
		padding: var(--space-1) var(--space-2);
		background: rgba(0, 212, 255, 0.2);
		color: var(--color-accent-primary);
		border-radius: var(--radius-sm);
	}

	.patch-summary {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
		margin-bottom: var(--space-2);
	}

	.patch-rationale {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		font-style: italic;
		margin-bottom: var(--space-3);
	}

	/* Diff List */
	.diff-list {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
		padding-top: var(--space-3);
		border-top: 1px solid var(--color-border-secondary);
	}

	.diff-item {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		font-size: var(--font-size-xs);
		font-family: var(--font-mono);
	}

	.diff-op {
		font-weight: bold;
		width: 16px;
		text-align: center;
	}

	.diff-agent {
		color: var(--color-accent-secondary);
	}

	.diff-path {
		color: var(--color-text-muted);
	}

	.diff-value {
		padding: 0 var(--space-1);
		border-radius: var(--radius-sm);
	}

	.diff-value.add {
		background: rgba(16, 185, 129, 0.2);
		color: var(--color-accent-success);
	}

	.diff-value.remove {
		background: rgba(239, 68, 68, 0.2);
		color: var(--color-accent-error);
		text-decoration: line-through;
	}

	/* View Diff Button */
	.view-diff-btn {
		margin-top: var(--space-3);
		padding: var(--space-2) var(--space-3);
		background: var(--color-bg-tertiary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-md);
		color: var(--color-text-secondary);
		font-size: var(--font-size-xs);
		cursor: pointer;
		transition: all 0.2s;
	}

	.view-diff-btn:hover {
		background: var(--color-bg-hover);
		border-color: var(--color-accent-primary);
		color: var(--color-accent-primary);
	}

	/* Modal */
	.modal-backdrop {
		position: fixed;
		inset: 0;
		background: rgba(0, 0, 0, 0.7);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 1000;
		animation: fade-in 0.2s ease-out;
	}

	.diff-modal {
		background: var(--color-bg-primary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-lg);
		width: 90%;
		max-width: 900px;
		max-height: 80vh;
		display: flex;
		flex-direction: column;
		animation: slide-up 0.3s ease-out;
	}

	@keyframes slide-up {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.modal-header {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		padding: var(--space-4);
		border-bottom: 1px solid var(--color-border-primary);
	}

	.modal-header h2 {
		font-size: var(--font-size-lg);
		margin: 0;
	}

	.modal-subtitle {
		font-size: var(--font-size-sm);
		color: var(--color-text-muted);
	}

	.close-btn {
		margin-left: auto;
		background: none;
		border: none;
		color: var(--color-text-muted);
		font-size: var(--font-size-lg);
		cursor: pointer;
		padding: var(--space-1);
		border-radius: var(--radius-sm);
	}

	.close-btn:hover {
		color: var(--color-text-primary);
		background: var(--color-bg-hover);
	}

	.diff-container {
		flex: 1;
		overflow-y: auto;
		padding: var(--space-4);
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
	}

	.diff-row {
		background: var(--color-bg-secondary);
		border-radius: var(--radius-md);
		padding: var(--space-3);
	}

	.diff-header {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		margin-bottom: var(--space-3);
		padding-bottom: var(--space-2);
		border-bottom: 1px solid var(--color-border-secondary);
	}

	.diff-op-badge {
		width: 24px;
		height: 24px;
		border-radius: var(--radius-sm);
		display: flex;
		align-items: center;
		justify-content: center;
		color: white;
		font-weight: bold;
		font-size: var(--font-size-sm);
	}

	.side-by-side {
		display: grid;
		grid-template-columns: 1fr auto 1fr;
		gap: var(--space-3);
		align-items: stretch;
	}

	.diff-pane {
		background: var(--color-bg-tertiary);
		border-radius: var(--radius-md);
		overflow: hidden;
	}

	.diff-pane.before {
		border-left: 3px solid var(--color-accent-error);
	}

	.diff-pane.after {
		border-left: 3px solid var(--color-accent-success);
	}

	.pane-label {
		padding: var(--space-2) var(--space-3);
		background: var(--color-bg-hover);
		font-size: var(--font-size-xs);
		font-weight: 600;
		color: var(--color-text-muted);
	}

	.pane-content {
		padding: var(--space-3);
		font-family: var(--font-mono);
		font-size: var(--font-size-sm);
		white-space: pre-wrap;
		word-break: break-word;
		margin: 0;
		min-height: 60px;
	}

	.diff-arrow {
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: var(--font-size-xl);
		color: var(--color-text-muted);
	}

	.modal-footer {
		padding: var(--space-4);
		border-top: 1px solid var(--color-border-primary);
		display: flex;
		justify-content: flex-end;
	}
</style>
</file>

<file path="README.md">
# Spec-Flow Studio

AI Agent Specification Editor with Diff Management â€” Companion tool for [Aether Console](https://github.com/mjurymaru-blip/aether-console).

## Overview

Spec-Flow Studio is a **YAML-based specification editor** for defining AI agent behaviors. It enables:

- ğŸ“ **Spec-Kit Editor** â€” Edit agent specifications with syntax highlighting
- ğŸ” **Constraint Visualization** â€” Highlight constraints that govern AI behavior
- âœ¨ **AI Artifact Generation** â€” Generate UI mocks, API specs, test cases via Gemini API
- ğŸ“Š **Communication Diagrams** â€” Visualize agent interactions with Mermaid
- ğŸ”„ **Diff Management** â€” Track specification changes with version history
- ğŸ”Œ **WebSocket Integration** â€” Real-time sync with Aether Console

## Screenshots

### Dashboard
![Dashboard](assets/dashboard.png)

### Editor
![Editor](assets/editor.png)

### Viewer
![Viewer](assets/viewer.png)

## Getting Started

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build
```

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `http://localhost:5173` ã§èµ·å‹•ã—ã¾ã™ã€‚

## Tech Stack

| Category | Technology |
|----------|------------|
| Framework | SvelteKit + Svelte 5 (Runes) |
| Editor | CodeMirror 6 |
| Diagrams | Mermaid |
| AI | Google Gemini API |
| Encryption | Web Crypto API (AES-GCM) |
| Real-time | WebSocket (ws) |

---

## ä½¿ã„æ–¹

### 1. ã‚¨ãƒ‡ã‚£ã‚¿ã§Spec-Kitã‚’ä½œæˆ

1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€Œã‚¨ãƒ‡ã‚£ã‚¿ã€ã‚’é¸æŠ
2. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ**ã§åŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã³ã€ŒLoad Templateã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. YAMLã‚’ç·¨é›†ã—ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã‚’å®šç¾©
4. å³å´ã®ã€ŒConstraintsã€ãƒ‘ãƒãƒ«ã§åˆ¶ç´„æ¡ä»¶ã‚’ç¢ºèª

### 2. ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ç”Ÿæˆ

1. ã€ŒGenerate Artifactsã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ç”Ÿæˆã™ã‚‹ã‚¿ã‚¤ãƒ—ã‚’é¸æŠï¼ˆUI Mock / API Spec / Test Case / Use Case Diagramï¼‰
3. ã€Œç”Ÿæˆé–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

> **Note**: åˆå›ã¯APIã‚­ãƒ¼è¨­å®šãŒå¿…è¦ã§ã™ï¼ˆè¨­å®šãƒšãƒ¼ã‚¸ï¼‰ã€‚

### 3. ç”Ÿæˆç‰©ã‚’ç¢ºèª

1. ã€Œãƒ“ãƒ¥ãƒ¼ã‚¢ã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. å·¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰ç”Ÿæˆç‰©ã‚’é¸æŠ
3. **Preview**/**Code** ã§è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆ

---

## Spec-Kit Format

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ã®YAMLå½¢å¼ï¼š

```yaml
kind: Agent
version: v1
metadata:
  name: analyzer
  displayName: "Analyzer"
  description: "æƒ…å ±è§£æã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"

spec:
  role: |
    å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ã€‚

  capabilities:
    - data-analysis
    - pattern-recognition

  constraints:
    - "æ¨æ¸¬ã§æƒ…å ±ã‚’è£œå®Œã—ãªã„"
    - "ç¢ºä¿¡åº¦ãŒä½ã„å ´åˆã¯æ˜ç¤ºã™ã‚‹"

  communication:
    canSendTo: [predictor, planner]
    canReceiveFrom: [planner, monitor]
```

### ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| Field | Description |
|-------|-------------|
| `metadata.name` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè­˜åˆ¥å­ |
| `spec.role` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½¹å‰²èª¬æ˜ |
| `spec.capabilities` | å®Ÿè¡Œå¯èƒ½ãªæ©Ÿèƒ½ãƒªã‚¹ãƒˆ |
| `spec.constraints` | è¡Œå‹•åˆ¶ç´„ï¼ˆAIãŒå®ˆã‚‹ã¹ããƒ«ãƒ¼ãƒ«ï¼‰|
| `spec.communication` | ä»–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®é€šä¿¡è¨±å¯ |

---

## API Key Configuration

### é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆå€‹äººåˆ©ç”¨ï¼‰

è¨­å®šãƒšãƒ¼ã‚¸ã§APIã‚­ãƒ¼ã‚’ç™»éŒ²ã—ã¾ã™ï¼š

1. ã€Œè¨­å®šã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. **Gemini API Key** ã‚’å…¥åŠ›
3. **æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰** ã‚’è¨­å®š
4. ã€ŒAPIã‚­ãƒ¼ã‚’ä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

> **Security**: APIã‚­ãƒ¼ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§æš—å·åŒ–ï¼ˆAES-GCMï¼‰ã•ã‚Œã€localStorageã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã«ã¯é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚

### æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼ˆå…±æœ‰ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰

æœ¬ç•ªç’°å¢ƒã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼å´ã§APIã‚­ãƒ¼ã‚’ç®¡ç†ã§ãã¾ã™ï¼ˆãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰ï¼‰ï¼š

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
export GEMINI_API_KEY=your-api-key-here
export NODE_ENV=production
export WS_ALLOWED_ORIGINS=https://your-domain.com

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run build && npm run preview
```

| ç’°å¢ƒå¤‰æ•° | èª¬æ˜ |
|----------|------|
| `GEMINI_API_KEY` | Gemini APIã‚­ãƒ¼ï¼ˆè¨­å®šã™ã‚‹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ä¸è¦ï¼‰ |
| `NODE_ENV` | `production`ã§å³æ ¼ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼ã‚’æœ‰åŠ¹åŒ– |
| `WS_ALLOWED_ORIGINS` | è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ |
| `WS_SECRET` | WebSocketèªè¨¼ç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ |

> **Note**: `GEMINI_API_KEY`ã‚’è¨­å®šã™ã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯APIã‚­ãƒ¼ã‚’å…¥åŠ›ã›ãšã«ç”Ÿæˆæ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

---

## Integration with Aether Console

Spec-Flow Studio connects to Aether Console via WebSocket:

```
Aether Console (localhost:5173) âŸ· Spec-Flow Studio (localhost:3001)
                                   WebSocket: ws://localhost:3001/api/ws
```

å˜ä½“åˆ©ç”¨ã‚‚å¯èƒ½ã§ã™ã€‚æ¥ç¶šçŠ¶æ…‹ãŒã€ŒDisconnectedã€ã§ã‚‚å…¨æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

---

## Project Structure

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ components/    # UI Components
â”‚   â”‚   â”œâ”€â”€ ui/        # Button, Panel, StatusIndicator
â”‚   â”‚   â””â”€â”€ editor/    # SpecEditor, ConstraintPanel
â”‚   â”œâ”€â”€ stores/        # Svelte Stores
â”‚   â””â”€â”€ utils/         # Utilities (YAML, Crypto, Storage)
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ editor/        # Spec Editor
â”‚   â”œâ”€â”€ viewer/        # Artifact Viewer
â”‚   â”œâ”€â”€ history/       # Version History
â”‚   â””â”€â”€ settings/      # Settings
â””â”€â”€ api/
    â”œâ”€â”€ generate/      # AI Generation Endpoint
    â””â”€â”€ models/        # Model List Endpoint
```

---

## License

MIT
</file>

<file path="src/lib/components/editor/SpecEditor.svelte">
<!--
  SpecEditor Component
  CodeMirror 6 ã‚’ä½¿ç”¨ã—ãŸYAMLã‚¨ãƒ‡ã‚£ã‚¿
  è¡Œã‚¸ãƒ£ãƒ³ãƒ—ãƒ»ãƒã‚¤ãƒ©ã‚¤ãƒˆæ©Ÿèƒ½ä»˜ã
  CodeMirrorã¯å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§é…å»¶èª­ã¿è¾¼ã¿
-->
<script lang="ts">
	import { onMount, onDestroy } from 'svelte';
	import type { EditorView } from '@codemirror/view';
	import type { StateEffect, StateField } from '@codemirror/state';
	import type { DecorationSet } from '@codemirror/view';

	interface Props {
		value: string;
		readonly?: boolean;
		onChange?: (value: string) => void;
	}

	let { value = $bindable(), readonly = false, onChange }: Props = $props();

	let editorElement: HTMLElement;
	let editorView: EditorView | null = null;
	let isLoading = $state(true);

	// å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«ä¿å­˜ï¼‰
	let EditorViewModule: typeof EditorView | null = null;
	// eslint-disable-next-line @typescript-eslint/no-explicit-any
	let highlightLineEffect: any = null;

	// ã‚¨ãƒ‡ã‚£ã‚¿ã®åˆæœŸåŒ–ï¼ˆå‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰
	onMount(async () => {
		if (!editorElement) return;

		try {
			// CodeMirrorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‹•çš„ã«èª­ã¿è¾¼ã¿
			const [
				{ EditorView: EV, basicSetup },
				{ EditorState, StateEffect: SE, StateField: SF },
				{ yaml },
				{ oneDark },
				{ keymap, Decoration },
				{ defaultKeymap },
				{ specKitAutocomplete }
			] = await Promise.all([
				import('codemirror'),
				import('@codemirror/state'),
				import('@codemirror/lang-yaml'),
				import('@codemirror/theme-one-dark'),
				import('@codemirror/view'),
				import('@codemirror/commands'),
				import('$lib/utils/spec-kit-autocomplete')
			]);

			// ãƒã‚¤ãƒ©ã‚¤ãƒˆç”¨ã®Effect
			const highlightEffect = SE.define<{ from: number; to: number } | null>();
			highlightLineEffect = highlightEffect as any;

			// ãƒã‚¤ãƒ©ã‚¤ãƒˆç”¨ã®StateField
			const highlightLineField = SF.define<DecorationSet>({
				create() {
					return Decoration.none;
				},
				update(decorations, tr) {
					for (const e of tr.effects) {
						if (e.is(highlightEffect)) {
							if (e.value) {
								const deco = Decoration.line({ class: 'cm-highlight-line' }).range(e.value.from);
								return Decoration.set([deco]);
							}
							return Decoration.none;
						}
					}
					return decorations;
				},
				provide: (f) => EV.decorations.from(f)
			});

			const state = EditorState.create({
				doc: value,
				extensions: [
					basicSetup,
					keymap.of(defaultKeymap),
					yaml(),
					oneDark,
					specKitAutocomplete,
					highlightLineField,
					EV.updateListener.of((update) => {
						if (update.docChanged) {
							const newValue = update.state.doc.toString();
							value = newValue;
							if (onChange) onChange(newValue);
						}
					}),
					EV.editable.of(!readonly),
					EV.theme({
						'&': { height: '100%', fontSize: '14px' },
						'.cm-scroller': { fontFamily: 'var(--font-mono)' },
						'.cm-highlight-line': {
							backgroundColor: 'rgba(239, 68, 68, 0.3) !important',
							transition: 'background-color 0.3s ease'
						}
					})
				]
			});

			editorView = new EV({
				state,
				parent: editorElement
			});

			EditorViewModule = EV;
			isLoading = false;
		} catch (error) {
			console.error('Failed to load CodeMirror:', error);
			isLoading = false;
		}
	});

	// props.value ãŒå¤–éƒ¨ã‹ã‚‰å¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚¨ãƒ‡ã‚£ã‚¿ã«åæ˜ 
	$effect(() => {
		const currentValue = value; // æ˜ç¤ºçš„ã«ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ä¾å­˜ã‚’ä½œæˆ
		if (editorView && currentValue !== editorView.state.doc.toString()) {
			editorView.dispatch({
				changes: {
					from: 0,
					to: editorView.state.doc.length,
					insert: currentValue
				}
			});
		}
	});

	onDestroy(() => {
		if (editorView) {
			editorView.destroy();
		}
	});

	/**
	 * æŒ‡å®šè¡Œã«ã‚¸ãƒ£ãƒ³ãƒ—ï¼†ãƒã‚¤ãƒ©ã‚¤ãƒˆ
	 * @param lineNumber 1-indexed ã®è¡Œç•ªå·
	 */
	export function gotoLine(lineNumber: number) {
		if (!editorView) return;

		const doc = editorView.state.doc;
		const lineCount = doc.lines;

		// ç¯„å›²ãƒã‚§ãƒƒã‚¯
		if (lineNumber < 1 || lineNumber > lineCount) {
			console.warn(`[SpecEditor] Line ${lineNumber} out of range (1-${lineCount})`);
			return;
		}

		const line = doc.line(lineNumber);

		// ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è¡Œã‚’ä¸­å¤®ã«è¡¨ç¤º
		if (!EditorViewModule || !highlightLineEffect) return;
		editorView.dispatch({
			effects: [
				EditorViewModule.scrollIntoView(line.from, { y: 'center' }),
				highlightLineEffect.of({ from: line.from, to: line.to })
			],
			selection: { anchor: line.from }
		});

		// 2ç§’å¾Œã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’è§£é™¤
		setTimeout(() => {
			if (editorView) {
				editorView.dispatch({
					effects: highlightLineEffect.of(null)
				});
			}
		}, 2000);

		editorView.focus();
	}

	/**
	 * ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œç´¢ã—ã¦æœ€åˆã«ãƒãƒƒãƒã—ãŸè¡Œã«ã‚¸ãƒ£ãƒ³ãƒ—
	 * @param searchText æ¤œç´¢ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ
	 */
	export function gotoText(searchText: string) {
		if (!editorView) return;

		const doc = editorView.state.doc;
		const content = doc.toString();
		const index = content.indexOf(searchText);

		if (index === -1) {
			console.warn(`[SpecEditor] Text not found: "${searchText}"`);
			return;
		}

		const line = doc.lineAt(index);
		gotoLine(line.number);
	}
</script>

<div class="editor-container">
	{#if isLoading}
		<div class="editor-loading">
			<div class="loading-spinner"></div>
			<p>ã‚¨ãƒ‡ã‚£ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
		</div>
	{/if}
	<div class="editor-mount" bind:this={editorElement} class:hidden={isLoading}></div>
</div>

<style>
	.editor-container {
		width: 100%;
		height: 100%;
		overflow: hidden;
		border-radius: var(--radius-md);
		border: 1px solid var(--color-border-primary);
		position: relative;
	}

	.editor-mount {
		width: 100%;
		height: 100%;
	}

	.editor-mount.hidden {
		visibility: hidden;
	}

	.editor-loading {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		background: var(--color-bg-secondary);
		gap: var(--space-3);
	}

	.loading-spinner {
		width: 32px;
		height: 32px;
		border: 3px solid var(--color-border-primary);
		border-top-color: var(--color-accent-primary);
		border-radius: 50%;
		animation: spin 1s linear infinite;
	}

	@keyframes spin {
		to {
			transform: rotate(360deg);
		}
	}

	.editor-loading p {
		color: var(--color-text-muted);
		font-size: var(--font-size-sm);
	}

	/* CodeMirrorã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
	:global(.cm-editor) {
		height: 100%;
	}

	:global(.cm-scroller) {
		overflow: auto;
	}
</style>
</file>

<file path="src/routes/viewer/+page.svelte">
<!--
  Viewer Page
  AIç”Ÿæˆç‰©ãƒ“ãƒ¥ãƒ¼ã‚¢ (UI Mock / API Spec)
-->
<script lang="ts">
	import { onDestroy, untrack } from 'svelte';
	import { Panel, Button } from '$lib/components/ui';
	import { artifacts, removeArtifact, latestArtifacts } from '$lib/stores/artifact-store';
	import { SpecEditor } from '$lib/components/editor';
	import MermaidDiagram from '$lib/components/MermaidDiagram.svelte';
	import type { Artifact } from '$lib/types';

	// çŠ¶æ…‹
	let selectedArtifactId = $state<string | null>(null);
	let viewMode = $state<'preview' | 'code'>('preview');

	// é¸æŠä¸­ã®Artifact
	let selectedArtifact = $derived.by(() => {
		if ($artifacts.length === 0) return null;
		if (selectedArtifactId) {
			return $artifacts.find((a) => a.id === selectedArtifactId) || $artifacts[0];
		}
		return $artifacts[$artifacts.length - 1]; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ€æ–°
	});

	// Artifacté¸æŠãƒãƒ³ãƒ‰ãƒ©
	function selectArtifact(id: string) {
		selectedArtifactId = id;
	}

	// å‰Šé™¤ãƒãƒ³ãƒ‰ãƒ©
	function handleDelete(id: string) {
		console.log('[Viewer] handleDelete called with id:', id);
		if (confirm('ã“ã®ç”Ÿæˆç‰©ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
			console.log('[Viewer] confirm returned true, calling removeArtifact');
			removeArtifact(id);
			console.log('[Viewer] removeArtifact called, artifacts count:', $artifacts.length);
			if (selectedArtifactId === id) {
				selectedArtifactId = null;
			}
		}
	}

	// UI Mock ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã®Blob URL
	let previewUrl = $state<string | null>(null);
	let lastArtifactId: string | null = null;
	let interactiveMode = $state(false); // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒªãƒ³ã‚¯å‹•ä½œæœ‰åŠ¹ï¼‰

	// selectedArtifact ã® ID ã‚’è¿½è·¡ã—ã¦ previewUrl ã‚’æ›´æ–°
	$effect(() => {
		const artifactId = selectedArtifact?.id ?? null;
		const artifactType = selectedArtifact?.type;
		const artifactContent = selectedArtifact?.content;

		// IDãŒå¤‰ã‚ã£ã¦ã„ãªã‘ã‚Œã°ä½•ã‚‚ã—ãªã„ï¼ˆuntrackã§è¿½è·¡å¯¾è±¡ã‹ã‚‰å¤–ã™ï¼‰
		const shouldUpdate = untrack(() => artifactId !== lastArtifactId);
		if (!shouldUpdate) {
			return;
		}

		// å‰ã®URLã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆuntrackã§è¿½è·¡å¯¾è±¡ã‹ã‚‰å¤–ã™ï¼‰
		untrack(() => {
			if (previewUrl) {
				URL.revokeObjectURL(previewUrl);
			}
		});

		// æ–°ã—ã„URLã‚’ç”Ÿæˆ
		if (artifactType === 'ui-mock' && artifactContent) {
			const blob = new Blob([artifactContent], { type: 'text/html' });
			previewUrl = URL.createObjectURL(blob);
		} else {
			previewUrl = null;
		}

		lastArtifactId = artifactId;
	});

	onDestroy(() => {
		if (previewUrl) URL.revokeObjectURL(previewUrl);
	});
</script>

<div class="viewer-page">
	<header class="viewer-header">
		<h1>ç”Ÿæˆç‰©ãƒ“ãƒ¥ãƒ¼ã‚¢</h1>

		{#if selectedArtifact}
			<div class="header-controls">
				<div class="view-mode-toggle">
					<button
						class="toggle-btn"
						class:active={viewMode === 'preview'}
						onclick={() => (viewMode = 'preview')}
					>
						Preview
					</button>
					<button
						class="toggle-btn"
						class:active={viewMode === 'code'}
						onclick={() => (viewMode = 'code')}
					>
						Code
					</button>
				</div>
				<Button
					variant="danger"
					size="sm"
					onclick={() => selectedArtifact && handleDelete(selectedArtifact.id)}>å‰Šé™¤</Button
				>
			</div>
		{/if}
	</header>

	<div class="viewer-layout">
		<!-- å·¦å´: Artifactãƒªã‚¹ãƒˆ -->
		<div class="viewer-sidebar">
			<Panel title="Artifacts" class="h-full">
				<div class="artifact-list">
					{#each $artifacts as artifact}
						<button
							class="artifact-item"
							class:active={selectedArtifact?.id === artifact.id}
							onclick={() => selectArtifact(artifact.id)}
						>
							<div class="artifact-icon">
								{#if artifact.type === 'ui-mock'}ğŸ¨{:else}ğŸ“„{/if}
							</div>
							<div class="artifact-info">
								<span class="artifact-name">{artifact.name}</span>
								<span class="artifact-date">
									{new Date(artifact.generatedAt).toLocaleTimeString()}
								</span>
							</div>
						</button>
					{/each}

					{#if $artifacts.length === 0}
						<div class="empty-list">
							<p>ç”Ÿæˆç‰©ãŒã‚ã‚Šã¾ã›ã‚“</p>
							<a href="/editor" class="text-accent underline">ã‚¨ãƒ‡ã‚£ã‚¿ã§ç”Ÿæˆ</a>
						</div>
					{/if}
				</div>
			</Panel>
		</div>

		<!-- å³å´: ãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¨ãƒªã‚¢ -->
		<div class="viewer-main">
			{#if selectedArtifact}
				<div class="artifact-content">
					<!-- Constraints Badge -->
					{#if selectedArtifact.consideredConstraints && selectedArtifact.consideredConstraints.length > 0}
						<div class="constraints-badge">
							<span class="badge-icon">ğŸ›¡ï¸</span>
							<span class="badge-label">è€ƒæ…®ã—ãŸåˆ¶ç´„:</span>
							<div class="constraint-tags">
								{#each selectedArtifact.consideredConstraints as constraint}
									<span class="constraint-tag">{constraint}</span>
								{/each}
							</div>
						</div>
					{/if}

					<!-- Preview Mode -->
					<div class="content-view" class:hidden={viewMode !== 'preview'}>
						{#if selectedArtifact.type === 'ui-mock'}
							<div class="preview-container">
								<div class="preview-toolbar">
									<label class="interactive-toggle">
										<input type="checkbox" bind:checked={interactiveMode} />
										<span>ğŸ”— ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰</span>
									</label>
									<span class="toolbar-hint">
										{interactiveMode ? 'ãƒªãƒ³ã‚¯ãŒå‹•ä½œã—ã¾ã™' : 'ãƒªãƒ³ã‚¯ã¯ç„¡åŠ¹ã§ã™'}
									</span>
								</div>
								{#if previewUrl}
									{#if interactiveMode}
										<iframe
											src={previewUrl}
											title="UI Preview (Interactive)"
											class="preview-iframe interactive"
										></iframe>
									{:else}
										<iframe
											src={previewUrl}
											title="UI Preview"
											class="preview-iframe"
											sandbox="allow-same-origin"
										></iframe>
									{/if}
								{/if}
							</div>
						{:else if selectedArtifact.type === 'api-spec'}
							<div class="api-preview-placeholder">
								<p>OpenAPIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ç¾åœ¨ã‚³ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚</p>
								<Button size="sm" onclick={() => (viewMode = 'code')}>ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</Button>
							</div>
						{:else if selectedArtifact.type === 'use-case-diagram'}
							<div class="mermaid-preview">
								<MermaidDiagram
									code={selectedArtifact.content}
									id="usecase-{selectedArtifact.id}"
								/>
							</div>
						{:else}
							<div class="text-preview">
								<pre>{selectedArtifact.content}</pre>
							</div>
						{/if}
					</div>

					<!-- Code Mode -->
					<div class="content-view" class:hidden={viewMode !== 'code'}>
						<SpecEditor value={selectedArtifact.content} readonly={true} />
					</div>
				</div>
			{:else}
				<div class="empty-state">
					<p>å·¦å´ã®ãƒªã‚¹ãƒˆã‹ã‚‰ç”Ÿæˆç‰©ã‚’é¸æŠã™ã‚‹ã‹ã€ã‚¨ãƒ‡ã‚£ã‚¿ã§æ–°ã—ãç”Ÿæˆã—ã¦ãã ã•ã„ã€‚</p>
				</div>
			{/if}
		</div>
	</div>
</div>

<style>
	.viewer-page {
		height: calc(100vh - var(--header-height));
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
		animation: fade-in var(--transition-base) ease-out;
	}

	.viewer-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		height: var(--space-10);
	}

	.header-controls {
		display: flex;
		align-items: center;
		gap: var(--space-4);
	}

	.view-mode-toggle {
		display: flex;
		background: var(--color-bg-tertiary);
		border-radius: var(--radius-md);
		padding: 2px;
		border: 1px solid var(--color-border-primary);
	}

	.toggle-btn {
		padding: var(--space-1) var(--space-3);
		border: none;
		background: transparent;
		color: var(--color-text-secondary);
		border-radius: var(--radius-sm);
		cursor: pointer;
		font-size: var(--font-size-sm);
		transition: all 0.2s;
	}

	.toggle-btn.active {
		background: var(--color-bg-primary);
		color: var(--color-text-primary);
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
	}

	.viewer-layout {
		flex: 1;
		display: grid;
		grid-template-columns: 250px 1fr;
		gap: var(--space-4);
		min-height: 0;
	}

	/* Sidebar */
	.viewer-sidebar {
		height: 100%;
		overflow-y: auto;
	}

	:global(.h-full) {
		height: 100%;
	}

	.artifact-list {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
	}

	.artifact-item {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		padding: var(--space-3);
		background: transparent;
		border: 1px solid transparent;
		border-radius: var(--radius-md);
		cursor: pointer;
		text-align: left;
		transition: all 0.2s;
		width: 100%;
	}

	.artifact-item:hover {
		background: var(--color-bg-hover);
	}

	.artifact-item.active {
		background: rgba(0, 212, 255, 0.1);
		border-color: var(--color-accent-primary);
	}

	.artifact-icon {
		font-size: var(--font-size-lg);
	}

	.artifact-info {
		display: flex;
		flex-direction: column;
		overflow: hidden;
	}

	.artifact-name {
		font-size: var(--font-size-sm);
		color: var(--color-text-primary);
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.artifact-date {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
	}

	.empty-list {
		padding: var(--space-4);
		text-align: center;
		color: var(--color-text-muted);
		font-size: var(--font-size-sm);
	}

	/* Main */
	.viewer-main {
		background: var(--color-bg-secondary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-lg);
		overflow: hidden;
		display: flex;
		flex-direction: column;
	}

	.artifact-content {
		flex: 1;
		display: flex;
		flex-direction: column;
		overflow: hidden;
	}

	.content-view {
		flex: 1;
		display: flex;
		flex-direction: column;
		overflow: hidden;
		height: 100%;
	}

	.content-view.hidden {
		display: none;
	}

	.preview-container {
		flex: 1;
		background: white; /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯è¦‹ã‚„ã™ãç™½èƒŒæ™¯ */
	}

	.preview-iframe {
		width: 100%;
		height: 100%;
		border: none;
	}

	.api-preview-placeholder {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		height: 100%;
		gap: var(--space-4);
		color: var(--color-text-muted);
	}

	.text-preview {
		padding: var(--space-4);
		overflow: auto;
		font-family: var(--font-mono);
		white-space: pre-wrap;
	}

	.empty-state {
		display: flex;
		align-items: center;
		justify-content: center;
		height: 100%;
		color: var(--color-text-secondary);
	}

	.text-accent {
		color: var(--color-accent-primary);
	}

	.underline {
		text-decoration: underline;
	}

	/* Constraints Badge */
	.constraints-badge {
		display: flex;
		align-items: flex-start;
		gap: var(--space-2);
		padding: var(--space-3);
		background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(251, 146, 60, 0.1));
		border: 1px solid var(--color-accent-error);
		border-radius: var(--radius-md);
		margin-bottom: var(--space-3);
	}

	.badge-icon {
		font-size: 1.2rem;
	}

	.badge-label {
		font-size: var(--font-size-sm);
		font-weight: 600;
		color: var(--color-accent-error);
		white-space: nowrap;
	}

	.constraint-tags {
		display: flex;
		flex-wrap: wrap;
		gap: var(--space-1);
	}

	.constraint-tag {
		padding: var(--space-1) var(--space-2);
		background: rgba(239, 68, 68, 0.2);
		border-radius: var(--radius-sm);
		font-size: var(--font-size-xs);
		color: var(--color-text-primary);
	}

	.mermaid-preview {
		padding: var(--space-4);
		background: var(--color-bg-secondary);
		border-radius: var(--radius-md);
		overflow: auto;
		max-height: 600px;
	}

	.preview-toolbar {
		display: flex;
		align-items: center;
		gap: var(--space-4);
		padding: var(--space-2) var(--space-3);
		background: var(--color-bg-tertiary);
		border-bottom: 1px solid var(--color-border-primary);
	}

	.interactive-toggle {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		cursor: pointer;
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
	}

	.interactive-toggle input {
		width: 16px;
		height: 16px;
		accent-color: var(--color-accent-primary);
	}

	.interactive-toggle span {
		user-select: none;
	}

	.toolbar-hint {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
	}

	.preview-iframe.interactive {
		border: 2px solid var(--color-accent-primary);
	}
</style>
</file>

<file path="vite.config.ts">
import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vite';
import { WebSocketServer } from 'ws';
import type { ViteDevServer } from 'vite';
import type { IncomingMessage } from 'http';
import { createHash, randomBytes } from 'crypto';

// ========================================
// WebSocketèªè¨¼è¨­å®š
// ========================================

// å…±æœ‰ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆï¼ˆç’°å¢ƒå¤‰æ•°ã‹ã‚‰å–å¾—ã€ãªã‘ã‚Œã°ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆï¼‰
const WS_SECRET = process.env.WS_SECRET || randomBytes(32).toString('hex');

// è¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ï¼ˆç’°å¢ƒå¤‰æ•°ã¾ãŸã¯é–‹ç™ºç”¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
const ALLOWED_ORIGINS = process.env.WS_ALLOWED_ORIGINS
	? process.env.WS_ALLOWED_ORIGINS.split(',')
	: ['http://localhost:3001', 'http://localhost:5173', 'http://127.0.0.1:3001', 'http://127.0.0.1:5173'];

// æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã‹ã©ã†ã‹
const IS_PRODUCTION = process.env.NODE_ENV === 'production';

// èªè¨¼æ¸ˆã¿ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ â†’ WebSocketï¼‰
const authenticatedClients = new Map<string, import('ws').WebSocket>();

// æ¥ç¶šä¸­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
const clients = new Set<import('ws').WebSocket>();

/**
 * æ¥ç¶šãƒˆãƒ¼ã‚¯ãƒ³ã®æ¤œè¨¼
 * URLã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ ?token=xxx ã‚’æ¤œè¨¼
 */
function verifyConnection(request: IncomingMessage): { valid: boolean; clientId?: string } {
	const url = new URL(request.url || '', `http://${request.headers.host}`);
	const token = url.searchParams.get('token');
	const clientId = url.searchParams.get('clientId');
	const timestamp = url.searchParams.get('ts');

	// ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„å ´åˆã¯é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã¨ã—ã¦è¨±å¯ï¼ˆè­¦å‘Šã‚’å‡ºã™ï¼‰
	if (!token) {
		console.warn('[WebSocket] âš ï¸ No auth token provided - allowing in dev mode');
		return { valid: true, clientId: 'anonymous-' + Date.now() };
	}

	// ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ¤œè¨¼ï¼ˆ5åˆ†ä»¥å†…ï¼‰
	if (timestamp) {
		const ts = parseInt(timestamp, 10);
		const now = Date.now();
		if (Math.abs(now - ts) > 5 * 60 * 1000) {
			console.warn('[WebSocket] âš ï¸ Token expired');
			return { valid: false };
		}
	}

	// ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ï¼ˆHMAC-SHA256ï¼‰
	const expectedToken = createHash('sha256')
		.update(`${clientId}:${timestamp}:${WS_SECRET}`)
		.digest('hex');

	if (token === expectedToken) {
		return { valid: true, clientId: clientId || 'unknown' };
	}

	// Originæ¤œè¨¼ï¼ˆè¨±å¯ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¹ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
	const origin = request.headers.origin;
	if (origin && ALLOWED_ORIGINS.includes(origin)) {
		if (!IS_PRODUCTION) {
			console.warn('[WebSocket] âš ï¸ Allowing origin without valid token (dev mode):', origin);
		}
		return { valid: !IS_PRODUCTION, clientId: clientId || 'origin-' + Date.now() };
	}

	// æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã§ã¯å³æ ¼ã«æ‹’å¦
	if (IS_PRODUCTION) {
		console.error('[WebSocket] âŒ Production mode: rejecting unauthorized connection');
		return { valid: false };
	}

	// é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ã¯localhostã‚’è¨±å¯
	if (origin && (origin.includes('localhost') || origin.includes('127.0.0.1'))) {
		console.warn('[WebSocket] âš ï¸ Allowing localhost origin without valid token');
		return { valid: true, clientId: clientId || 'localhost-' + Date.now() };
	}

	return { valid: false };
}

// ========================================
// WebSocket Vite Plugin (é–‹ç™ºç’°å¢ƒç”¨)
// noServerãƒ¢ãƒ¼ãƒ‰ã§HMRã¨ã®ç«¶åˆã‚’å›é¿
// ========================================
function webSocketPlugin() {
	return {
		name: 'websocket-plugin',
		configureServer(server: ViteDevServer) {
			if (!server.httpServer) return;

			// noServerãƒ¢ãƒ¼ãƒ‰ã§WebSocketServerã‚’ä½œæˆ
			const wss = new WebSocketServer({ noServer: true });

			// upgradeã‚¤ãƒ™ãƒ³ãƒˆã§WebSocketæ¥ç¶šã‚’å‡¦ç†
			server.httpServer.on('upgrade', (request, socket, head) => {
				const pathname = new URL(request.url || '', `http://${request.headers.host}`).pathname;

				// /api/ws ãƒ‘ã‚¹ã®ã¿å‡¦ç†ï¼ˆãã‚Œä»¥å¤–ã¯Vite HMRã«æ¸¡ã™ï¼‰
				if (pathname === '/api/ws') {
					const result = verifyConnection(request);
					if (result.valid) {
						(request as any).clientId = result.clientId;
						wss.handleUpgrade(request, socket, head, (ws) => {
							wss.emit('connection', ws, request);
						});
					} else {
						console.log('[WebSocket] âŒ Connection rejected');
						socket.write('HTTP/1.1 401 Unauthorized\r\n\r\n');
						socket.destroy();
					}
				}
				// ãã‚Œä»¥å¤–ã¯Vite HMRãŒå‡¦ç†ã™ã‚‹ã®ã§ã‚¹ã‚­ãƒƒãƒ—
			});

			wss.on('connection', (ws, request) => {
				const clientId = (request as any).clientId || 'unknown';
				console.log(`[WebSocket] âœ… Client connected: ${clientId}`);
				clients.add(ws);
				authenticatedClients.set(clientId, ws);

				// ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
				ws.send(JSON.stringify({
					type: 'CONNECTED',
					message: 'Welcome to Spec-Flow Studio',
					clientId,
					authenticated: true,
					timestamp: new Date().toISOString()
				}));

				ws.on('message', (data) => {
					try {
						const message = JSON.parse(data.toString());
						console.log(`[WebSocket] Received from ${clientId}:`, message.type);

						// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
						handleMessage(ws, message, clientId);
					} catch (e) {
						console.error('[WebSocket] Parse error:', e);
					}
				});

				ws.on('close', () => {
					console.log(`[WebSocket] Client disconnected: ${clientId}`);
					clients.delete(ws);
					authenticatedClients.delete(clientId);
				});

				ws.on('error', (error) => {
					console.error('[WebSocket] Error:', error);
					clients.delete(ws);
					authenticatedClients.delete(clientId);
				});
			});

			console.log('[WebSocket] Server initialized on /api/ws (noServer mode)');
			console.log('[WebSocket] Secret:', WS_SECRET.substring(0, 8) + '...');
		}
	};
}

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©
function handleMessage(ws: import('ws').WebSocket, message: any, clientId: string) {
	switch (message.type) {
		case 'SYNC_REQUEST':
			// åŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œç­”
			ws.send(JSON.stringify({
				type: 'SYNC_RESPONSE',
				agents: [], // TODO: å®Ÿéš›ã®Spec-Storeã‹ã‚‰å–å¾—
				patches: [],
				timestamp: new Date().toISOString()
			}));
			console.log(`[WebSocket] Sent SYNC_RESPONSE to ${clientId}`);
			break;

		case 'PATCH_APPLIED':
			console.log('[WebSocket] Patch applied:', message.patch?.name);
			// ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
			broadcast({ type: 'PATCH_APPLIED_ACK', patchId: message.patch?.id });
			break;

		case 'AUTH':
			// èªè¨¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆè¿½åŠ èªè¨¼ãŒå¿…è¦ãªå ´åˆï¼‰
			ws.send(JSON.stringify({
				type: 'AUTH_ACK',
				status: 'authenticated',
				clientId
			}));
			break;

		default:
			console.log('[WebSocket] Unknown message type:', message.type);
	}
}

// å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
function broadcast(message: any) {
	const data = JSON.stringify(message);
	clients.forEach((client) => {
		if (client.readyState === 1) { // OPEN
			client.send(data);
		}
	});
}

export default defineConfig({
	plugins: [sveltekit(), webSocketPlugin()],
	server: {
		port: 3001
	}
});
</file>

<file path="package.json">
{
	"name": "spec-flow-studio",
	"private": true,
	"version": "0.0.1",
	"type": "module",
	"scripts": {
		"dev": "vite dev",
		"build": "vite build",
		"preview": "vite preview",
		"prepare": "svelte-kit sync || echo ''",
		"check": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json",
		"check:watch": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json --watch",
		"format": "prettier --write .",
		"lint": "prettier --check . && eslint ."
	},
	"devDependencies": {
		"@eslint/compat": "^1.4.0",
		"@eslint/js": "^9.39.1",
		"@sveltejs/adapter-auto": "^7.0.0",
		"@sveltejs/kit": "^2.49.1",
		"@sveltejs/vite-plugin-svelte": "^6.2.1",
		"@types/js-yaml": "^4.0.9",
		"@types/node": "^22",
		"@types/swagger-ui-dist": "^3.30.6",
		"@types/ws": "^8.18.1",
		"eslint": "^9.39.1",
		"eslint-config-prettier": "^10.1.8",
		"eslint-plugin-svelte": "^3.13.1",
		"globals": "^16.5.0",
		"prettier": "^3.7.4",
		"prettier-plugin-svelte": "^3.4.0",
		"svelte": "^5.45.6",
		"svelte-check": "^4.3.4",
		"typescript": "^5.9.3",
		"typescript-eslint": "^8.48.1",
		"vite": "^7.2.6",
		"ws": "^8.19.0"
	},
	"dependencies": {
		"@codemirror/lang-yaml": "^6.1.2",
		"@codemirror/state": "^6.5.4",
		"@codemirror/theme-one-dark": "^6.1.3",
		"@codemirror/view": "^6.39.11",
		"@google/generative-ai": "^0.24.1",
		"codemirror": "^6.0.2",
		"js-yaml": "^4.1.1",
		"mermaid": "^11.12.2",
		"swagger-ui-dist": "^5.31.0",
		"zod": "^4.3.5"
	}
}
</file>

<file path="src/routes/editor/+page.svelte">
<!--
  Editor Page
  Spec-Kit ã‚¨ãƒ‡ã‚£ã‚¿ã®å®Ÿè£…
-->
<script lang="ts">
	import { onMount } from 'svelte';
	import { Panel, Button, StatusIndicator } from '$lib/components/ui';
	import { SpecEditor, ConstraintPanel } from '$lib/components/editor';
	import MermaidDiagram from '$lib/components/MermaidDiagram.svelte';
	import {
		parseSpecYaml,
		getYamlErrors,
		AGENT_TEMPLATE,
		ANALYZER_TEMPLATE
	} from '$lib/utils/yaml-utils';
	import { saveSpecYaml, loadSpecYaml, loadFromStorage } from '$lib/utils/storage-utils';
	import { setSpecs, specs } from '$lib/stores/spec-store';
	import { settings } from '$lib/stores/settings-store';
	import { session } from '$lib/stores/session-store';
	import { decryptData } from '$lib/utils/crypto-utils';
	import { addArtifact } from '$lib/stores/artifact-store';
	import { historyStore, canUndo, canRedo } from '$lib/stores/history-store';
	import { stringifyYaml } from '$lib/utils/yaml-utils';
	import { buildCommunicationDiagram } from '$lib/utils/prompt-utils';
	import type { YamlError } from '$lib/utils/yaml-utils';
	import type { ArtifactType, AgentSpec } from '$lib/types';
	import { goto } from '$app/navigation';

	// çŠ¶æ…‹
	let yamlContent = $state('');
	let yamlErrors = $state<YamlError[]>([]);
	let isDirty = $state(false);
	let currentTemplate = $state('default');

	// ç”Ÿæˆãƒ¢ãƒ¼ãƒ€ãƒ«çŠ¶æ…‹
	let showGenerateModal = $state(false);
	let isGenerating = $state(false);
	let selectedArtifactType = $state<ArtifactType>('ui-mock');
	let tempPassword = $state(''); // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãªã„å ´åˆã®ä¸€æ™‚å…¥åŠ›ç”¨

	// åˆå›è¨ªå•ãƒ•ãƒ©ã‚°
	let isFirstVisit = $state(false);

	// å±¥æ­´ç®¡ç†ç”¨ã®çŠ¶æ…‹
	let previousSpecs = $state<AgentSpec[]>([]);
	let commitName = $state('');

	// SpecEditorå‚ç…§ï¼ˆè¡Œã‚¸ãƒ£ãƒ³ãƒ—ç”¨ï¼‰
	let specEditor:
		| { gotoText: (text: string) => void; gotoLine: (line: number) => void }
		| undefined;

	// åˆæœŸåŒ–
	onMount(() => {
		const saved = loadSpecYaml();
		if (saved.yaml) {
			yamlContent = saved.yaml;
			validateYaml(saved.yaml);
			// å±¥æ­´ã®åˆæœŸåŒ–
			historyStore.initialize($specs);
			previousSpecs = [...$specs];
		} else {
			// åˆå›è¨ªå•ï¼šã‚µãƒ³ãƒ—ãƒ«Specã‚’è‡ªå‹•ãƒ­ãƒ¼ãƒ‰
			isFirstVisit = true;
			yamlContent = ANALYZER_TEMPLATE; // ã‚ˆã‚Šå…·ä½“çš„ãªã‚µãƒ³ãƒ—ãƒ«
			validateYaml(ANALYZER_TEMPLATE);
			currentTemplate = 'analyzer';
		}
	});

	// YAMLã®æ¤œè¨¼ã¨ãƒ‘ãƒ¼ã‚¹
	function validateYaml(content: string) {
		const errors = getYamlErrors(content);
		yamlErrors = errors;

		if (errors.length === 0) {
			try {
				const parsedSpecs = parseSpecYaml(content);
				setSpecs(parsedSpecs, 'draft-spec'); // ã‚¹ãƒˆã‚¢æ›´æ–°
			} catch (e) {
				console.error('Spec parse error:', e);
			}
		}
	}

	// ã‚¨ãƒ‡ã‚£ã‚¿å¤‰æ›´ãƒãƒ³ãƒ‰ãƒ©
	function handleChange(newContent: string) {
		yamlContent = newContent;
		isDirty = true;
		validateYaml(newContent);
		// è‡ªå‹•ä¿å­˜ (ç°¡æ˜“)
		saveSpecYaml(newContent, 'draft-spec');
	}

	// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨
	function applyTemplate() {
		if (confirm('ç¾åœ¨ã®å†…å®¹ã‚’ä¸Šæ›¸ãã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é©ç”¨ã—ã¾ã™ã‹ï¼Ÿ')) {
			if (currentTemplate === 'analyzer') {
				yamlContent = ANALYZER_TEMPLATE;
			} else {
				yamlContent = AGENT_TEMPLATE;
			}

			validateYaml(yamlContent);
			saveSpecYaml(yamlContent, 'draft-spec');
			isDirty = false;
			previousSpecs = [...$specs];
		}
	}

	// ã‚³ãƒŸãƒƒãƒˆï¼ˆå±¥æ­´ã«è¨˜éŒ²ï¼‰
	function handleCommit() {
		if (yamlErrors.length > 0) {
			alert('YAMLã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ã¦ã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚');
			return;
		}

		const patch = historyStore.commit(previousSpecs, $specs, commitName || undefined);
		if (patch) {
			previousSpecs = [...$specs];
			isDirty = false;
			commitName = '';
			alert(`å¤‰æ›´ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ: ${patch.spec.summary}`);
		} else {
			alert('å¤‰æ›´ãŒã‚ã‚Šã¾ã›ã‚“');
		}
	}

	// Undo
	function handleUndo() {
		const newSpecs = historyStore.undo();
		if (newSpecs) {
			setSpecs(newSpecs, 'draft-spec');
			yamlContent = stringifyYaml(newSpecs);
			saveSpecYaml(yamlContent, 'draft-spec');
			previousSpecs = [...newSpecs];
		}
	}

	// Redo
	function handleRedo() {
		const newSpecs = historyStore.redo();
		if (newSpecs) {
			setSpecs(newSpecs, 'draft-spec');
			yamlContent = stringifyYaml(newSpecs);
			saveSpecYaml(yamlContent, 'draft-spec');
			previousSpecs = [...newSpecs];
		}
	}

	// ç”Ÿæˆå‡¦ç†ã®é–‹å§‹
	function startGeneration() {
		if ($specs.length === 0) {
			alert('æœ‰åŠ¹ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»•æ§˜ãŒã‚ã‚Šã¾ã›ã‚“');
			return;
		}
		if (!$settings.hasApiKey) {
			alert('APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è¨­å®šãƒšãƒ¼ã‚¸ã§è¨­å®šã—ã¦ãã ã•ã„ã€‚');
			goto('/settings');
			return;
		}
		showGenerateModal = true;
	}

	// Artifactç”Ÿæˆå®Ÿè¡Œ
	async function handleGenerate() {
		// APIã‚­ãƒ¼ã®å–å¾—ï¼ˆå¾©å·åŒ–ï¼‰
		let apiKey = '';
		try {
			const password = $session.encryptionPassword || tempPassword;
			if (!password) {
				alert('APIã‚­ãƒ¼ã®ä¿è­·ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
				return;
			}

			const encryptedKey = loadFromStorage('spec-flow-studio:api-key-encrypted', '');
			if (!encryptedKey) {
				throw new Error('æš—å·åŒ–ã•ã‚ŒãŸAPIã‚­ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
			}

			// å¾©å·åŒ–è©¦è¡Œ
			apiKey = await decryptData(encryptedKey, password);

			// æˆåŠŸã—ãŸã‚‰ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿å­˜
			if (!$session.encryptionPassword) {
				session.setPassword(password);
			}
		} catch (error) {
			console.error(error);
			alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã€å¾©å·åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ');
			return;
		}

		isGenerating = true;
		try {
			// æœ€åˆã®AgentSpecã‚’ä½¿ç”¨ï¼ˆè¤‡æ•°å¯¾å¿œã¯ä»Šå¾Œï¼‰
			const targetSpec = $specs[0];

			const response = await fetch('/api/generate', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
					'x-api-key': apiKey
				},
				body: JSON.stringify({
					spec: targetSpec,
					specs: $specs, // Use Case Diagramç”¨ã«å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é€ä¿¡
					artifactType: selectedArtifactType,
					model: $settings.geminiModel
				})
			});

			if (!response.ok) {
				const error = await response.json();
				throw new Error(error.error || 'Generation failed');
			}

			const { content } = await response.json();

			// Specå†…ã®constraintsã‚’æŠ½å‡º
			const allConstraints = $specs.flatMap((spec) => spec.constraints || []);

			// Artifactã‚¹ãƒˆã‚¢ã«è¿½åŠ 
			addArtifact({
				id: crypto.randomUUID(),
				type: selectedArtifactType,
				name: `${targetSpec.displayName} - ${selectedArtifactType}`,
				content: content,
				generatedAt: new Date().toISOString(),
				sourceSpec: targetSpec.name,
				consideredConstraints: allConstraints.length > 0 ? allConstraints : undefined
			});

			showGenerateModal = false;
			alert('ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼ãƒ“ãƒ¥ãƒ¼ã‚¢ã§ç¢ºèªã§ãã¾ã™ã€‚');
			goto('/viewer'); // ãƒ“ãƒ¥ãƒ¼ã‚¢ã¸é·ç§»
		} catch (error) {
			console.error('Generation error:', error);
			alert(`ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error instanceof Error ? error.message : 'Unknown error'}`);
		} finally {
			isGenerating = false;
			tempPassword = '';
		}
	}
</script>

<div class="editor-page">
	<header class="editor-header">
		<div class="header-left">
			<h1>Spec Editor</h1>
			<StatusIndicator
				status={yamlErrors.length === 0 ? 'success' : 'error'}
				label={yamlErrors.length === 0 ? 'Valid Spec' : `${yamlErrors.length} Errors`}
			/>
		</div>
		<div class="header-right">
			<select bind:value={currentTemplate} class="template-select" title="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ">
				<option value="default">Default Template</option>
				<option value="analyzer">Analyzer Agent</option>
			</select>
			<Button variant="secondary" size="sm" onclick={applyTemplate}>Load Template</Button>
			<Button variant="ghost" size="sm" onclick={handleUndo} disabled={!$canUndo} title="å…ƒã«æˆ»ã™"
				>â†¶</Button
			>
			<Button variant="ghost" size="sm" onclick={handleRedo} disabled={!$canRedo} title="ã‚„ã‚Šç›´ã™"
				>â†·</Button
			>
			<Button
				variant="primary"
				size="sm"
				onclick={handleCommit}
				disabled={yamlErrors.length > 0 || !isDirty}>ğŸ“ ã‚³ãƒŸãƒƒãƒˆ</Button
			>
			<Button
				variant="accent"
				size="sm"
				disabled={yamlErrors.length > 0 || isGenerating}
				onclick={startGeneration}
			>
				âœ¨ Generate Artifacts
			</Button>
		</div>
	</header>

	<!-- åˆå›è¨ªå•è€…å‘ã‘ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒãƒŠãƒ¼ -->
	{#if isFirstVisit}
		<div class="welcome-banner">
			<div class="welcome-content">
				<span class="welcome-icon">ğŸš€</span>
				<div class="welcome-text">
					<strong>Spec-Flow Studioã¸ã‚ˆã†ã“ãï¼</strong>
					<p>
						ã‚µãƒ³ãƒ—ãƒ«ã®Analyzer Agentã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚ã€ŒGenerate Artifactsã€ã§æˆæœç‰©ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚
					</p>
				</div>
			</div>
			<div class="welcome-actions">
				<Button
					variant="accent"
					size="sm"
					onclick={startGeneration}
					disabled={yamlErrors.length > 0}
				>
					âœ¨ ä»Šã™ãç”Ÿæˆã—ã¦ã¿ã‚‹
				</Button>
				<button class="dismiss-btn" onclick={() => (isFirstVisit = false)}>âœ•</button>
			</div>
		</div>
	{/if}

	<div class="editor-layout">
		<!-- å·¦å´: YAMLã‚¨ãƒ‡ã‚£ã‚¿ -->
		<div class="editor-main">
			<SpecEditor bind:this={specEditor} bind:value={yamlContent} onChange={handleChange} />
		</div>

		<!-- å³å´: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ & æƒ…å ± -->
		<div class="editor-sidebar">
			<!-- åˆ¶ç´„ãƒ‘ãƒãƒ« -->
			<div class="sidebar-section">
				<ConstraintPanel
					specs={$specs}
					onConstraintClick={(agentName, constraintText) => {
						if (specEditor) {
							specEditor.gotoText(constraintText);
						}
					}}
				/>
			</div>

			<!-- ã‚¨ãƒ©ãƒ¼ãƒ‘ãƒãƒ« (ã‚¨ãƒ©ãƒ¼æ™‚ã®ã¿è¡¨ç¤º) -->
			{#if yamlErrors.length > 0}
				<div class="sidebar-section">
					<Panel title="YAML Errors" variant="error" glow>
						<ul class="error-list">
							{#each yamlErrors as error}
								<li class="error-item">
									<span class="error-line">Line {error.line + 1}:</span>
									<span class="error-msg">{error.message}</span>
								</li>
							{/each}
						</ul>
					</Panel>
				</div>
			{/if}

			<!-- ãƒ‘ãƒ¼ã‚¹çµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ (ç°¡æ˜“) -->
			<div class="sidebar-section spec-preview">
				<Panel title="Structure Preview">
					<div class="preview-content">
						{#each $specs as agent}
							<div class="agent-preview">
								<span class="agent-icon"
									>{#if agent.role.includes('è§£æ') || agent.displayName.includes('Analyzer')}ğŸ”{:else}ğŸ¤–{/if}</span
								>
								<span class="agent-name">{agent.displayName}</span>
							</div>
						{/each}
						{#if $specs.length === 0 && yamlErrors.length === 0}
							<p class="text-muted text-center text-sm">No valid agents found</p>
						{/if}
					</div>
				</Panel>
			</div>

			<!-- é€šä¿¡å›³ãƒ‘ãƒãƒ« -->
			{#if $specs.length > 0}
				<div class="sidebar-section">
					<Panel title="Communication">
						<MermaidDiagram code={buildCommunicationDiagram($specs)} id="comm-diagram" />
					</Panel>
				</div>
			{/if}
		</div>
	</div>

	<!-- ç”Ÿæˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
	{#if showGenerateModal}
		<div class="modal-backdrop">
			<div class="modal">
				<h2 class="modal-title">Generate Artifacts</h2>

				<div class="modal-body">
					<div class="form-group">
						<label for="artifactType">ç”Ÿæˆã‚¿ã‚¤ãƒ—</label>
						<select id="artifactType" bind:value={selectedArtifactType} class="form-select">
							<option value="ui-mock">UI Mock (HTML/Tailwind)</option>
							<option value="api-spec">API Specification (OpenAPI)</option>
							<option value="test-case">Test Cases (Markdown)</option>
							<option value="use-case-diagram">Use Case Diagram (Mermaid)</option>
						</select>
					</div>

					{#if !$session.encryptionPassword}
						<div class="form-group">
							<label for="password">æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
							<input
								id="password"
								type="password"
								bind:value={tempPassword}
								placeholder="APIã‚­ãƒ¼ä¿è­·ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›"
								class="form-input"
							/>
							<p class="help-text">APIã‚­ãƒ¼ã‚’å¾©å·åŒ–ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚</p>
						</div>
					{/if}

					<div class="modal-info">
						<p>å¯¾è±¡: <strong>{$specs[0]?.displayName || 'Agent'}</strong></p>
						<p>ãƒ¢ãƒ‡ãƒ«: <strong>{$settings.geminiModel}</strong></p>
					</div>
				</div>

				<div class="modal-footer">
					<Button variant="ghost" onclick={() => (showGenerateModal = false)}>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</Button>
					<Button
						variant="accent"
						loading={isGenerating}
						disabled={isGenerating || (!$session.encryptionPassword && !tempPassword)}
						onclick={handleGenerate}
					>
						ç”Ÿæˆé–‹å§‹
					</Button>
				</div>
			</div>
		</div>
	{/if}
</div>

<style>
	.editor-page {
		height: calc(100vh - var(--header-height)); /* èª¿æ•´ */
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
		animation: fade-in var(--transition-base) ease-out;
		position: relative;
	}

	.editor-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		height: var(--space-10);
	}

	.header-left {
		display: flex;
		align-items: center;
		gap: var(--space-4);
	}

	.header-right {
		display: flex;
		align-items: center;
		gap: var(--space-3);
	}

	.template-select {
		padding: var(--space-2) var(--space-3);
		background: var(--color-bg-tertiary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-md);
		color: var(--color-text-primary);
		font-family: var(--font-sans);
		font-size: var(--font-size-sm);
	}

	.editor-layout {
		flex: 1;
		display: grid;
		grid-template-columns: 1fr 300px;
		gap: var(--space-4);
		min-height: 0; /* Grid overflowå¯¾ç­– */
	}

	.editor-main {
		height: 100%;
		min-height: 0;
	}

	.editor-sidebar {
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
		overflow-y: auto;
		height: 100%;
	}

	.sidebar-section {
		flex-shrink: 0;
	}

	/* Errors */
	.error-list {
		list-style: none;
		font-size: var(--font-size-xs);
		color: var(--color-accent-error);
	}

	.error-item {
		margin-bottom: var(--space-2);
		padding-bottom: var(--space-2);
		border-bottom: 1px solid rgba(239, 68, 68, 0.2);
	}

	.error-item:last-child {
		border-bottom: none;
		margin-bottom: 0;
		padding-bottom: 0;
	}

	.error-line {
		font-weight: bold;
		margin-right: var(--space-2);
	}

	/* Preview */
	.preview-content {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
	}

	.agent-preview {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		padding: var(--space-2);
		background: var(--color-bg-primary);
		border-radius: var(--radius-sm);
		border: 1px solid var(--color-border-secondary);
	}

	.agent-name {
		font-size: var(--font-size-sm);
		font-weight: 500;
	}

	/* Responsive */
	@media (max-width: 1024px) {
		.editor-layout {
			grid-template-columns: 1fr;
			grid-template-rows: 1fr auto;
		}

		.editor-sidebar {
			height: auto;
			max-height: 300px;
		}
	}

	/* Modal */
	.modal-backdrop {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.7);
		backdrop-filter: blur(4px);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 1000;
	}

	.modal {
		background: var(--color-bg-secondary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-lg);
		padding: var(--space-6);
		width: 100%;
		max-width: 400px;
		box-shadow: var(--shadow-xl);
	}

	.modal-title {
		font-size: var(--font-size-lg);
		font-weight: 600;
		margin-bottom: var(--space-4);
		color: var(--color-text-primary);
	}

	.modal-body {
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
		margin-bottom: var(--space-6);
	}

	.form-select,
	.form-input {
		width: 100%;
		padding: var(--space-3);
		background: var(--color-bg-tertiary);
		border: 1px solid var(--color-border-primary);
		border-radius: var(--radius-md);
		color: var(--color-text-primary);
		font-size: var(--font-size-sm);
	}

	.help-text {
		font-size: var(--font-size-xs);
		color: var(--color-text-muted);
		margin-top: var(--space-1);
	}

	.modal-info {
		padding: var(--space-3);
		background: rgba(0, 212, 255, 0.1);
		border-radius: var(--radius-md);
		font-size: var(--font-size-sm);
		display: flex;
		flex-direction: column;
		gap: var(--space-1);
	}

	.modal-footer {
		display: flex;
		justify-content: flex-end;
		gap: var(--space-2);
	}

	/* Welcome Banner */
	.welcome-banner {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: var(--space-4);
		background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(0, 212, 255, 0.1));
		border: 1px solid var(--color-accent-secondary);
		border-radius: var(--radius-lg);
		margin-bottom: var(--space-4);
		animation: slide-in 0.3s ease-out;
	}

	@keyframes slide-in {
		from {
			opacity: 0;
			transform: translateY(-10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.welcome-content {
		display: flex;
		align-items: center;
		gap: var(--space-3);
	}

	.welcome-icon {
		font-size: 2rem;
	}

	.welcome-text strong {
		display: block;
		font-size: var(--font-size-base);
		color: var(--color-text-primary);
		margin-bottom: var(--space-1);
	}

	.welcome-text p {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
		margin: 0;
	}

	.welcome-actions {
		display: flex;
		align-items: center;
		gap: var(--space-3);
	}

	.dismiss-btn {
		background: none;
		border: none;
		color: var(--color-text-muted);
		font-size: var(--font-size-lg);
		cursor: pointer;
		padding: var(--space-1);
		border-radius: var(--radius-sm);
		transition: all 0.2s;
	}

	.dismiss-btn:hover {
		color: var(--color-text-primary);
		background: var(--color-bg-hover);
	}
</style>
</file>

<file path="docs/task.md">
# Spec-Flow Studio ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

## æ¦‚è¦
Spec-Flow Studio ã®é–‹ç™ºã‚¿ã‚¹ã‚¯ä¸€è¦§ã€‚å®Œäº†æ¸ˆã¿ãƒ»é€²è¡Œä¸­ãƒ»å°†æ¥å¯¾å¿œã‚’ä¸€å…ƒç®¡ç†ã€‚

---

## Phase 1: åŸºç›¤æ§‹ç¯‰ âœ…
- [x] SvelteKitãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
- [x] TypeScriptå‹å®šç¾© (`src/lib/types/index.ts`)
- [x] Svelte Storesè¨­è¨ˆ (spec-store, artifact-store, integration-store)
- [x] SFé¢¨CSSå¤‰æ•°ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
- [x] UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Panel, Button, StatusIndicator)
- [x] ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (Sidebar, StatusBar)
- [x] ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (dashboard, editor, viewer, history, settings)

---

## Phase 2: Spec-Kit Editor âœ…
- [x] CodeMirror 6çµ±åˆ (SpecEditor.svelte)
- [x] YAMLãƒ‘ãƒ¼ã‚¹ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ (yaml-utils.ts)
- [x] åˆ¶ç´„ãƒ‘ãƒãƒ« (ConstraintPanel.svelte)
- [x] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿
- [x] ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è‡ªå‹•ä¿å­˜
- [x] ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

---

## Phase 3: AI Generation Engine âœ…
- [x] Gemini APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (gemini.ts)
- [x] APIã‚­ãƒ¼æš—å·åŒ– (crypto-utils.ts)
- [x] è¨­å®šã‚¹ãƒˆã‚¢ (settings-store.ts, session-store.ts)
- [x] ç”Ÿæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (/api/generate)
- [x] ãƒ¢ãƒ‡ãƒ«ä¸€è¦§å–å¾— (/api/models)
- [x] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (UI Mock, API Spec)

---

## Phase 3.5: AIç”Ÿæˆæ‹¡å¼µ âœ…
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- [x] ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³(Mermaid)ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- [x] é€šä¿¡å›³ç”Ÿæˆ (buildCommunicationDiagram)
- [x] MermaidDiagramã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [x] ã‚¨ãƒ‡ã‚£ã‚¿ã«é€šä¿¡å›³ãƒ‘ãƒãƒ«è¿½åŠ 

---

## Phase 4: Diffç®¡ç†ãƒ»å±¥æ­´ âœ…
- [x] å·®åˆ†è¨ˆç®— (diff-utils.ts)
- [x] å±¥æ­´ã‚¹ãƒˆã‚¢ (history-store.ts)
- [x] Undo/Redoæ©Ÿèƒ½
- [x] å±¥æ­´ãƒšãƒ¼ã‚¸ (/history)
- [x] ã‚³ãƒŸãƒƒãƒˆãƒœã‚¿ãƒ³

---

## Phase 5: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜å¯¾å¿œ âœ…
- [x] Mermaidå†æç”»ãƒ‡ãƒã‚¦ãƒ³ã‚¹ (300ms)
- [x] ConstraintPanelè¦–è¦šå¼·èª¿ (èµ¤è‰²ãƒ»è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)

---

## Phase 6: WebSocketçµ±åˆ âœ…
- [x] Viteãƒ—ãƒ©ã‚°ã‚¤ãƒ³WebSocketã‚µãƒ¼ãƒãƒ¼ (vite.config.ts)
- [x] /api/ws ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- [x] Aether Consoleã¨ã®æ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ
- [x] CONNECTED/SYNC_REQUEST/SYNC_RESPONSE ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## Phase 7: GitHubå…¬é–‹ âœ…
- [x] README.mdæ›´æ–°ï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»ä½¿ã„æ–¹ãƒ»Spec-Kitå½¢å¼ï¼‰
- [x] GitHubãƒªãƒã‚¸ãƒˆãƒªä½œæˆãƒ»å…¬é–‹

---

## Phase 8: å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼åæ˜  (2026-01-17)

### ğŸ”´ é«˜å„ªå…ˆåº¦ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š
- [x] **åˆå›ä½“é¨“æ”¹å–„**: ã‚µãƒ³ãƒ—ãƒ«Specè‡ªå‹•ãƒ­ãƒ¼ãƒ‰ï¼‹ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒãƒŠãƒ¼
- [x] **constraintså¯è¦–åŒ–å¼·åŒ–**: ç”Ÿæˆçµæœã«ã€Œè€ƒæ…®ã—ãŸconstraintã€ãƒãƒƒã‚¸è¡¨ç¤º
- [x] **Spec-Kit schema (Zod)**: ç¦æ­¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»å±é™ºconstraintsæ¤œå‡º

### ğŸŸ¡ ä¸­å„ªå…ˆåº¦ - é–‹ç™ºè€…ä½“é¨“å‘ä¸Š
- [x] **ã‚¨ãƒ‡ã‚£ã‚¿è‡ªå‹•è£œå®Œ**: Spec-Kitå½¢å¼ã®autocomplete (CodeMirroræ‹¡å¼µ)
- [x] **Side-by-Side Diffãƒ“ãƒ¥ãƒ¼ã‚¢**: å±¥æ­´ãƒšãƒ¼ã‚¸ã§å·¦å³æ¯”è¼ƒè¡¨ç¤º
- [x] **å±¥æ­´ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆåˆ¶**: ãƒ‘ãƒƒãƒå¢—åŠ æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä¿å­˜

### ğŸŸ¢ ä½å„ªå…ˆåº¦ - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„
- [x] **domainå±¤åˆ†é›¢**: stores/ã‹ã‚‰åˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯ã‚’domain/ã«ç§»è¡Œ
- [x] **IndexedDBç§»è¡Œ**: localStorage 5MBåˆ¶é™å¯¾ç­–
- [x] **WebSocketã‚¤ãƒ™ãƒ³ãƒˆdebounce/throttle**: é€šä¿¡é »ç™ºæ™‚ã®æœ€é©åŒ–

---

## å°†æ¥å¯¾å¿œã‚¿ã‚¹ã‚¯ (Backlog)

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
- [x] WebSocketèªè¨¼ (HMAC-SHA256ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼)
- [x] SSRæ™‚ã®Storeæ¼æ´©ãƒªã‚¹ã‚¯å¯¾ç­– (SSRã‚ªãƒ•ã§å¯¾å¿œæ¸ˆã¿)
- [x] API CSRFå¯¾ç­–
- [x] Gemini API ProxyåŒ– (æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚)
- [x] WebSocket origin/protocol versionæ¤œè¨¼

### UI/UXæ”¹å–„
- [x] Constraint â†’ YAMLè¡Œã‚¸ãƒ£ãƒ³ãƒ—æ©Ÿèƒ½
- [x] WebSocketæ¥ç¶šçŠ¶æ…‹ã®UIè¡¨ç¤ºå¼·åŒ–
- [x] æ“ä½œæ‰‹é †ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«è¿½åŠ 
- [x] ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®lazy render / ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- [x] ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ (ui-mockã®ãƒªãƒ³ã‚¯å‹•ä½œ)

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [x] Editoråˆ†å‰²ãƒ­ãƒ¼ãƒ‰æœ€é©åŒ–
- [x] Specå†ãƒ‘ãƒ¼ã‚¹åŠ¹ç‡åŒ– (å¤‰æ›´subtreeã®ã¿æ›´æ–°)

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [x] ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®localStorageæ°¸ç¶šåŒ–
- [x] integration-storeè²¬å‹™åˆ†é›¢ (connection/event/sync)
- [x] å±¥æ­´ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° (ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¥)
- [x] Swagger UIçµ±åˆ

---

## é€²æ—ã‚µãƒãƒªãƒ¼
- **é–‹å§‹æ—¥**: 2026-01-15
- **æœ€çµ‚æ›´æ–°**: 2026-01-17
- **çŠ¶æ…‹**: Phase 1-7 å®Œäº†ã€Phase 8 (å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼åæ˜ ) é–‹å§‹
- **å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ChatGPTãƒ»Geminiã«ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†ã€æ”¹å–„ç‚¹ã‚’Phase 8ã«åæ˜ 
</file>

</files>
